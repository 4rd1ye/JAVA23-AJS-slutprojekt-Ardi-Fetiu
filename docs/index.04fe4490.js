let e,t,n;function r(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var i,s,a,o,l,u,c,h,d,f,p,m,g,y,v,w,b,_,E,S,I,x,T,k,C,N=globalThis;function D(e){return e&&e.__esModule?e.default:e}var A={},P={},R=N.parcelRequire02aa;null==R&&((R=function(e){if(e in A)return A[e].exports;if(e in P){var t=P[e];delete P[e];var n={id:e,exports:{}};return A[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){P[e]=t},N.parcelRequire02aa=R);var O=R.register;O("1b2ls",function(e,t){r(e.exports,"Fragment",()=>n,e=>n=e),r(e.exports,"jsx",()=>i,e=>i=e),r(e.exports,"jsxs",()=>s,e=>s=e);var n,i,s,a=R("acw62"),o=Symbol.for("react.element"),l=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,c=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,n){var r,i={},s=null,a=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(a=t.ref),t)u.call(t,r)&&!h.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:c.current}}n=l,i=d,s=d}),O("acw62",function(e,t){e.exports=R("2pUnB")}),O("2pUnB",function(e,t){r(e.exports,"Children",()=>n,e=>n=e),r(e.exports,"Component",()=>i,e=>i=e),r(e.exports,"Fragment",()=>s,e=>s=e),r(e.exports,"Profiler",()=>a,e=>a=e),r(e.exports,"PureComponent",()=>o,e=>o=e),r(e.exports,"StrictMode",()=>l,e=>l=e),r(e.exports,"Suspense",()=>u,e=>u=e),r(e.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",()=>c,e=>c=e),r(e.exports,"act",()=>h,e=>h=e),r(e.exports,"cloneElement",()=>d,e=>d=e),r(e.exports,"createContext",()=>f,e=>f=e),r(e.exports,"createElement",()=>p,e=>p=e),r(e.exports,"createFactory",()=>m,e=>m=e),r(e.exports,"createRef",()=>g,e=>g=e),r(e.exports,"forwardRef",()=>y,e=>y=e),r(e.exports,"isValidElement",()=>v,e=>v=e),r(e.exports,"lazy",()=>w,e=>w=e),r(e.exports,"memo",()=>b,e=>b=e),r(e.exports,"startTransition",()=>_,e=>_=e),r(e.exports,"unstable_act",()=>E,e=>E=e),r(e.exports,"useCallback",()=>S,e=>S=e),r(e.exports,"useContext",()=>I,e=>I=e),r(e.exports,"useDebugValue",()=>x,e=>x=e),r(e.exports,"useDeferredValue",()=>T,e=>T=e),r(e.exports,"useEffect",()=>k,e=>k=e),r(e.exports,"useId",()=>C,e=>C=e),r(e.exports,"useImperativeHandle",()=>N,e=>N=e),r(e.exports,"useInsertionEffect",()=>D,e=>D=e),r(e.exports,"useLayoutEffect",()=>A,e=>A=e),r(e.exports,"useMemo",()=>P,e=>P=e),r(e.exports,"useReducer",()=>R,e=>R=e),r(e.exports,"useRef",()=>O,e=>O=e),r(e.exports,"useState",()=>L,e=>L=e),r(e.exports,"useSyncExternalStore",()=>M,e=>M=e),r(e.exports,"useTransition",()=>F,e=>F=e),r(e.exports,"version",()=>B,e=>B=e);var n,i,s,a,o,l,u,c,h,d,f,p,m,g,y,v,w,b,_,E,S,I,x,T,k,C,N,D,A,P,R,O,L,M,F,B,V=Symbol.for("react.element"),U=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),G=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),H=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),Y=Symbol.iterator,X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,Z={};function ee(e,t,n){this.props=e,this.context=t,this.refs=Z,this.updater=n||X}function et(){}function en(e,t,n){this.props=e,this.context=t,this.refs=Z,this.updater=n||X}ee.prototype.isReactComponent={},ee.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},ee.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},et.prototype=ee.prototype;var er=en.prototype=new et;er.constructor=en,J(er,ee.prototype),er.isPureReactComponent=!0;var ei=Array.isArray,es=Object.prototype.hasOwnProperty,ea={current:null},eo={key:!0,ref:!0,__self:!0,__source:!0};function el(e,t,n){var r,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)es.call(t,r)&&!eo.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return{$$typeof:V,type:e,key:s,ref:a,props:i,_owner:ea.current}}function eu(e){return"object"==typeof e&&null!==e&&e.$$typeof===V}var ec=/\/+/g;function eh(e,t){var n,r;return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36)}function ed(e,t,n){if(null==e)return e;var r=[],i=0;return function e(t,n,r,i,s){var a,o,l,u=typeof t;("undefined"===u||"boolean"===u)&&(t=null);var c=!1;if(null===t)c=!0;else switch(u){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case V:case U:c=!0}}if(c)return s=s(c=t),t=""===i?"."+eh(c,0):i,ei(s)?(r="",null!=t&&(r=t.replace(ec,"$&/")+"/"),e(s,n,r,"",function(e){return e})):null!=s&&(eu(s)&&(a=s,o=r+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(ec,"$&/")+"/")+t,s={$$typeof:V,type:a.type,key:o,ref:a.ref,props:a.props,_owner:a._owner}),n.push(s)),1;if(c=0,i=""===i?".":i+":",ei(t))for(var h=0;h<t.length;h++){var d=i+eh(u=t[h],h);c+=e(u,n,r,d,s)}else if("function"==typeof(d=null===(l=t)||"object"!=typeof l?null:"function"==typeof(l=Y&&l[Y]||l["@@iterator"])?l:null))for(t=d.call(t),h=0;!(u=t.next()).done;)d=i+eh(u=u.value,h++),c+=e(u,n,r,d,s);else if("object"===u)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(n=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return c}(e,r,"","",function(e){return t.call(n,e,i++)}),r}function ef(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var ep={current:null},em={transition:null};function eg(){throw Error("act(...) is not supported in production builds of React.")}n={map:ed,forEach:function(e,t,n){ed(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ed(e,function(){t++}),t},toArray:function(e){return ed(e,function(e){return e})||[]},only:function(e){if(!eu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},i=ee,s=z,a=q,o=en,l=j,u=Q,c={ReactCurrentDispatcher:ep,ReactCurrentBatchConfig:em,ReactCurrentOwner:ea},h=eg,d=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=J({},e.props),i=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=ea.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)es.call(t,l)&&!eo.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:V,type:e.type,key:i,ref:s,props:r,_owner:a}},f=function(e){return(e={$$typeof:G,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:$,_context:e},e.Consumer=e},p=el,m=function(e){var t=el.bind(null,e);return t.type=e,t},g=function(){return{current:null}},y=function(e){return{$$typeof:K,render:e}},v=eu,w=function(e){return{$$typeof:W,_payload:{_status:-1,_result:e},_init:ef}},b=function(e,t){return{$$typeof:H,type:e,compare:void 0===t?null:t}},_=function(e){var t=em.transition;em.transition={};try{e()}finally{em.transition=t}},E=eg,S=function(e,t){return ep.current.useCallback(e,t)},I=function(e){return ep.current.useContext(e)},x=function(){},T=function(e){return ep.current.useDeferredValue(e)},k=function(e,t){return ep.current.useEffect(e,t)},C=function(){return ep.current.useId()},N=function(e,t,n){return ep.current.useImperativeHandle(e,t,n)},D=function(e,t){return ep.current.useInsertionEffect(e,t)},A=function(e,t){return ep.current.useLayoutEffect(e,t)},P=function(e,t){return ep.current.useMemo(e,t)},R=function(e,t,n){return ep.current.useReducer(e,t,n)},O=function(e){return ep.current.useRef(e)},L=function(e){return ep.current.useState(e)},M=function(e,t,n){return ep.current.useSyncExternalStore(e,t,n)},F=function(){return ep.current.useTransition()},B="18.3.1"}),O("Xw6Mv",function(e,t){r(e.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",()=>q,e=>q=e),r(e.exports,"createPortal",()=>$,e=>$=e),r(e.exports,"createRoot",()=>G,e=>G=e),r(e.exports,"findDOMNode",()=>K,e=>K=e),r(e.exports,"flushSync",()=>Q,e=>Q=e),r(e.exports,"hydrate",()=>H,e=>H=e),r(e.exports,"hydrateRoot",()=>W,e=>W=e),r(e.exports,"render",()=>Y,e=>Y=e),r(e.exports,"unmountComponentAtNode",()=>X,e=>X=e),r(e.exports,"unstable_batchedUpdates",()=>J,e=>J=e),r(e.exports,"unstable_renderSubtreeIntoContainer",()=>Z,e=>Z=e),r(e.exports,"version",()=>ee,e=>ee=e);var n,i,s,a,o,l,u=R("acw62"),c=R("fO90s");function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,f={};function p(e,t){m(e,t),m(e+"Capture",t)}function m(e,t){for(f[e]=t,e=0;e<t.length;e++)d.add(t[e])}var g=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},b={};function _(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){E[e]=new _(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];E[t]=new _(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){E[e]=new _(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){E[e]=new _(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){E[e]=new _(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){E[e]=new _(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){E[e]=new _(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){E[e]=new _(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){E[e]=new _(e,5,!1,e.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function I(e){return e[1].toUpperCase()}function x(e,t,n,r){var i,s=E.hasOwnProperty(t)?E[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(r)return!1;if(null!==n)return!n.acceptsBooleans;return"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e;default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?(i=t,(!!y.call(b,i)||!y.call(w,i)&&(v.test(i)?b[i]=!0:(w[i]=!0,!1)))&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n))):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(S,I);E[t]=new _(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(S,I);E[t]=new _(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(S,I);E[t]=new _(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){E[e]=new _(e,1,!1,e.toLowerCase(),null,!1,!1)}),E.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){E[e]=new _(e,1,!1,e.toLowerCase(),null,!0,!0)});var T=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),C=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),V=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var U=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var z=Symbol.iterator;function j(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=z&&e[z]||e["@@iterator"])?e:null}var q,$,G,K,Q,H,W,Y,X,J,Z,ee,et,en=Object.assign;function er(e){if(void 0===et)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);et=t&&t[1]||""}return"\n"+et+e}var ei=!1;function es(e,t){if(!e||ei)return"";ei=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o)break}}}finally{ei=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?er(e):""}function ea(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function eo(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function el(e){e._valueTracker||(e._valueTracker=function(e){var t=eo(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function eu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=eo(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ec(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function eh(e,t){var n=t.checked;return en({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ed(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ea(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ef(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function ep(e,t){ef(e,t);var n=ea(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r){e.removeAttribute("value");return}t.hasOwnProperty("value")?eg(e,t.type,n):t.hasOwnProperty("defaultValue")&&eg(e,t.type,ea(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function em(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function eg(e,t,n){("number"!==t||ec(e.ownerDocument)!==e)&&(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ey=Array.isArray;function ev(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(i=0,n=""+ea(n),t=null;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ew(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(h(91));return en({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eb(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(h(92));if(ey(n)){if(1<n.length)throw Error(h(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ea(n)}}function e_(e,t){var n=ea(t.value),r=ea(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function eE(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function eS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eI(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?eS(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ex,eT,ek=(ex=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((eT=eT||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=eT.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ex(e,t,n,r)})}:ex);function eC(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType){n.nodeValue=t;return}}e.textContent=t}var eN={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eD=["Webkit","ms","Moz","O"];function eA(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||eN.hasOwnProperty(e)&&eN[e]?(""+t).trim():t+"px"}function eP(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=eA(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(eN).forEach(function(e){eD.forEach(function(t){eN[t=t+e.charAt(0).toUpperCase()+e.substring(1)]=eN[e]})});var eR=en({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eO(e,t){if(t){if(eR[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(h(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(h(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(h(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(h(62))}}function eL(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eM=null;function eF(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var eB=null,eV=null,eU=null;function ez(e){if(e=rW(e)){if("function"!=typeof eB)throw Error(h(280));var t=e.stateNode;t&&(t=rX(t),eB(e.stateNode,e.type,t))}}function ej(e){eV?eU?eU.push(e):eU=[e]:eV=e}function eq(){if(eV){var e=eV,t=eU;if(eU=eV=null,ez(e),t)for(e=0;e<t.length;e++)ez(t[e])}}function e$(e,t){return e(t)}function eG(){}var eK=!1;function eQ(e,t,n){if(eK)return e(t,n);eK=!0;try{return e$(e,t,n)}finally{eK=!1,(null!==eV||null!==eU)&&(eG(),eq())}}function eH(e,t){var n=e.stateNode;if(null===n)return null;var r=rX(n);if(null===r)return null;switch(n=r[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(h(231,t,typeof n));return n}var eW=!1;if(g)try{var eY={};Object.defineProperty(eY,"passive",{get:function(){eW=!0}}),window.addEventListener("test",eY,eY),window.removeEventListener("test",eY,eY)}catch(e){eW=!1}function eX(e,t,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var eJ=!1,eZ=null,e0=!1,e1=null,e2={onError:function(e){eJ=!0,eZ=e}};function e4(e,t,n,r,i,s,a,o,l){eJ=!1,eZ=null,eX.apply(e2,arguments)}function e6(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function e3(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function e5(e){if(e6(e)!==e)throw Error(h(188))}function e9(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=e6(e)))throw Error(h(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return e5(i),e;if(s===r)return e5(i),t;s=s.sibling}throw Error(h(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(h(189))}}if(n.alternate!==r)throw Error(h(190))}if(3!==n.tag)throw Error(h(188));return n.stateNode.current===n?e:t}(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var n=e(t);if(null!==n)return n;t=t.sibling}return null}(e):null}var e8=c.unstable_scheduleCallback,e7=c.unstable_cancelCallback,te=c.unstable_shouldYield,tt=c.unstable_requestPaint,tn=c.unstable_now,tr=c.unstable_getCurrentPriorityLevel,ti=c.unstable_ImmediatePriority,ts=c.unstable_UserBlockingPriority,ta=c.unstable_NormalPriority,to=c.unstable_LowPriority,tl=c.unstable_IdlePriority,tu=null,tc=null,th=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(td(e)/tf|0)|0},td=Math.log,tf=Math.LN2,tp=64,tm=4194304;function tg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ty(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=tg(o):0!=(s&=a)&&(r=tg(s))}else 0!=(a=n&~i)?r=tg(a):0!==s&&(r=tg(s));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!=(4194240&s)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-th(t)),r|=e[n],t&=~i;return r}function tv(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function tw(){var e=tp;return 0==(4194240&(tp<<=1))&&(tp=64),e}function tb(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function t_(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-th(t)]=n}function tE(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-th(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var tS=0;function tI(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var tx,tT,tk,tC,tN,tD=!1,tA=[],tP=null,tR=null,tO=null,tL=new Map,tM=new Map,tF=[],tB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tV(e,t){switch(e){case"focusin":case"focusout":tP=null;break;case"dragenter":case"dragleave":tR=null;break;case"mouseover":case"mouseout":tO=null;break;case"pointerover":case"pointerout":tL.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tM.delete(t.pointerId)}}function tU(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=rW(t))&&tT(t)):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i)),e}function tz(e){var t=rH(e.target);if(null!==t){var n=e6(t);if(null!==n){if(13===(t=n.tag)){if(null!==(t=e3(n))){e.blockedOn=t,tN(e.priority,function(){tk(n)});return}}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===n.tag?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tj(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=tZ(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=rW(n))&&tT(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);eM=r,n.target.dispatchEvent(r),eM=null,t.shift()}return!0}function tq(e,t,n){tj(e)&&n.delete(t)}function t$(){tD=!1,null!==tP&&tj(tP)&&(tP=null),null!==tR&&tj(tR)&&(tR=null),null!==tO&&tj(tO)&&(tO=null),tL.forEach(tq),tM.forEach(tq)}function tG(e,t){e.blockedOn===t&&(e.blockedOn=null,tD||(tD=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,t$)))}function tK(e){function t(t){return tG(t,e)}if(0<tA.length){tG(tA[0],e);for(var n=1;n<tA.length;n++){var r=tA[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==tP&&tG(tP,e),null!==tR&&tG(tR,e),null!==tO&&tG(tO,e),tL.forEach(t),tM.forEach(t),n=0;n<tF.length;n++)(r=tF[n]).blockedOn===e&&(r.blockedOn=null);for(;0<tF.length&&null===(n=tF[0]).blockedOn;)tz(n),null===n.blockedOn&&tF.shift()}var tQ=T.ReactCurrentBatchConfig,tH=!0;function tW(e,t,n,r){var i=tS,s=tQ.transition;tQ.transition=null;try{tS=1,tX(e,t,n,r)}finally{tS=i,tQ.transition=s}}function tY(e,t,n,r){var i=tS,s=tQ.transition;tQ.transition=null;try{tS=4,tX(e,t,n,r)}finally{tS=i,tQ.transition=s}}function tX(e,t,n,r){if(tH){var i=tZ(e,t,n,r);if(null===i)rb(e,t,r,tJ,n),tV(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return tP=tU(tP,e,t,n,r,i),!0;case"dragenter":return tR=tU(tR,e,t,n,r,i),!0;case"mouseover":return tO=tU(tO,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return tL.set(s,tU(tL.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,tM.set(s,tU(tM.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(tV(e,r),4&t&&-1<tB.indexOf(e)){for(;null!==i;){var s=rW(i);if(null!==s&&tx(s),null===(s=tZ(e,t,n,r))&&rb(e,t,r,tJ,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else rb(e,t,r,null,n)}}var tJ=null;function tZ(e,t,n,r){if(tJ=null,null!==(e=rH(e=eF(r)))){if(null===(t=e6(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=e3(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}return tJ=e,null}function t0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tr()){case ti:return 1;case ts:return 4;case ta:case to:return 16;case tl:return 536870912;default:return 16}default:return 16}}var t1=null,t2=null,t4=null;function t6(){if(t4)return t4;var e,t,n=t2,r=n.length,i="value"in t1?t1.value:t1.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return t4=i.slice(e,1<t?1-t:void 0)}function t3(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function t5(){return!0}function t9(){return!1}function t8(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?t5:t9,this.isPropagationStopped=t9,this}return en(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=t5)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=t5)},persist:function(){},isPersistent:t5}),t}var t7,ne,nt,nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nr=t8(nn),ni=en({},nn,{view:0,detail:0}),ns=t8(ni),na=en({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ny,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nt&&(nt&&"mousemove"===e.type?(t7=e.screenX-nt.screenX,ne=e.screenY-nt.screenY):ne=t7=0,nt=e),t7)},movementY:function(e){return"movementY"in e?e.movementY:ne}}),no=t8(na),nl=t8(en({},na,{dataTransfer:0})),nu=t8(en({},ni,{relatedTarget:0})),nc=t8(en({},nn,{animationName:0,elapsedTime:0,pseudoElement:0})),nh=t8(en({},nn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),nd=t8(en({},nn,{data:0})),nf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},np={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ng(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=nm[e])&&!!t[e]}function ny(){return ng}var nv=t8(en({},ni,{key:function(e){if(e.key){var t=nf[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=t3(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?np[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ny,charCode:function(e){return"keypress"===e.type?t3(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?t3(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),nw=t8(en({},na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),nb=t8(en({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ny})),n_=t8(en({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0})),nE=t8(en({},na,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),nS=[9,13,27,32],nI=g&&"CompositionEvent"in window,nx=null;g&&"documentMode"in document&&(nx=document.documentMode);var nT=g&&"TextEvent"in window&&!nx,nk=g&&(!nI||nx&&8<nx&&11>=nx),nC=!1;function nN(e,t){switch(e){case"keyup":return -1!==nS.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nD(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var nA=!1,nP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!nP[e.type]:"textarea"===t}function nO(e,t,n,r){ej(r),0<(t=rE(t,"onChange")).length&&(n=new nr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var nL=null,nM=null;function nF(e){rp(e,0)}function nB(e){if(eu(rY(e)))return e}function nV(e,t){if("change"===e)return t}var nU=!1;if(g){if(g){var nz="oninput"in document;if(!nz){var nj=document.createElement("div");nj.setAttribute("oninput","return;"),nz="function"==typeof nj.oninput}n=nz}else n=!1;nU=n&&(!document.documentMode||9<document.documentMode)}function nq(){nL&&(nL.detachEvent("onpropertychange",n$),nM=nL=null)}function n$(e){if("value"===e.propertyName&&nB(nM)){var t=[];nO(t,nM,e,eF(e)),eQ(nF,t)}}function nG(e,t,n){"focusin"===e?(nq(),nL=t,nM=n,nL.attachEvent("onpropertychange",n$)):"focusout"===e&&nq()}function nK(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return nB(nM)}function nQ(e,t){if("click"===e)return nB(t)}function nH(e,t){if("input"===e||"change"===e)return nB(t)}var nW="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function nY(e,t){if(nW(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!y.call(t,i)||!nW(e[i],t[i]))return!1}return!0}function nX(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nJ(e,t){var n,r=nX(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nX(r)}}function nZ(){for(var e=window,t=ec();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(n)e=t.contentWindow;else break;t=ec(e.document)}return t}function n0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var n1=g&&"documentMode"in document&&11>=document.documentMode,n2=null,n4=null,n6=null,n3=!1;function n5(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;n3||null==n2||n2!==ec(r)||(r="selectionStart"in(r=n2)&&n0(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},n6&&nY(n6,r)||(n6=r,0<(r=rE(n4,"onSelect")).length&&(t=new nr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=n2)))}function n9(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var n8={animationend:n9("Animation","AnimationEnd"),animationiteration:n9("Animation","AnimationIteration"),animationstart:n9("Animation","AnimationStart"),transitionend:n9("Transition","TransitionEnd")},n7={},re={};function rt(e){if(n7[e])return n7[e];if(!n8[e])return e;var t,n=n8[e];for(t in n)if(n.hasOwnProperty(t)&&t in re)return n7[e]=n[t];return e}g&&(re=document.createElement("div").style,"AnimationEvent"in window||(delete n8.animationend.animation,delete n8.animationiteration.animation,delete n8.animationstart.animation),"TransitionEvent"in window||delete n8.transitionend.transition);var rn=rt("animationend"),rr=rt("animationiteration"),ri=rt("animationstart"),rs=rt("transitionend"),ra=new Map,ro="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rl(e,t){ra.set(e,t),p(t,[e])}for(var ru=0;ru<ro.length;ru++){var rc=ro[ru];rl(rc.toLowerCase(),"on"+(rc[0].toUpperCase()+rc.slice(1)))}rl(rn,"onAnimationEnd"),rl(rr,"onAnimationIteration"),rl(ri,"onAnimationStart"),rl("dblclick","onDoubleClick"),rl("focusin","onFocus"),rl("focusout","onBlur"),rl(rs,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rd=new Set("cancel close invalid load scroll toggle".split(" ").concat(rh));function rf(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,o,l){if(e4.apply(this,arguments),eJ){if(eJ){var u=eZ;eJ=!1,eZ=null}else throw Error(h(198));e0||(e0=!0,e1=u)}}(r,t,void 0,e),e.currentTarget=null}function rp(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;rf(i,o,u),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;rf(i,o,u),s=l}}}if(e0)throw e=e1,e0=!1,e1=null,e}function rm(e,t){var n=t[rG];void 0===n&&(n=t[rG]=new Set);var r=e+"__bubble";n.has(r)||(rw(t,e,2,!1),n.add(r))}function rg(e,t,n){var r=0;t&&(r|=4),rw(n,e,r,t)}var ry="_reactListening"+Math.random().toString(36).slice(2);function rv(e){if(!e[ry]){e[ry]=!0,d.forEach(function(t){"selectionchange"!==t&&(rd.has(t)||rg(t,!1,e),rg(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ry]||(t[ry]=!0,rg("selectionchange",!1,t))}}function rw(e,t,n,r){switch(t0(t)){case 1:var i=tW;break;case 4:i=tY;break;default:i=tX}n=i.bind(null,t,n,e),i=void 0,eW&&("touchstart"===t||"touchmove"===t||"wheel"===t)&&(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function rb(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=rH(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}eQ(function(){var r=s,i=eF(n),a=[];e:{var o=ra.get(e);if(void 0!==o){var l=nr,u=e;switch(e){case"keypress":if(0===t3(n))break e;case"keydown":case"keyup":l=nv;break;case"focusin":u="focus",l=nu;break;case"focusout":u="blur",l=nu;break;case"beforeblur":case"afterblur":l=nu;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=no;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=nl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=nb;break;case rn:case rr:case ri:l=nc;break;case rs:l=n_;break;case"scroll":l=ns;break;case"wheel":l=nE;break;case"copy":case"cut":case"paste":l=nh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=nw}var c=0!=(4&t),h=!c&&"scroll"===e,d=c?null!==o?o+"Capture":null:o;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&null!=(m=eH(p,d))&&c.push(r_(p,m,f))),h)break;p=p.return}0<c.length&&(o=new l(o,u,null,n,i),a.push({event:o,listeners:c}))}}if(0==(7&t)){if(o="mouseover"===e||"pointerover"===e,l="mouseout"===e||"pointerout"===e,!(o&&n!==eM&&(u=n.relatedTarget||n.fromElement)&&(rH(u)||u[r$]))&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,null!==(u=u?rH(u):null)&&(h=e6(u),u!==h||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=no,m="onMouseLeave",d="onMouseEnter",p="mouse",("pointerout"===e||"pointerover"===e)&&(c=nw,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:rY(l),f=null==u?o:rY(u),(o=new c(m,p+"leave",l,n,i)).target=h,o.relatedTarget=f,m=null,rH(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)t:{for(c=l,d=u,p=0,f=c;f;f=rS(f))p++;for(f=0,m=d;m;m=rS(m))f++;for(;0<p-f;)c=rS(c),p--;for(;0<f-p;)d=rS(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break t;c=rS(c),d=rS(d)}c=null}else c=null;null!==l&&rI(a,o,l,c,!1),null!==u&&null!==h&&rI(a,h,u,c,!0)}e:{if("select"===(l=(o=r?rY(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g,y=nV;else if(nR(o)){if(nU)y=nH;else{y=nK;var v=nG}}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(y=nQ);if(y&&(y=y(e,r))){nO(a,y,n,i);break e}v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&eg(o,"number",o.value)}switch(v=r?rY(r):window,e){case"focusin":(nR(v)||"true"===v.contentEditable)&&(n2=v,n4=r,n6=null);break;case"focusout":n6=n4=n2=null;break;case"mousedown":n3=!0;break;case"contextmenu":case"mouseup":case"dragend":n3=!1,n5(a,n,i);break;case"selectionchange":if(n1)break;case"keydown":case"keyup":n5(a,n,i)}if(nI)t:{switch(e){case"compositionstart":var w="onCompositionStart";break t;case"compositionend":w="onCompositionEnd";break t;case"compositionupdate":w="onCompositionUpdate";break t}w=void 0}else nA?nN(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(nk&&"ko"!==n.locale&&(nA||"onCompositionStart"!==w?"onCompositionEnd"===w&&nA&&(g=t6()):(t2="value"in(t1=i)?t1.value:t1.textContent,nA=!0)),0<(v=rE(r,w)).length&&(w=new nd(w,e,null,n,i),a.push({event:w,listeners:v}),g?w.data=g:null!==(g=nD(n))&&(w.data=g))),(g=nT?function(e,t){switch(e){case"compositionend":return nD(t);case"keypress":if(32!==t.which)return null;return nC=!0," ";case"textInput":return" "===(e=t.data)&&nC?null:e;default:return null}}(e,n):function(e,t){if(nA)return"compositionend"===e||!nI&&nN(e,t)?(e=t6(),t4=t2=t1=null,nA=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nk&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=rE(r,"onBeforeInput")).length&&(i=new nd("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=g)}rp(a,t)})}function r_(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rE(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=eH(e,n))&&r.unshift(r_(e,s,i)),null!=(s=eH(e,t))&&r.push(r_(e,s,i))),e=e.return}return r}function rS(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag)return e||null}function rI(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,i?null!=(l=eH(n,s))&&a.unshift(r_(n,l,o)):i||null!=(l=eH(n,s))&&a.push(r_(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var rx=/\r\n?/g,rT=/\u0000|\uFFFD/g;function rk(e){return("string"==typeof e?e:""+e).replace(rx,"\n").replace(rT,"")}function rC(e,t,n){if(t=rk(t),rk(e)!==t&&n)throw Error(h(425))}function rN(){}var rD=null,rA=null;function rP(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rR="function"==typeof setTimeout?setTimeout:void 0,rO="function"==typeof clearTimeout?clearTimeout:void 0,rL="function"==typeof Promise?Promise:void 0,rM="function"==typeof queueMicrotask?queueMicrotask:void 0!==rL?function(e){return rL.resolve(null).then(e).catch(rF)}:rR;function rF(e){setTimeout(function(){throw e})}function rB(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType){if("/$"===(n=i.data)){if(0===r){e.removeChild(i),tK(t);return}r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++}n=i}while(n)tK(t)}function rV(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function rU(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var rz=Math.random().toString(36).slice(2),rj="__reactFiber$"+rz,rq="__reactProps$"+rz,r$="__reactContainer$"+rz,rG="__reactEvents$"+rz,rK="__reactListeners$"+rz,rQ="__reactHandles$"+rz;function rH(e){var t=e[rj];if(t)return t;for(var n=e.parentNode;n;){if(t=n[r$]||n[rj]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=rU(e);null!==e;){if(n=e[rj])return n;e=rU(e)}return t}n=(e=n).parentNode}return null}function rW(e){return(e=e[rj]||e[r$])&&(5===e.tag||6===e.tag||13===e.tag||3===e.tag)?e:null}function rY(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(h(33))}function rX(e){return e[rq]||null}var rJ=[],rZ=-1;function r0(e){return{current:e}}function r1(e){0>rZ||(e.current=rJ[rZ],rJ[rZ]=null,rZ--)}function r2(e,t){rJ[++rZ]=e.current,e.current=t}var r4={},r6=r0(r4),r3=r0(!1),r5=r4;function r9(e,t){var n=e.type.contextTypes;if(!n)return r4;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function r8(e){return null!=(e=e.childContextTypes)}function r7(){r1(r3),r1(r6)}function ie(e,t,n){if(r6.current!==r4)throw Error(h(168));r2(r6,t),r2(r3,n)}function it(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(h(108,function(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function e(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case N:return"Fragment";case C:return"Portal";case A:return"Profiler";case D:return"StrictMode";case M:return"Suspense";case F:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case O:return(t.displayName||"Context")+".Consumer";case P:return(t._context.displayName||"Context")+".Provider";case L:var n=t.render;return(t=t.displayName)||(t=""!==(t=n.displayName||n.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case B:return null!==(n=t.displayName||null)?n:e(t.type)||"Memo";case V:n=t._payload,t=t._init;try{return e(t(n))}catch(e){}}return null}(t);case 8:return t===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}(e)||"Unknown",i));return en({},n,r)}function ir(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||r4,r5=r6.current,r2(r6,e),r2(r3,r3.current),!0}function ii(e,t,n){var r=e.stateNode;if(!r)throw Error(h(169));n?(e=it(e,t,r5),r.__reactInternalMemoizedMergedChildContext=e,r1(r3),r1(r6),r2(r6,e)):r1(r3),r2(r3,n)}var is=null,ia=!1,io=!1;function il(e){null===is?is=[e]:is.push(e)}function iu(){if(!io&&null!==is){io=!0;var e=0,t=tS;try{var n=is;for(tS=1;e<n.length;e++){var r=n[e];do r=r(!0);while(null!==r)}is=null,ia=!1}catch(t){throw null!==is&&(is=is.slice(e+1)),e8(ti,iu),t}finally{tS=t,io=!1}}return null}var ic=[],ih=0,id=null,ip=0,im=[],ig=0,iy=null,iv=1,iw="";function ib(e,t){ic[ih++]=ip,ic[ih++]=id,id=e,ip=t}function i_(e,t,n){im[ig++]=iv,im[ig++]=iw,im[ig++]=iy,iy=e;var r=iv;e=iw;var i=32-th(r)-1;r&=~(1<<i),n+=1;var s=32-th(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,iv=1<<32-th(t)+i|n<<i|r,iw=s+e}else iv=1<<s|n<<i|r,iw=e}function iE(e){null!==e.return&&(ib(e,1),i_(e,1,0))}function iS(e){for(;e===id;)id=ic[--ih],ic[ih]=null,ip=ic[--ih],ic[ih]=null;for(;e===iy;)iy=im[--ig],im[ig]=null,iw=im[--ig],im[ig]=null,iv=im[--ig],im[ig]=null}var iI=null,ix=null,iT=!1,ik=null;function iC(e,t){var n=o9(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function iN(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,iI=e,ix=rV(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,iI=e,ix=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==iy?{id:iv,overflow:iw}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=o9(18,null,null,0)).stateNode=t,n.return=e,e.child=n,iI=e,ix=null,!0);default:return!1}}function iD(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function iA(e){if(iT){var t=ix;if(t){var n=t;if(!iN(e,t)){if(iD(e))throw Error(h(418));t=rV(n.nextSibling);var r=iI;t&&iN(e,t)?iC(r,n):(e.flags=-4097&e.flags|2,iT=!1,iI=e)}}else{if(iD(e))throw Error(h(418));e.flags=-4097&e.flags|2,iT=!1,iI=e}}}function iP(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;iI=e}function iR(e){if(e!==iI)return!1;if(!iT)return iP(e),iT=!0,!1;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rP(e.type,e.memoizedProps)),t&&(t=ix)){if(iD(e))throw iO(),Error(h(418));for(;t;)iC(e,t),t=rV(t.nextSibling)}if(iP(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(h(317));e:{for(t=0,e=e.nextSibling;e;){if(8===e.nodeType){var t,n=e.data;if("/$"===n){if(0===t){ix=rV(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ix=null}}else ix=iI?rV(e.stateNode.nextSibling):null;return!0}function iO(){for(var e=ix;e;)e=rV(e.nextSibling)}function iL(){ix=iI=null,iT=!1}function iM(e){null===ik?ik=[e]:ik.push(e)}var iF=T.ReactCurrentBatchConfig;function iB(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(h(309));var r=n.stateNode}if(!r)throw Error(h(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(h(284));if(!n._owner)throw Error(h(290,e))}return e}function iV(e,t){throw Error(h(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function iU(e){return(0,e._init)(e._payload)}function iz(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=o7(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return(t.index=r,e)?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?(t=lr(n,e.mode,r)).return=e:(t=i(t,n)).return=e,t}function l(e,t,n,r){var s=n.type;return s===N?c(e,t,n.props.children,r,n.key):(null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===V&&iU(s)===t.type)?(r=i(t,n.props)).ref=iB(e,t,n):(r=le(n.type,n.key,n.props,null,e.mode,r)).ref=iB(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=li(n,e.mode,r)).return=e:(t=i(t,n.children||[])).return=e,t}function c(e,t,n,r,s){return null===t||7!==t.tag?(t=lt(n,e.mode,r,s)).return=e:(t=i(t,n)).return=e,t}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=lr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case k:return(n=le(t.type,t.key,t.props,null,e.mode,n)).ref=iB(e,null,t),n.return=e,n;case C:return(t=li(t,e.mode,n)).return=e,t;case V:return d(e,(0,t._init)(t._payload),n)}if(ey(t)||j(t))return(t=lt(t,e.mode,n,null)).return=e,t;iV(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===i?l(e,t,n,r):null;case C:return n.key===i?u(e,t,n,r):null;case V:return f(e,t,(i=n._init)(n._payload),r)}if(ey(n)||j(n))return null!==i?null:c(e,t,n,r,null);iV(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case k:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case V:return p(e,t,n,(0,r._init)(r._payload),i)}if(ey(r)||j(r))return c(t,e=e.get(n)||null,r,i,null);iV(t,r)}return null}return function o(l,u,c,m){if("object"==typeof c&&null!==c&&c.type===N&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case k:e:{for(var g=c.key,y=u;null!==y;){if(y.key===g){if((g=c.type)===N){if(7===y.tag){n(l,y.sibling),(u=i(y,c.props.children)).return=l,l=u;break e}}else if(y.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===V&&iU(g)===y.type){n(l,y.sibling),(u=i(y,c.props)).ref=iB(l,y,c),u.return=l,l=u;break e}n(l,y);break}t(l,y),y=y.sibling}c.type===N?((u=lt(c.props.children,l.mode,m,c.key)).return=l,l=u):((m=le(c.type,c.key,c.props,null,l.mode,m)).ref=iB(l,u,c),m.return=l,l=m)}return a(l);case C:e:{for(y=c.key;null!==u;){if(u.key===y){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(u=i(u,c.children||[])).return=l,l=u;break e}n(l,u);break}t(l,u),u=u.sibling}(u=li(c,l.mode,m)).return=l,l=u}return a(l);case V:return o(l,u,(y=c._init)(c._payload),m)}if(ey(c))return function(i,a,o,l){for(var u=null,c=null,h=a,m=a=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,o[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),a=s(y,a,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===o.length)return n(i,h),iT&&ib(i,m),u;if(null===h){for(;m<o.length;m++)null!==(h=d(i,o[m],l))&&(a=s(h,a,m),null===c?u=h:c.sibling=h,c=h);return iT&&ib(i,m),u}for(h=r(i,h);m<o.length;m++)null!==(g=p(h,i,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=s(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach(function(e){return t(i,e)}),iT&&ib(i,m),u}(l,u,c,m);if(j(c))return function(i,a,o,l){var u=j(o);if("function"!=typeof u)throw Error(h(150));if(null==(o=u.call(o)))throw Error(h(151));for(var c=u=null,m=a,g=a=0,y=null,v=o.next();null!==m&&!v.done;g++,v=o.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,l);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===c?u=w:c.sibling=w,c=w,m=y}if(v.done)return n(i,m),iT&&ib(i,g),u;if(null===m){for(;!v.done;g++,v=o.next())null!==(v=d(i,v.value,l))&&(a=s(v,a,g),null===c?u=v:c.sibling=v,c=v);return iT&&ib(i,g),u}for(m=r(i,m);!v.done;g++,v=o.next())null!==(v=p(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===c?u=v:c.sibling=v,c=v);return e&&m.forEach(function(e){return t(i,e)}),iT&&ib(i,g),u}(l,u,c,m);iV(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(u=i(u,c)).return=l):(n(l,u),(u=lr(c,l.mode,m)).return=l),a(l=u)):n(l,u)}}var ij=iz(!0),iq=iz(!1),i$=r0(null),iG=null,iK=null,iQ=null;function iH(){iQ=iK=iG=null}function iW(e){var t=i$.current;r1(i$),e._currentValue=t}function iY(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function iX(e,t){iG=e,iQ=iK=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ab=!0),e.firstContext=null)}function iJ(e){var t=e._currentValue;if(iQ!==e){if(e={context:e,memoizedValue:t,next:null},null===iK){if(null===iG)throw Error(h(308));iK=e,iG.dependencies={lanes:0,firstContext:e}}else iK=iK.next=e}return t}var iZ=null;function i0(e){null===iZ?iZ=[e]:iZ.push(e)}function i1(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,i0(t)):(n.next=i.next,i.next=n),t.interleaved=n,i2(e,r)}function i2(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var i4=!1;function i6(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function i5(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function i9(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&oo)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,i2(e,n)}return null===(i=r.interleaved)?(t.next=t,i0(r)):(t.next=i.next,i.next=t),r.interleaved=t,i2(e,n)}function i8(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tE(e,n)}}function i7(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n)null===s?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function se(e,t,n,r){var i=e.updateQueue;i4=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?s=u:a.next=u,a=l;var c=e.alternate;null!==c&&(o=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l)}if(null!==s){var h=i.baseState;for(a=0,c=u=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(f,h,d):p))break e;h=en({},h,d);break e;case 2:i4=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do a|=i.lane,i=i.next;while(i!==t)}else null===s&&(i.shared.lanes=0);om|=a,e.lanes=a,e.memoizedState=h}}function st(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(h(191,i));i.call(r)}}}var sn={},sr=r0(sn),si=r0(sn),ss=r0(sn);function sa(e){if(e===sn)throw Error(h(174));return e}function so(e,t){switch(r2(ss,t),r2(si,e),r2(sr,sn),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:eI(null,"");break;default:t=eI(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}r1(sr),r2(sr,t)}function sl(){r1(sr),r1(si),r1(ss)}function su(e){sa(ss.current);var t=sa(sr.current),n=eI(t,e.type);t!==n&&(r2(si,e),r2(sr,n))}function sc(e){si.current===e&&(r1(sr),r1(si))}var sh=r0(0);function sd(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sf=[];function sp(){for(var e=0;e<sf.length;e++)sf[e]._workInProgressVersionPrimary=null;sf.length=0}var sm=T.ReactCurrentDispatcher,sg=T.ReactCurrentBatchConfig,sy=0,sv=null,sw=null,sb=null,s_=!1,sE=!1,sS=0,sI=0;function sx(){throw Error(h(321))}function sT(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nW(e[n],t[n]))return!1;return!0}function sk(e,t,n,r,i,s){if(sy=s,sv=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sm.current=null===e||null===e.memoizedState?ae:at,e=n(r,i),sE){s=0;do{if(sE=!1,sS=0,25<=s)throw Error(h(301));s+=1,sb=sw=null,t.updateQueue=null,sm.current=an,e=n(r,i)}while(sE)}if(sm.current=s7,t=null!==sw&&null!==sw.next,sy=0,sb=sw=sv=null,s_=!1,t)throw Error(h(300));return e}function sC(){var e=0!==sS;return sS=0,e}function sN(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===sb?sv.memoizedState=sb=e:sb=sb.next=e,sb}function sD(){if(null===sw){var e=sv.alternate;e=null!==e?e.memoizedState:null}else e=sw.next;var t=null===sb?sv.memoizedState:sb.next;if(null!==t)sb=t,sw=e;else{if(null===e)throw Error(h(310));e={memoizedState:(sw=e).memoizedState,baseState:sw.baseState,baseQueue:sw.baseQueue,queue:sw.queue,next:null},null===sb?sv.memoizedState=sb=e:sb=sb.next=e}return sb}function sA(e,t){return"function"==typeof t?t(e):t}function sP(e){var t=sD(),n=t.queue;if(null===n)throw Error(h(311));n.lastRenderedReducer=e;var r=sw,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((sy&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(o=l=d,a=r):l=l.next=d,sv.lanes|=c,om|=c}u=u.next}while(null!==u&&u!==s)null===l?a=r:l.next=o,nW(r,t.memoizedState)||(ab=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do s=i.lane,sv.lanes|=s,om|=s,i=i.next;while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function sR(e){var t=sD(),n=t.queue;if(null===n)throw Error(h(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i)nW(s,t.memoizedState)||(ab=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function sO(){}function sL(e,t){var n=sv,r=sD(),i=t(),s=!nW(r.memoizedState,i);if(s&&(r.memoizedState=i,ab=!0),r=r.queue,sQ(sB.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==sb&&1&sb.memoizedState.tag){if(n.flags|=2048,sj(9,sF.bind(null,n,r,i,t),void 0,null),null===ol)throw Error(h(349));0!=(30&sy)||sM(n,t,i)}return i}function sM(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sv.updateQueue)?(t={lastEffect:null,stores:null},sv.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function sF(e,t,n,r){t.value=n,t.getSnapshot=r,sV(t)&&sU(e)}function sB(e,t,n){return n(function(){sV(t)&&sU(e)})}function sV(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nW(e,n)}catch(e){return!0}}function sU(e){var t=i2(e,1);null!==t&&oL(t,e,1,-1)}function sz(e){var t=sN();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sA,lastRenderedState:e},t.queue=e,e=e.dispatch=s3.bind(null,sv,e),[t.memoizedState,e]}function sj(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sv.updateQueue)?(t={lastEffect:null,stores:null},sv.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function sq(){return sD().memoizedState}function s$(e,t,n,r){var i=sN();sv.flags|=e,i.memoizedState=sj(1|t,n,void 0,void 0===r?null:r)}function sG(e,t,n,r){var i=sD();r=void 0===r?null:r;var s=void 0;if(null!==sw){var a=sw.memoizedState;if(s=a.destroy,null!==r&&sT(r,a.deps)){i.memoizedState=sj(t,n,s,r);return}}sv.flags|=e,i.memoizedState=sj(1|t,n,s,r)}function sK(e,t){return s$(8390656,8,e,t)}function sQ(e,t){return sG(2048,8,e,t)}function sH(e,t){return sG(4,2,e,t)}function sW(e,t){return sG(4,4,e,t)}function sY(e,t){return"function"==typeof t?(t(e=e()),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function sX(e,t,n){return n=null!=n?n.concat([e]):null,sG(4,4,sY.bind(null,t,e),n)}function sJ(){}function sZ(e,t){var n=sD();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&sT(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function s0(e,t){var n=sD();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&sT(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function s1(e,t,n){return 0==(21&sy)?(e.baseState&&(e.baseState=!1,ab=!0),e.memoizedState=n):(nW(n,t)||(n=tw(),sv.lanes|=n,om|=n,e.baseState=!0),t)}function s2(e,t){var n=tS;tS=0!==n&&4>n?n:4,e(!0);var r=sg.transition;sg.transition={};try{e(!1),t()}finally{tS=n,sg.transition=r}}function s4(){return sD().memoizedState}function s6(e,t,n){var r=oO(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},s5(e)?s9(t,n):null!==(n=i1(e,t,n,r))&&(oL(n,e,r,oR()),s8(n,t,r))}function s3(e,t,n){var r=oO(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(s5(e))s9(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,nW(o,a)){var l=t.interleaved;null===l?(i.next=i,i0(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch(e){}finally{}null!==(n=i1(e,t,i,r))&&(oL(n,e,r,i=oR()),s8(n,t,r))}}function s5(e){var t=e.alternate;return e===sv||null!==t&&t===sv}function s9(e,t){sE=s_=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function s8(e,t,n){if(0!=(4194240&n)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tE(e,n)}}var s7={readContext:iJ,useCallback:sx,useContext:sx,useEffect:sx,useImperativeHandle:sx,useInsertionEffect:sx,useLayoutEffect:sx,useMemo:sx,useReducer:sx,useRef:sx,useState:sx,useDebugValue:sx,useDeferredValue:sx,useTransition:sx,useMutableSource:sx,useSyncExternalStore:sx,useId:sx,unstable_isNewReconciler:!1},ae={readContext:iJ,useCallback:function(e,t){return sN().memoizedState=[e,void 0===t?null:t],e},useContext:iJ,useEffect:sK,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,s$(4194308,4,sY.bind(null,t,e),n)},useLayoutEffect:function(e,t){return s$(4194308,4,e,t)},useInsertionEffect:function(e,t){return s$(4,2,e,t)},useMemo:function(e,t){var n=sN();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=sN();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=s6.bind(null,sv,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},sN().memoizedState=e},useState:sz,useDebugValue:sJ,useDeferredValue:function(e){return sN().memoizedState=e},useTransition:function(){var e=sz(!1),t=e[0];return e=s2.bind(null,e[1]),sN().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sv,i=sN();if(iT){if(void 0===n)throw Error(h(407));n=n()}else{if(n=t(),null===ol)throw Error(h(349));0!=(30&sy)||sM(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,sK(sB.bind(null,r,s,e),[e]),r.flags|=2048,sj(9,sF.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=sN(),t=ol.identifierPrefix;if(iT){var n=iw,r=iv;t=":"+t+"R"+(n=(r&~(1<<32-th(r)-1)).toString(32)+n),0<(n=sS++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=sI++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},at={readContext:iJ,useCallback:sZ,useContext:iJ,useEffect:sQ,useImperativeHandle:sX,useInsertionEffect:sH,useLayoutEffect:sW,useMemo:s0,useReducer:sP,useRef:sq,useState:function(){return sP(sA)},useDebugValue:sJ,useDeferredValue:function(e){return s1(sD(),sw.memoizedState,e)},useTransition:function(){return[sP(sA)[0],sD().memoizedState]},useMutableSource:sO,useSyncExternalStore:sL,useId:s4,unstable_isNewReconciler:!1},an={readContext:iJ,useCallback:sZ,useContext:iJ,useEffect:sQ,useImperativeHandle:sX,useInsertionEffect:sH,useLayoutEffect:sW,useMemo:s0,useReducer:sR,useRef:sq,useState:function(){return sR(sA)},useDebugValue:sJ,useDeferredValue:function(e){var t=sD();return null===sw?t.memoizedState=e:s1(t,sw.memoizedState,e)},useTransition:function(){return[sR(sA)[0],sD().memoizedState]},useMutableSource:sO,useSyncExternalStore:sL,useId:s4,unstable_isNewReconciler:!1};function ar(e,t){if(e&&e.defaultProps)for(var n in t=en({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}function ai(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:en({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var as={isMounted:function(e){return!!(e=e._reactInternals)&&e6(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=oR(),i=oO(e),s=i5(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=i9(e,s,i))&&(oL(t,e,i,r),i8(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=oR(),i=oO(e),s=i5(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=i9(e,s,i))&&(oL(t,e,i,r),i8(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=oR(),r=oO(e),i=i5(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=i9(e,i,r))&&(oL(t,e,r,n),i8(t,e,r))}};function aa(e,t,n,r,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||!nY(n,r)||!nY(i,s)}function ao(e,t,n){var r=!1,i=r4,s=t.contextType;return"object"==typeof s&&null!==s?s=iJ(s):(i=r8(t)?r5:r6.current,s=(r=null!=(r=t.contextTypes))?r9(e,i):r4),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=as,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function al(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&as.enqueueReplaceState(t,t.state,null)}function au(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},i6(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=iJ(s):(s=r8(t)?r5:r6.current,i.context=r9(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(ai(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&as.enqueueReplaceState(i,i.state,null),se(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function ac(e,t){try{var n="",r=t;do n+=function(e){switch(e.tag){case 5:return er(e.type);case 16:return er("Lazy");case 13:return er("Suspense");case 19:return er("SuspenseList");case 0:case 2:case 15:return e=es(e.type,!1);case 11:return e=es(e.type.render,!1);case 1:return e=es(e.type,!0);default:return""}}(r),r=r.return;while(r)var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function ah(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ad(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var af="function"==typeof WeakMap?WeakMap:Map;function ap(e,t,n){(n=i5(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){oS||(oS=!0,oI=r),ad(e,t)},n}function am(e,t,n){(n=i5(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ad(e,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){ad(e,t),"function"!=typeof r&&(null===ox?ox=new Set([this]):ox.add(this));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}function ag(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new af;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=o2.bind(null,e,t,n),t.then(e,e))}function ay(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e)return null}function av(e,t,n,r,i){return 0==(1&e.mode)?e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=i5(-1,1)).tag=2,i9(n,t,1))),n.lanes|=1):(e.flags|=65536,e.lanes=i),e}var aw=T.ReactCurrentOwner,ab=!1;function a_(e,t,n,r){t.child=null===e?iq(t,null,n,r):ij(t,e.child,n,r)}function aE(e,t,n,r,i){n=n.render;var s=t.ref;return(iX(t,i),r=sk(e,t,n,r,s,i),n=sC(),null===e||ab)?(iT&&n&&iE(t),t.flags|=1,a_(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,az(e,t,i))}function aS(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||o8(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=le(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,aI(e,t,s,r,i))}if(s=e.child,0==(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:nY)(a,r)&&e.ref===t.ref)return az(e,t,i)}return t.flags|=1,(e=o7(s,r)).ref=t.ref,e.return=t,t.child=e}function aI(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(nY(s,r)&&e.ref===t.ref){if(ab=!1,t.pendingProps=r=s,0==(e.lanes&i))return t.lanes=e.lanes,az(e,t,i);0!=(131072&e.flags)&&(ab=!0)}}return ak(e,t,n,r,i)}function ax(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r2(od,oh),oh|=n;else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,r2(od,oh),oh|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,r2(od,oh),oh|=r}}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,r2(od,oh),oh|=r;return a_(e,t,i,n),t.child}function aT(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ak(e,t,n,r,i){var s=r8(n)?r5:r6.current;return(s=r9(t,s),iX(t,i),n=sk(e,t,n,r,s,i),r=sC(),null===e||ab)?(iT&&r&&iE(t),t.flags|=1,a_(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,az(e,t,i))}function aC(e,t,n,r,i){if(r8(n)){var s=!0;ir(t)}else s=!1;if(iX(t,i),null===t.stateNode)aU(e,t),ao(t,n,r),au(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;u="object"==typeof u&&null!==u?iJ(u):r9(t,u=r8(n)?r5:r6.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||l!==u)&&al(t,a,r,u),i4=!1;var d=t.memoizedState;a.state=d,se(t,r,a,i),l=t.memoizedState,o!==r||d!==l||r3.current||i4?("function"==typeof c&&(ai(t,n,c,r),l=t.memoizedState),(o=i4||aa(t,n,o,r,d,l,u))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,i3(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:ar(t.type,o),a.props=u,h=t.pendingProps,d=a.context,l="object"==typeof(l=n.contextType)&&null!==l?iJ(l):r9(t,l=r8(n)?r5:r6.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==h||d!==l)&&al(t,a,r,l),i4=!1,d=t.memoizedState,a.state=d,se(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||r3.current||i4?("function"==typeof f&&(ai(t,n,f,r),p=t.memoizedState),(u=i4||aa(t,n,u,r,d,p,l)||!1)?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return aN(e,t,n,r,s,i)}function aN(e,t,n,r,i,s){aT(e,t);var a=0!=(128&t.flags);if(!r&&!a)return i&&ii(t,n,!1),az(e,t,s);r=t.stateNode,aw.current=t;var o=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ij(t,e.child,null,s),t.child=ij(t,null,o,s)):a_(e,t,o,s),t.memoizedState=r.state,i&&ii(t,n,!0),t.child}function aD(e){var t=e.stateNode;t.pendingContext?ie(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ie(e,t.context,!1),so(e,t.containerInfo)}function aA(e,t,n,r,i){return iL(),iM(i),t.flags|=256,a_(e,t,n,r),t.child}var aP={dehydrated:null,treeContext:null,retryLane:0};function aR(e){return{baseLanes:e,cachePool:null,transitions:null}}function aO(e,t,n){var r,i=t.pendingProps,s=sh.current,a=!1,o=0!=(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!=(2&s)),r?(a=!0,t.flags&=-129):(null===e||null!==e.memoizedState)&&(s|=1),r2(sh,1&s),null===e)return(iA(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated))?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,a?(i=t.mode,a=t.child,o={mode:"hidden",children:o},0==(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=o):a=ln(o,i,0,null),e=lt(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=aR(n),t.memoizedState=aP,e):aL(t,o));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,aM(e,t,a,r=ah(Error(h(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=ln({mode:"visible",children:r.children},i,0,null),s=lt(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!=(1&t.mode)&&ij(t,e.child,null,a),t.child.memoizedState=aR(a),t.memoizedState=aP,s);if(0==(1&t.mode))return aM(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var o=r.dgst;return r=o,aM(e,t,a,r=ah(s=Error(h(419)),r,void 0))}if(o=0!=(a&e.childLanes),ab||o){if(null!==(r=ol)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,i2(e,i),oL(r,e,i,-1))}return oH(),aM(e,t,a,r=ah(Error(h(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=o6.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ix=rV(i.nextSibling),iI=t,iT=!0,ik=null,null!==e&&(im[ig++]=iv,im[ig++]=iw,im[ig++]=iy,iv=e.id,iw=e.overflow,iy=t),t=aL(t,r.children),t.flags|=4096,t)}(e,t,o,i,r,s,n);if(a){a=i.fallback,o=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 0==(1&o)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=o7(s,l)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=o7(r,a):(a=lt(a,o,n,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,o=null===(o=e.child.memoizedState)?aR(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=aP,i}return e=(a=e.child).sibling,i=o7(a,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function aL(e,t){return(t=ln({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function aM(e,t,n,r){return null!==r&&iM(r),ij(t,e.child,null,n),e=aL(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function aF(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),iY(e.return,t,n)}function aB(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function aV(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(a_(e,t,r.children,n),0!=(2&(r=sh.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&aF(e,n,t);else if(19===e.tag)aF(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(r2(sh,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(i=null,n=t.child;null!==n;)null!==(e=n.alternate)&&null===sd(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),aB(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===sd(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}aB(t,!0,n,null,s);break;case"together":aB(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function aU(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function az(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),om|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(h(153));if(null!==t.child){for(n=o7(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=o7(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aj(e,t){if(!iT)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function aq(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}i=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},s=function(){},a=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,sa(sr.current);var s,a=null;switch(n){case"input":i=eh(e,i),r=eh(e,r),a=[];break;case"select":i=en({},i,{value:void 0}),r=en({},r,{value:void 0}),a=[];break;case"textarea":i=ew(e,i),r=ew(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=rN)}for(u in eO(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u]){if("style"===u){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(f.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null))}for(u in r){var l=r[u];if(o=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(null!=l||null!=o)){if("style"===u){if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l}else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(f.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&rm("scroll",e),a||o===l||(a=[])):(a=a||[]).push(u,l))}}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},o=function(e,t,n,r){n!==r&&(t.flags|=4)};var a$=!1,aG=!1,aK="function"==typeof WeakSet?WeakSet:Set,aQ=null;function aH(e,t){var n=e.ref;if(null!==n){if("function"==typeof n)try{n(null)}catch(n){o1(e,t,n)}else n.current=null}}function aW(e,t,n){try{n()}catch(n){o1(e,t,n)}}var aY=!1;function aX(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&aW(t,n,s)}i=i.next}while(i!==r)}}function aJ(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function aZ(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function a0(e){return 5===e.tag||3===e.tag||4===e.tag}function a1(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||a0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}var a2=null,a4=!1;function a6(e,t,n){for(n=n.child;null!==n;)a3(e,t,n),n=n.sibling}function a3(e,t,n){if(tc&&"function"==typeof tc.onCommitFiberUnmount)try{tc.onCommitFiberUnmount(tu,n)}catch(e){}switch(n.tag){case 5:aG||aH(n,t);case 6:var r=a2,i=a4;a2=null,a6(e,t,n),a2=r,a4=i,null!==a2&&(a4?(e=a2,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):a2.removeChild(n.stateNode));break;case 18:null!==a2&&(a4?(e=a2,n=n.stateNode,8===e.nodeType?rB(e.parentNode,n):1===e.nodeType&&rB(e,n),tK(e)):rB(a2,n.stateNode));break;case 4:r=a2,i=a4,a2=n.stateNode.containerInfo,a4=!0,a6(e,t,n),a2=r,a4=i;break;case 0:case 11:case 14:case 15:if(!aG&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!=(2&s)?aW(n,t,a):0!=(4&s)&&aW(n,t,a)),i=i.next}while(i!==r)}a6(e,t,n);break;case 1:if(!aG&&(aH(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){o1(n,t,e)}a6(e,t,n);break;case 21:default:a6(e,t,n);break;case 22:1&n.mode?(aG=(r=aG)||null!==n.memoizedState,a6(e,t,n),aG=r):a6(e,t,n)}}function a5(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new aK),t.forEach(function(t){var r=o3.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function a9(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=s;e:for(;null!==a;){switch(a.tag){case 5:a2=a.stateNode,a4=!1;break e;case 3:case 4:a2=a.stateNode.containerInfo,a4=!0;break e}a=a.return}if(null===a2)throw Error(h(160));a3(e,s,i),a2=null,a4=!1;var o=i.alternate;null!==o&&(o.return=null),i.return=null}catch(e){o1(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)a8(t,e),t=t.sibling}function a8(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(a9(t,e),a7(e),4&r){try{aX(3,e,e.return),aJ(3,e)}catch(t){o1(e,e.return,t)}try{aX(5,e,e.return)}catch(t){o1(e,e.return,t)}}break;case 1:a9(t,e),a7(e),512&r&&null!==n&&aH(n,n.return);break;case 5:if(a9(t,e),a7(e),512&r&&null!==n&&aH(n,n.return),32&e.flags){var i=e.stateNode;try{eC(i,"")}catch(t){o1(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===s.type&&null!=s.name&&ef(i,s),eL(o,a);var u=eL(o,s);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];"style"===c?eP(i,d):"dangerouslySetInnerHTML"===c?ek(i,d):"children"===c?eC(i,d):x(i,c,d,u)}switch(o){case"input":ep(i,s);break;case"textarea":e_(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ev(i,!!s.multiple,p,!1):!!s.multiple!==f&&(null!=s.defaultValue?ev(i,!!s.multiple,s.defaultValue,!0):ev(i,!!s.multiple,s.multiple?[]:"",!1))}i[rq]=s}catch(t){o1(e,e.return,t)}}break;case 6:if(a9(t,e),a7(e),4&r){if(null===e.stateNode)throw Error(h(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(t){o1(e,e.return,t)}}break;case 3:if(a9(t,e),a7(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{tK(t.containerInfo)}catch(t){o1(e,e.return,t)}break;case 4:default:a9(t,e),a7(e);break;case 13:a9(t,e),a7(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,s&&(null===i.alternate||null===i.alternate.memoizedState)&&(ob=tn())),4&r&&a5(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?(aG=(u=aG)||c,a9(t,e),aG=u):a9(t,e),a7(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!c&&0!=(1&e.mode))for(aQ=e,c=e.child;null!==c;){for(d=aQ=c;null!==aQ;){switch(p=(f=aQ).child,f.tag){case 0:case 11:case 14:case 15:aX(4,f,f.return);break;case 1:aH(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){o1(r,n,e)}}break;case 5:aH(f,f.return);break;case 22:if(null!==f.memoizedState){ot(d);continue}}null!==p?(p.return=f,aQ=p):ot(d)}c=c.sibling}e:for(c=null,d=e;;){if(5===d.tag){if(null===c){c=d;try{i=d.stateNode,u?(s=i.style,"function"==typeof s.setProperty?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,a=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=eA("display",a))}catch(t){o1(e,e.return,t)}}}else if(6===d.tag){if(null===c)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(t){o1(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:a9(t,e),a7(e),4&r&&a5(e);case 21:}}function a7(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(a0(n)){var r=n;break e}n=n.return}throw Error(h(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(eC(i,""),r.flags&=-33);var s=a1(e);!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=a1(e);!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!=(r=r._reactRootContainer)||null!==n.onclick||(n.onclick=rN));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,o,a);break;default:throw Error(h(161))}}catch(t){o1(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function oe(e){for(;null!==aQ;){var t=aQ;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:aG||aJ(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!aG){if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ar(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}}var s=t.updateQueue;null!==s&&st(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}st(t,a,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var d=c.dehydrated;null!==d&&tK(d)}}}break;default:throw Error(h(163))}aG||512&t.flags&&aZ(t)}catch(e){o1(t,t.return,e)}}if(t===e){aQ=null;break}if(null!==(n=t.sibling)){n.return=t.return,aQ=n;break}aQ=t.return}}function ot(e){for(;null!==aQ;){var t=aQ;if(t===e){aQ=null;break}var n=t.sibling;if(null!==n){n.return=t.return,aQ=n;break}aQ=t.return}}function on(e){for(;null!==aQ;){var t=aQ;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{aJ(4,t)}catch(e){o1(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){o1(t,i,e)}}var s=t.return;try{aZ(t)}catch(e){o1(t,s,e)}break;case 5:var a=t.return;try{aZ(t)}catch(e){o1(t,a,e)}}}catch(e){o1(t,t.return,e)}if(t===e){aQ=null;break}var o=t.sibling;if(null!==o){o.return=t.return,aQ=o;break}aQ=t.return}}var or=Math.ceil,oi=T.ReactCurrentDispatcher,os=T.ReactCurrentOwner,oa=T.ReactCurrentBatchConfig,oo=0,ol=null,ou=null,oc=0,oh=0,od=r0(0),of=0,op=null,om=0,og=0,oy=0,ov=null,ow=null,ob=0,o_=1/0,oE=null,oS=!1,oI=null,ox=null,oT=!1,ok=null,oC=0,oN=0,oD=null,oA=-1,oP=0;function oR(){return 0!=(6&oo)?tn():-1!==oA?oA:oA=tn()}function oO(e){return 0==(1&e.mode)?1:0!=(2&oo)&&0!==oc?oc&-oc:null!==iF.transition?(0===oP&&(oP=tw()),oP):0!==(e=tS)?e:e=void 0===(e=window.event)?16:t0(e.type)}function oL(e,t,n,r){if(50<oN)throw oN=0,oD=null,Error(h(185));t_(e,n,r),(0==(2&oo)||e!==ol)&&(e===ol&&(0==(2&oo)&&(og|=n),4===of&&oU(e,oc)),oM(e,r),1===n&&0===oo&&0==(1&t.mode)&&(o_=tn()+500,ia&&iu()))}function oM(e,t){var n,r=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-th(s),o=1<<a,l=i[a];-1===l?(0==(o&n)||0!=(o&r))&&(i[a]=function(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=ty(e,e===ol?oc:0);if(0===i)null!==r&&e7(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=r&&e7(r),1===t)0===e.tag?(n=oz.bind(null,e),ia=!0,il(n)):il(oz.bind(null,e)),rM(function(){0==(6&oo)&&iu()}),r=null;else{switch(tI(i)){case 1:r=ti;break;case 4:r=ts;break;case 16:default:r=ta;break;case 536870912:r=tl}r=e8(r,oF.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function oF(e,t){if(oA=-1,oP=0,0!=(6&oo))throw Error(h(327));var n=e.callbackNode;if(oZ()&&e.callbackNode!==n)return null;var r=ty(e,e===ol?oc:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=oW(e,r);else{t=r;var i=oo;oo|=2;var s=oQ();for((ol!==e||oc!==t)&&(oE=null,o_=tn()+500,oG(e,t));;)try{(function(){for(;null!==ou&&!te();)oY(ou)})();break}catch(t){oK(e,t)}iH(),oi.current=s,oo=i,null!==ou?t=0:(ol=null,oc=0,t=of)}if(0!==t){if(2===t&&0!==(i=tv(e))&&(r=i,t=oB(e,i)),1===t)throw n=op,oG(e,0),oU(e,r),oM(e,tn()),n;if(6===t)oU(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!nW(s(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=oW(e,r))&&0!==(s=tv(e))&&(r=s,t=oB(e,s)),1===t))throw n=op,oG(e,0),oU(e,r),oM(e,tn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(h(345));case 2:case 5:oJ(e,ow,oE);break;case 3:if(oU(e,r),(130023424&r)===r&&10<(t=ob+500-tn())){if(0!==ty(e,0))break;if(((i=e.suspendedLanes)&r)!==r){oR(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=rR(oJ.bind(null,e,ow,oE),t);break}oJ(e,ow,oE);break;case 4:if(oU(e,r),(4194240&r)===r)break;for(i=-1,t=e.eventTimes;0<r;){var a=31-th(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=tn()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*or(r/1960))-r)){e.timeoutHandle=rR(oJ.bind(null,e,ow,oE),r);break}oJ(e,ow,oE);break;default:throw Error(h(329))}}}return oM(e,tn()),e.callbackNode===n?oF.bind(null,e):null}function oB(e,t){var n=ov;return e.current.memoizedState.isDehydrated&&(oG(e,t).flags|=256),2!==(e=oW(e,t))&&(t=ow,ow=n,null!==t&&oV(t)),e}function oV(e){null===ow?ow=e:ow.push.apply(ow,e)}function oU(e,t){for(t&=~oy,t&=~og,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-th(t),r=1<<n;e[n]=-1,t&=~r}}function oz(e){if(0!=(6&oo))throw Error(h(327));oZ();var t=ty(e,0);if(0==(1&t))return oM(e,tn()),null;var n=oW(e,t);if(0!==e.tag&&2===n){var r=tv(e);0!==r&&(t=r,n=oB(e,r))}if(1===n)throw n=op,oG(e,0),oU(e,t),oM(e,tn()),n;if(6===n)throw Error(h(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,oJ(e,ow,oE),oM(e,tn()),null}function oj(e,t){var n=oo;oo|=1;try{return e(t)}finally{0===(oo=n)&&(o_=tn()+500,ia&&iu())}}function oq(e){null!==ok&&0===ok.tag&&0==(6&oo)&&oZ();var t=oo;oo|=1;var n=oa.transition,r=tS;try{if(oa.transition=null,tS=1,e)return e()}finally{tS=r,oa.transition=n,0==(6&(oo=t))&&iu()}}function o$(){oh=od.current,r1(od)}function oG(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rO(n)),null!==ou)for(n=ou.return;null!==n;){var r=n;switch(iS(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&r7();break;case 3:sl(),r1(r3),r1(r6),sp();break;case 5:sc(r);break;case 4:sl();break;case 13:case 19:r1(sh);break;case 10:iW(r.type._context);break;case 22:case 23:o$()}n=n.return}if(ol=e,ou=e=o7(e.current,null),oc=oh=t,of=0,op=null,oy=og=om=0,ow=ov=null,null!==iZ){for(t=0;t<iZ.length;t++)if(null!==(r=(n=iZ[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}iZ=null}return e}function oK(e,t){for(;;){var n=ou;try{if(iH(),sm.current=s7,s_){for(var r=sv.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}s_=!1}if(sy=0,sb=sw=sv=null,sE=!1,sS=0,os.current=null,null===n||null===n.return){of=1,op=t,ou=null;break}e:{var s=e,a=n.return,o=n,l=t;if(t=oc,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,c=o,d=c.tag;if(0==(1&c.mode)&&(0===d||11===d||15===d)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=ay(a);if(null!==p){p.flags&=-257,av(p,a,o,s,t),1&p.mode&&ag(s,u,t),t=p,l=u;var m=t.updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0==(1&t)){ag(s,u,t),oH();break e}l=Error(h(426))}else if(iT&&1&o.mode){var y=ay(a);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),av(y,a,o,s,t),iM(ac(l,o));break e}}s=l=ac(l,o),4!==of&&(of=2),null===ov?ov=[s]:ov.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=ap(s,l,t);i7(s,v);break e;case 1:o=l;var w=s.type,b=s.stateNode;if(0==(128&s.flags)&&("function"==typeof w.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===ox||!ox.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var _=am(s,o,t);i7(s,_);break e}}s=s.return}while(null!==s)}oX(n)}catch(e){t=e,ou===n&&null!==n&&(ou=n=n.return);continue}break}}function oQ(){var e=oi.current;return oi.current=s7,null===e?s7:e}function oH(){(0===of||3===of||2===of)&&(of=4),null===ol||0==(268435455&om)&&0==(268435455&og)||oU(ol,oc)}function oW(e,t){var n=oo;oo|=2;var r=oQ();for((ol!==e||oc!==t)&&(oE=null,oG(e,t));;)try{(function(){for(;null!==ou;)oY(ou)})();break}catch(t){oK(e,t)}if(iH(),oo=n,oi.current=r,null!==ou)throw Error(h(261));return ol=null,oc=0,of}function oY(e){var t=l(e.alternate,e,oh);e.memoizedProps=e.pendingProps,null===t?oX(e):ou=t,os.current=null}function oX(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=function(e,t,n){var r=t.pendingProps;switch(iS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return aq(t),null;case 1:case 17:return r8(t.type)&&r7(),aq(t),null;case 3:return r=t.stateNode,sl(),r1(r3),r1(r6),sp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(null===e||null===e.child)&&(iR(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==ik&&(oV(ik),ik=null))),s(e,t),aq(t),null;case 5:sc(t);var l=sa(ss.current);if(n=t.type,null!==e&&null!=t.stateNode)a(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(h(166));return aq(t),null}if(e=sa(sr.current),iR(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[rj]=t,r[rq]=u,e=0!=(1&t.mode),n){case"dialog":rm("cancel",r),rm("close",r);break;case"iframe":case"object":case"embed":rm("load",r);break;case"video":case"audio":for(l=0;l<rh.length;l++)rm(rh[l],r);break;case"source":rm("error",r);break;case"img":case"image":case"link":rm("error",r),rm("load",r);break;case"details":rm("toggle",r);break;case"input":ed(r,u),rm("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},rm("invalid",r);break;case"textarea":eb(r,u),rm("invalid",r)}for(var c in eO(n,u),l=null,u)if(u.hasOwnProperty(c)){var d=u[c];"children"===c?"string"==typeof d?r.textContent!==d&&(!0!==u.suppressHydrationWarning&&rC(r.textContent,d,e),l=["children",d]):"number"==typeof d&&r.textContent!==""+d&&(!0!==u.suppressHydrationWarning&&rC(r.textContent,d,e),l=["children",""+d]):f.hasOwnProperty(c)&&null!=d&&"onScroll"===c&&rm("scroll",r)}switch(n){case"input":el(r),em(r,u,!0);break;case"textarea":el(r),eE(r);break;case"select":case"option":break;default:"function"==typeof u.onClick&&(r.onclick=rN)}r=l,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===l.nodeType?l:l.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=eS(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script></script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[rj]=t,e[rq]=r,i(e,t,!1,!1),t.stateNode=e;e:{switch(c=eL(n,r),n){case"dialog":rm("cancel",e),rm("close",e),l=r;break;case"iframe":case"object":case"embed":rm("load",e),l=r;break;case"video":case"audio":for(l=0;l<rh.length;l++)rm(rh[l],e);l=r;break;case"source":rm("error",e),l=r;break;case"img":case"image":case"link":rm("error",e),rm("load",e),l=r;break;case"details":rm("toggle",e),l=r;break;case"input":ed(e,r),l=eh(e,r),rm("invalid",e);break;case"option":default:l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=en({},r,{value:void 0}),rm("invalid",e);break;case"textarea":eb(e,r),l=ew(e,r),rm("invalid",e)}for(u in eO(n,l),d=l)if(d.hasOwnProperty(u)){var p=d[u];"style"===u?eP(e,p):"dangerouslySetInnerHTML"===u?null!=(p=p?p.__html:void 0)&&ek(e,p):"children"===u?"string"==typeof p?("textarea"!==n||""!==p)&&eC(e,p):"number"==typeof p&&eC(e,""+p):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(f.hasOwnProperty(u)?null!=p&&"onScroll"===u&&rm("scroll",e):null!=p&&x(e,u,p,c))}switch(n){case"input":el(e),em(e,r,!1);break;case"textarea":el(e),eE(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ea(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?ev(e,!!r.multiple,u,!1):null!=r.defaultValue&&ev(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof l.onClick&&(e.onclick=rN)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return aq(t),null;case 6:if(e&&null!=t.stateNode)o(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(h(166));if(n=sa(ss.current),sa(sr.current),iR(t)){if(r=t.stateNode,n=t.memoizedProps,r[rj]=t,(u=r.nodeValue!==n)&&null!==(e=iI))switch(e.tag){case 3:rC(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&rC(r.nodeValue,n,0!=(1&e.mode))}u&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[rj]=t,t.stateNode=r}return aq(t),null;case 13:if(r1(sh),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(iT&&null!==ix&&0!=(1&t.mode)&&0==(128&t.flags))iO(),iL(),t.flags|=98560,u=!1;else if(u=iR(t),null!==r&&null!==r.dehydrated){if(null===e){if(!u)throw Error(h(318));if(!(u=null!==(u=t.memoizedState)?u.dehydrated:null))throw Error(h(317));u[rj]=t}else iL(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;aq(t),u=!1}else null!==ik&&(oV(ik),ik=null),u=!0;if(!u)return 65536&t.flags?t:null}if(0!=(128&t.flags))return t.lanes=n,t;return(r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&sh.current)?0===of&&(of=3):oH())),null!==t.updateQueue&&(t.flags|=4),aq(t),null;case 4:return sl(),s(e,t),null===e&&rv(t.stateNode.containerInfo),aq(t),null;case 10:return iW(t.type._context),aq(t),null;case 19:if(r1(sh),null===(u=t.memoizedState))return aq(t),null;if(r=0!=(128&t.flags),null===(c=u.rendering)){if(r)aj(u,!1);else{if(0!==of||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=sd(e))){for(t.flags|=128,aj(u,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)u=n,e=r,u.flags&=14680066,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return r2(sh,1&sh.current|2),t.child}e=e.sibling}null!==u.tail&&tn()>o_&&(t.flags|=128,r=!0,aj(u,!1),t.lanes=4194304)}}else{if(!r){if(null!==(e=sd(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),aj(u,!0),null===u.tail&&"hidden"===u.tailMode&&!c.alternate&&!iT)return aq(t),null}else 2*tn()-u.renderingStartTime>o_&&1073741824!==n&&(t.flags|=128,r=!0,aj(u,!1),t.lanes=4194304)}u.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=u.last)?n.sibling=c:t.child=c,u.last=c)}if(null!==u.tail)return t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=tn(),t.sibling=null,n=sh.current,r2(sh,r?1&n|2:1&n),t;return aq(t),null;case 22:case 23:return o$(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&oh)&&(aq(t),6&t.subtreeFlags&&(t.flags|=8192)):aq(t),null;case 24:case 25:return null}throw Error(h(156,t.tag))}(n,t,oh))){ou=n;return}}else{if(null!==(n=function(e,t){switch(iS(t),t.tag){case 1:return r8(t.type)&&r7(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return sl(),r1(r3),r1(r6),sp(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sc(t),null;case 13:if(r1(sh),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(h(340));iL()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return r1(sh),null;case 4:return sl(),null;case 10:return iW(t.type._context),null;case 22:case 23:return o$(),null;default:return null}}(n,t))){n.flags&=32767,ou=n;return}if(null!==e)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{of=6,ou=null;return}}if(null!==(t=t.sibling)){ou=t;return}ou=t=e}while(null!==t)0===of&&(of=5)}function oJ(e,t,n){var r=tS,i=oa.transition;try{oa.transition=null,tS=1,function(e,t,n,r){do oZ();while(null!==ok)if(0!=(6&oo))throw Error(h(327));n=e.finishedWork;var i=e.finishedLanes;if(null!==n){if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(h(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-th(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,s),e===ol&&(ou=ol=null,oc=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||oT||(oT=!0,a=ta,o=function(){return oZ(),null},e8(a,o)),s=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||s){s=oa.transition,oa.transition=null;var a,o,l,u,c,d=tS;tS=1;var f=oo;oo|=4,os.current=null,function(e,t){if(rD=tH,n0(e=nZ())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i,s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(e){n=null;break e}var o=0,l=-1,u=-1,c=0,d=0,f=e,p=null;t:for(;;){for(;f!==n||0!==s&&3!==f.nodeType||(l=o+s),f!==a||0!==r&&3!==f.nodeType||(u=o+r),3===f.nodeType&&(o+=f.nodeValue.length),null!==(i=f.firstChild);)p=f,f=i;for(;;){if(f===e)break t;if(p===n&&++c===s&&(l=o),p===a&&++d===r&&(u=o),null!==(i=f.nextSibling))break;p=(f=p).parentNode}f=i}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(rA={focusedElem:e,selectionRange:n},tH=!1,aQ=t;null!==aQ;)if(e=(t=aQ).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,aQ=e;else for(;null!==aQ;){t=aQ;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ar(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(h(163))}}catch(e){o1(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,aQ=e;break}aQ=t.return}m=aY,aY=!1}(e,n),a8(n,e),function(e){var t=nZ(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!!t&&!!n&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&n0(n)){if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=nJ(n,s);var a=nJ(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}(rA),tH=!!rD,rA=rD=null,e.current=n,l=n,u=e,c=i,aQ=l,function e(t,n,r){for(var i=0!=(1&t.mode);null!==aQ;){var s=aQ,a=s.child;if(22===s.tag&&i){var o=null!==s.memoizedState||a$;if(!o){var l=s.alternate,u=null!==l&&null!==l.memoizedState||aG;l=a$;var c=aG;if(a$=o,(aG=u)&&!c)for(aQ=s;null!==aQ;)u=(o=aQ).child,22===o.tag&&null!==o.memoizedState?on(s):null!==u?(u.return=o,aQ=u):on(s);for(;null!==a;)aQ=a,e(a,n,r),a=a.sibling;aQ=s,a$=l,aG=c}oe(t,n,r)}else 0!=(8772&s.subtreeFlags)&&null!==a?(a.return=s,aQ=a):oe(t,n,r)}}(l,u,c),tt(),oo=f,tS=d,oa.transition=s}else e.current=n;if(oT&&(oT=!1,ok=e,oC=i),0===(s=e.pendingLanes)&&(ox=null),function(e){if(tc&&"function"==typeof tc.onCommitFiberRoot)try{tc.onCommitFiberRoot(tu,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode,r),oM(e,tn()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(oS)throw oS=!1,e=oI,oI=null,e;0!=(1&oC)&&0!==e.tag&&oZ(),0!=(1&(s=e.pendingLanes))?e===oD?oN++:(oN=0,oD=e):oN=0,iu()}}(e,t,n,r)}finally{oa.transition=i,tS=r}return null}function oZ(){if(null!==ok){var e=tI(oC),t=oa.transition,n=tS;try{if(oa.transition=null,tS=16>e?16:e,null===ok)var r=!1;else{if(e=ok,ok=null,oC=0,0!=(6&oo))throw Error(h(331));var i=oo;for(oo|=4,aQ=e.current;null!==aQ;){var s=aQ,a=s.child;if(0!=(16&aQ.flags)){var o=s.deletions;if(null!==o){for(var l=0;l<o.length;l++){var u=o[l];for(aQ=u;null!==aQ;){var c=aQ;switch(c.tag){case 0:case 11:case 15:aX(8,c,s)}var d=c.child;if(null!==d)d.return=c,aQ=d;else for(;null!==aQ;){var f=(c=aQ).sibling,p=c.return;if(function e(t){var n=t.alternate;null!==n&&(t.alternate=null,e(n)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(n=t.stateNode)&&(delete n[rj],delete n[rq],delete n[rG],delete n[rK],delete n[rQ]),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(c),c===u){aQ=null;break}if(null!==f){f.return=p,aQ=f;break}aQ=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}aQ=s}}if(0!=(2064&s.subtreeFlags)&&null!==a)a.return=s,aQ=a;else for(;null!==aQ;){if(s=aQ,0!=(2048&s.flags))switch(s.tag){case 0:case 11:case 15:aX(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,aQ=v;break}aQ=s.return}}var w=e.current;for(aQ=w;null!==aQ;){var b=(a=aQ).child;if(0!=(2064&a.subtreeFlags)&&null!==b)b.return=a,aQ=b;else for(a=w;null!==aQ;){if(o=aQ,0!=(2048&o.flags))try{switch(o.tag){case 0:case 11:case 15:aJ(9,o)}}catch(e){o1(o,o.return,e)}if(o===a){aQ=null;break}var _=o.sibling;if(null!==_){_.return=o.return,aQ=_;break}aQ=o.return}}if(oo=i,iu(),tc&&"function"==typeof tc.onPostCommitFiberRoot)try{tc.onPostCommitFiberRoot(tu,e)}catch(e){}r=!0}return r}finally{tS=n,oa.transition=t}}return!1}function o0(e,t,n){t=ap(e,t=ac(n,t),1),e=i9(e,t,1),t=oR(),null!==e&&(t_(e,1,t),oM(e,t))}function o1(e,t,n){if(3===e.tag)o0(e,e,n);else for(;null!==t;){if(3===t.tag){o0(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ox||!ox.has(r))){e=am(t,e=ac(n,e),1),t=i9(t,e,1),e=oR(),null!==t&&(t_(t,1,e),oM(t,e));break}}t=t.return}}function o2(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=oR(),e.pingedLanes|=e.suspendedLanes&n,ol===e&&(oc&n)===n&&(4===of||3===of&&(130023424&oc)===oc&&500>tn()-ob?oG(e,0):oy|=n),oM(e,t)}function o4(e,t){0===t&&(0==(1&e.mode)?t=1:(t=tm,0==(130023424&(tm<<=1))&&(tm=4194304)));var n=oR();null!==(e=i2(e,t))&&(t_(e,t,n),oM(e,n))}function o6(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),o4(e,n)}function o3(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(h(314))}null!==r&&r.delete(t),o4(e,n)}function o5(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function o9(e,t,n,r){return new o5(e,t,n,r)}function o8(e){return!(!(e=e.prototype)||!e.isReactComponent)}function o7(e,t){var n=e.alternate;return null===n?((n=o9(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function le(e,t,n,r,i,s){var a=2;if(r=e,"function"==typeof e)o8(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case N:return lt(n.children,i,s,t);case D:a=8,i|=8;break;case A:return(e=o9(12,n,t,2|i)).elementType=A,e.lanes=s,e;case M:return(e=o9(13,n,t,i)).elementType=M,e.lanes=s,e;case F:return(e=o9(19,n,t,i)).elementType=F,e.lanes=s,e;case U:return ln(n,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case P:a=10;break e;case O:a=9;break e;case L:a=11;break e;case B:a=14;break e;case V:a=16,r=null;break e}throw Error(h(130,null==e?e:typeof e,""))}return(t=o9(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function lt(e,t,n,r){return(e=o9(7,e,r,t)).lanes=n,e}function ln(e,t,n,r){return(e=o9(22,e,r,t)).elementType=U,e.lanes=n,e.stateNode={isHidden:!1},e}function lr(e,t,n){return(e=o9(6,e,null,t)).lanes=n,e}function li(e,t,n){return(t=o9(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ls(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tb(0),this.expirationTimes=tb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tb(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function la(e,t,n,r,i,s,a,o,l){return e=new ls(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=o9(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},i6(s),e}function lo(e){if(!e)return r4;e=e._reactInternals;e:{if(e6(e)!==e||1!==e.tag)throw Error(h(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(r8(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t)throw Error(h(171))}if(1===e.tag){var n=e.type;if(r8(n))return it(e,n,t)}return t}function ll(e,t,n,r,i,s,a,o,l){return(e=la(n,r,!0,e,i,s,a,o,l)).context=lo(null),n=e.current,(s=i5(r=oR(),i=oO(n))).callback=null!=t?t:null,i9(n,s,i),e.current.lanes=i,t_(e,i,r),oM(e,r),e}function lu(e,t,n,r){var i=t.current,s=oR(),a=oO(i);return n=lo(n),null===t.context?t.context=n:t.pendingContext=n,(t=i5(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=i9(i,t,a))&&(oL(e,i,a,s),i8(e,i,a)),a}function lc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function lh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ld(e,t){lh(e,t),(e=e.alternate)&&lh(e,t)}l=function(e,t,n){if(null!==e){if(e.memoizedProps!==t.pendingProps||r3.current)ab=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return ab=!1,function(e,t,n){switch(t.tag){case 3:aD(t),iL();break;case 5:su(t);break;case 1:r8(t.type)&&ir(t);break;case 4:so(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;r2(i$,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState)){if(null!==r.dehydrated)return r2(sh,1&sh.current),t.flags|=128,null;if(0!=(n&t.child.childLanes))return aO(e,t,n);return r2(sh,1&sh.current),null!==(e=az(e,t,n))?e.sibling:null}r2(sh,1&sh.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return aV(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),r2(sh,sh.current),!r)return null;break;case 22:case 23:return t.lanes=0,ax(e,t,n)}return az(e,t,n)}(e,t,n);ab=0!=(131072&e.flags)}}else ab=!1,iT&&0!=(1048576&t.flags)&&i_(t,ip,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;aU(e,t),e=t.pendingProps;var i=r9(t,r6.current);iX(t,n),i=sk(null,t,r,e,i,n);var s=sC();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,r8(r)?(s=!0,ir(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i6(t),i.updater=as,t.stateNode=i,i._reactInternals=t,au(t,r,e,n),t=aN(null,t,r,!0,s,n)):(t.tag=0,iT&&s&&iE(t),a_(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(aU(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return o8(e)?1:0;if(null!=e){if((e=e.$$typeof)===L)return 11;if(e===B)return 14}return 2}(r),e=ar(r,e),i){case 0:t=ak(null,t,r,e,n);break e;case 1:t=aC(null,t,r,e,n);break e;case 11:t=aE(null,t,r,e,n);break e;case 14:t=aS(null,t,r,ar(r.type,e),n);break e}throw Error(h(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ar(r,i),ak(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ar(r,i),aC(e,t,r,i,n);case 3:e:{if(aD(t),null===e)throw Error(h(387));r=t.pendingProps,i=(s=t.memoizedState).element,i3(e,t),se(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){i=ac(Error(h(423)),t),t=aA(e,t,r,n,i);break e}if(r!==i){i=ac(Error(h(424)),t),t=aA(e,t,r,n,i);break e}for(ix=rV(t.stateNode.containerInfo.firstChild),iI=t,iT=!0,ik=null,n=iq(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(iL(),r===i){t=az(e,t,n);break e}a_(e,t,r,n)}t=t.child}return t;case 5:return su(t),null===e&&iA(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,rP(r,i)?a=null:null!==s&&rP(r,s)&&(t.flags|=32),aT(e,t),a_(e,t,a,n),t.child;case 6:return null===e&&iA(t),null;case 13:return aO(e,t,n);case 4:return so(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ij(t,null,r,n):a_(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ar(r,i),aE(e,t,r,i,n);case 7:return a_(e,t,t.pendingProps,n),t.child;case 8:case 12:return a_(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,r2(i$,r._currentValue),r._currentValue=a,null!==s){if(nW(s.value,a)){if(s.children===i.children&&!r3.current){t=az(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var o=s.dependencies;if(null!==o){a=s.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=i5(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),iY(s.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(h(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),iY(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}}a_(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,iX(t,n),r=r(i=iJ(i)),t.flags|=1,a_(e,t,r,n),t.child;case 14:return i=ar(r=t.type,t.pendingProps),i=ar(r.type,i),aS(e,t,r,i,n);case 15:return aI(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ar(r,i),aU(e,t),t.tag=1,r8(r)?(e=!0,ir(t)):e=!1,iX(t,n),ao(t,r,i),au(t,r,i,n),aN(null,t,r,!0,e,n);case 19:return aV(e,t,n);case 22:return ax(e,t,n)}throw Error(h(156,t.tag))};var lf="function"==typeof reportError?reportError:function(e){console.error(e)};function lp(e){this._internalRoot=e}function lm(e){this._internalRoot=e}function lg(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ly(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function lv(){}function lw(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"==typeof i){var o=i;i=function(){var e=lc(a);o.call(e)}}lu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=lc(a);s.call(e)}}var a=ll(t,r,e,0,null,!1,!1,"",lv);return e._reactRootContainer=a,e[r$]=a.current,rv(8===e.nodeType?e.parentNode:e),oq(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var o=r;r=function(){var e=lc(l);o.call(e)}}var l=la(e,0,!1,null,null,!1,!1,"",lv);return e._reactRootContainer=l,e[r$]=l.current,rv(8===e.nodeType?e.parentNode:e),oq(function(){lu(t,l,n,r)}),l}(n,t,e,i,r);return lc(a)}lm.prototype.render=lp.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(h(409));lu(e,t,null,null)},lm.prototype.unmount=lp.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;oq(function(){lu(null,e,null,null)}),t[r$]=null}},lm.prototype.unstable_scheduleHydration=function(e){if(e){var t=tC();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tF.length&&0!==t&&t<tF[n].priority;n++);tF.splice(n,0,e),0===n&&tz(e)}},tx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=tg(t.pendingLanes);0!==n&&(tE(t,1|n),oM(t,tn()),0==(6&oo)&&(o_=tn()+500,iu()))}break;case 13:oq(function(){var t=i2(e,1);null!==t&&oL(t,e,1,oR())}),ld(e,1)}},tT=function(e){if(13===e.tag){var t=i2(e,134217728);null!==t&&oL(t,e,134217728,oR()),ld(e,134217728)}},tk=function(e){if(13===e.tag){var t=oO(e),n=i2(e,t);null!==n&&oL(n,e,t,oR()),ld(e,t)}},tC=function(){return tS},tN=function(e,t){var n=tS;try{return tS=e,t()}finally{tS=n}},eB=function(e,t,n){switch(t){case"input":if(ep(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=rX(r);if(!i)throw Error(h(90));eu(r),ep(r,i)}}}break;case"textarea":e_(e,n);break;case"select":null!=(t=n.value)&&ev(e,!!n.multiple,t,!1)}},e$=oj,eG=oq;var lb={findFiberByHostInstance:rH,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l_={bundleType:lb.bundleType,version:lb.version,rendererPackageName:lb.rendererPackageName,rendererConfig:lb.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=e9(e))?null:e.stateNode},findFiberByHostInstance:lb.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lE.isDisabled&&lE.supportsFiber)try{tu=lE.inject(l_),tc=lE}catch(e){}}q={usingClientEntryPoint:!1,Events:[rW,rY,rX,ej,eq,oj]},$=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!lg(t))throw Error(h(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},G=function(e,t){if(!lg(e))throw Error(h(299));var n=!1,r="",i=lf;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=la(e,1,!1,null,null,n,!1,r,i),e[r$]=t.current,rv(8===e.nodeType?e.parentNode:e),new lp(t)},K=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(h(188));throw Error(h(268,e=Object.keys(e).join(",")))}return e=null===(e=e9(t))?null:e.stateNode},Q=function(e){return oq(e)},H=function(e,t,n){if(!ly(t))throw Error(h(200));return lw(null,e,t,!0,n)},W=function(e,t,n){if(!lg(e))throw Error(h(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=lf;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=ll(t,null,e,1,null!=n?n:null,i,!1,s,a),e[r$]=t.current,rv(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new lm(t)},Y=function(e,t,n){if(!ly(t))throw Error(h(200));return lw(null,e,t,!1,n)},X=function(e){if(!ly(e))throw Error(h(40));return!!e._reactRootContainer&&(oq(function(){lw(null,null,e,!1,function(){e._reactRootContainer=null,e[r$]=null})}),!0)},J=oj,Z=function(e,t,n,r){if(!ly(n))throw Error(h(200));if(null==e||void 0===e._reactInternals)throw Error(h(38));return lw(e,t,n,!1,r)},ee="18.3.1-next-f1338f8080-20240426"}),O("fO90s",function(e,t){e.exports=R("gcnCG")}),O("gcnCG",function(e,t){function n(e,t){var n=e.length;for(e.push(t);0<n;){var r=n-1>>>1,i=e[r];if(0<a(i,t))e[r]=t,e[n]=i,n=r;else break}}function i(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else if(u<i&&0>a(c,n))e[r]=c,e[u]=n,r=u;else break}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(r(e.exports,"unstable_now",()=>o,e=>o=e),r(e.exports,"unstable_IdlePriority",()=>l,e=>l=e),r(e.exports,"unstable_ImmediatePriority",()=>u,e=>u=e),r(e.exports,"unstable_LowPriority",()=>c,e=>c=e),r(e.exports,"unstable_NormalPriority",()=>h,e=>h=e),r(e.exports,"unstable_Profiling",()=>d,e=>d=e),r(e.exports,"unstable_UserBlockingPriority",()=>f,e=>f=e),r(e.exports,"unstable_cancelCallback",()=>p,e=>p=e),r(e.exports,"unstable_continueExecution",()=>m,e=>m=e),r(e.exports,"unstable_forceFrameRate",()=>g,e=>g=e),r(e.exports,"unstable_getCurrentPriorityLevel",()=>y,e=>y=e),r(e.exports,"unstable_getFirstCallbackNode",()=>v,e=>v=e),r(e.exports,"unstable_next",()=>w,e=>w=e),r(e.exports,"unstable_pauseExecution",()=>b,e=>b=e),r(e.exports,"unstable_requestPaint",()=>_,e=>_=e),r(e.exports,"unstable_runWithPriority",()=>E,e=>E=e),r(e.exports,"unstable_scheduleCallback",()=>S,e=>S=e),r(e.exports,"unstable_shouldYield",()=>I,e=>I=e),r(e.exports,"unstable_wrapCallback",()=>x,e=>x=e),"object"==typeof performance&&"function"==typeof performance.now){var o,l,u,c,h,d,f,p,m,g,y,v,w,b,_,E,S,I,x,T,k=performance;o=function(){return k.now()}}else{var C=Date,N=C.now();o=function(){return C.now()-N}}var D=[],A=[],P=1,R=null,O=3,L=!1,M=!1,F=!1,B="function"==typeof setTimeout?setTimeout:null,V="function"==typeof clearTimeout?clearTimeout:null,U="undefined"!=typeof setImmediate?setImmediate:null;function z(e){for(var t=i(A);null!==t;){if(null===t.callback)s(A);else if(t.startTime<=e)s(A),t.sortIndex=t.expirationTime,n(D,t);else break;t=i(A)}}function j(e){if(F=!1,z(e),!M){if(null!==i(D))M=!0,Z(q);else{var t=i(A);null!==t&&ee(j,t.startTime-e)}}}function q(e,t){M=!1,F&&(F=!1,V(K),K=-1),L=!0;var n=O;try{for(z(t),R=i(D);null!==R&&(!(R.expirationTime>t)||e&&!W());){var r=R.callback;if("function"==typeof r){R.callback=null,O=R.priorityLevel;var a=r(R.expirationTime<=t);t=o(),"function"==typeof a?R.callback=a:R===i(D)&&s(D),z(t)}else s(D);R=i(D)}if(null!==R)var l=!0;else{var u=i(A);null!==u&&ee(j,u.startTime-t),l=!1}return l}finally{R=null,O=n,L=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var $=!1,G=null,K=-1,Q=5,H=-1;function W(){return!(o()-H<Q)}function Y(){if(null!==G){var e=o();H=e;var t=!0;try{t=G(!0,e)}finally{t?T():($=!1,G=null)}}else $=!1}if("function"==typeof U)T=function(){U(Y)};else if("undefined"!=typeof MessageChannel){var X=new MessageChannel,J=X.port2;X.port1.onmessage=Y,T=function(){J.postMessage(null)}}else T=function(){B(Y,0)};function Z(e){G=e,$||($=!0,T())}function ee(e,t){K=B(function(){e(o())},t)}l=5,u=1,c=4,h=3,d=null,f=2,p=function(e){e.callback=null},m=function(){M||L||(M=!0,Z(q))},g=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<e?Math.floor(1e3/e):5},y=function(){return O},v=function(){return i(D)},w=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},b=function(){},_=function(){},E=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},S=function(e,t,r){var s=o();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?s+r:s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return a=r+a,e={id:P++,callback:t,priorityLevel:e,startTime:r,expirationTime:a,sortIndex:-1},r>s?(e.sortIndex=r,n(A,e),null===i(D)&&e===i(A)&&(F?(V(K),K=-1):F=!0,ee(j,r-s))):(e.sortIndex=a,n(D,e),M||L||(M=!0,Z(q))),e},I=W,x=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}}}),O("hOzOt",function(e,t){var n=R("kZO5c");function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,r,i,s,a){if(a!==n){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return s.PropTypes=s,s}}),O("kZO5c",function(e,t){e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"});var L={};L=R("1b2ls"),R("acw62");var M={};!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),s=(M=R("Xw6Mv")).createRoot,M.hydrateRoot;var F=R("acw62"),B={},V=B={};function U(){throw Error("setTimeout has not been defined")}function z(){throw Error("clearTimeout has not been defined")}function j(e){if(a===setTimeout)return setTimeout(e,0);if((a===U||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:U}catch(e){a=U}try{o="function"==typeof clearTimeout?clearTimeout:z}catch(e){o=z}}();var q=[],$=!1,G=-1;function K(){$&&l&&($=!1,l.length?q=l.concat(q):G=-1,q.length&&Q())}function Q(){if(!$){var e=j(K);$=!0;for(var t=q.length;t;){for(l=q,q=[];++G<t;)l&&l[G].run();G=-1,t=q.length}l=null,$=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===z||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function H(e,t){this.fun=e,this.array=t}function W(){}V.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];q.push(new H(e,t)),1!==q.length||$||j(Q)},H.prototype.run=function(){this.fun.apply(null,this.array)},V.title="browser",V.browser=!0,V.env={},V.argv=[],V.version="",V.versions={},V.on=W,V.addListener=W,V.once=W,V.off=W,V.removeListener=W,V.removeAllListeners=W,V.emit=W,V.prependListener=W,V.prependOnceListener=W,V.listeners=function(e){return[]},V.binding=function(e){throw Error("process.binding is not supported")},V.cwd=function(){return"/"},V.chdir=function(e){throw Error("process.chdir is not supported")},V.umask=function(){return 0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:((64512&i)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},X=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{let s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")},J={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],s=t+1<e.length,a=s?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,u=i>>2,c=(3&i)<<4|a>>4,h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Y(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):X(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0,a=++t<e.length?n[e.charAt(t)]:64,o=++t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==a||null==o)throw new Z;let l=i<<2|s>>4;if(r.push(l),64!==a){let e=s<<4&240|a>>2;if(r.push(e),64!==o){let e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Z extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ee=function(e){let t=Y(e);return J.encodeByteArray(t,!0)},et=function(e){return ee(e).replace(/\./g,"")},en=function(e){try{return J.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function er(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=er(e[n],t[n]));return e}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=()=>/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==N)return N;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,es=()=>{if(void 0===B||void 0===B.env)return;let e=void 0;if(e)return JSON.parse(e)},ea=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&en(e[1]);return t&&JSON.parse(t)},eo=()=>{try{return ei()||es()||ea()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},el=()=>{var e;return null===(e=eo())||void 0===e?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function eh(){return"object"==typeof self&&self.self===self}function ed(){return!function(){var e;let t=null===(e=eo())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(N.process)}catch(e){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ef(){try{return"object"==typeof indexedDB}catch(e){return!1}}class ep extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ep.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,em.prototype.create)}}class em{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?i.replace(eg,(e,t)=>{let r=n[t];return null!=r?String(r):`<${t}?>`}):"Error",a=`${this.serviceName}: ${s} (${r}).`;return new ep(r,a,n)}}const eg=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ev(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],s=t[i];if(ew(n)&&ew(s)){if(!ev(n,s))return!1}else if(n!==s)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function ew(e){return null!==e&&"object"==typeof e}function eb(e,t){let n=new e_(e,t);return n.subscribe.bind(n)}class e_{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw Error("Missing Observer.");void 0===(r=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:n}:e).next&&(r.next=eE),void 0===r.error&&(r.error=eE),void 0===r.complete&&(r.complete=eE);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(e){return e&&e._delegate?e._delegate:e}class eI{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new eu;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ex})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=ex){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=ex){return this.instances.has(e)}getOptions(e=ex){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;let r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:e===ex?void 0:e,options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}return n||null}normalizeInstanceIdentifier(e=ex){return this.component?this.component.multipleInstances?e:ex:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new eT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var eC={};r(eC,"_DEFAULT_ENTRY_NAME",()=>eJ),r(eC,"_apps",()=>e0),r(eC,"_serverApps",()=>e1),r(eC,"_components",()=>e2),r(eC,"_addComponent",()=>e4),r(eC,"_addOrOverwriteComponent",()=>e6),r(eC,"_registerComponent",()=>e3),r(eC,"_getProvider",()=>e5),r(eC,"_removeServiceInstance",()=>e9),r(eC,"_isFirebaseApp",()=>e8),r(eC,"_isFirebaseServerApp",()=>e7),r(eC,"_clearComponents",()=>te),r(eC,"registerVersion",()=>tc),r(eC,"deleteApp",()=>tu),r(eC,"SDK_VERSION",()=>ti),r(eC,"initializeApp",()=>ts),r(eC,"initializeServerApp",()=>ta),r(eC,"getApp",()=>to),r(eC,"getApps",()=>tl),r(eC,"onLog",()=>th),r(eC,"setLogLevel",()=>td),r(eC,"FirebaseError",()=>ep);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=[];(i=u||(u={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";const eD={debug:u.DEBUG,verbose:u.VERBOSE,info:u.INFO,warn:u.WARN,error:u.ERROR,silent:u.SILENT},eA=u.INFO,eP={[u.DEBUG]:"log",[u.VERBOSE]:"log",[u.INFO]:"info",[u.WARN]:"warn",[u.ERROR]:"error"},eR=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=eP[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class eO{constructor(e){this.name=e,this._logLevel=eA,this._logHandler=eR,this._userLogHandler=null,eN.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in u))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?eD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,u.DEBUG,...e),this._logHandler(this,u.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,u.VERBOSE,...e),this._logHandler(this,u.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,u.INFO,...e),this._logHandler(this,u.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,u.WARN,...e),this._logHandler(this,u.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,u.ERROR,...e),this._logHandler(this,u.ERROR,...e)}}const eL=(e,t)=>t.some(t=>e instanceof t),eM=new WeakMap,eF=new WeakMap,eB=new WeakMap,eV=new WeakMap,eU=new WeakMap;let ez={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return eF.get(e);if("objectStoreNames"===t)return e.objectStoreNames||eB.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ej(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ej(n){var r;if(n instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ej(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&eM.set(t,e)}).catch(()=>{}),eU.set(t,e),t}(n);if(eV.has(n))return eV.get(n);let i="function"==typeof(r=n)?r!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(t||(t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(r)?function(...e){return r.apply(eq(this),e),ej(eM.get(this))}:function(...e){return ej(r.apply(eq(this),e))}:function(e,...t){let n=r.call(eq(this),e,...t);return eB.set(n,e.sort?e.sort():[e]),ej(n)}:(r instanceof IDBTransaction&&function(e){if(eF.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});eF.set(e,t)}(r),eL(r,e||(e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(r,ez):r;return i!==n&&(eV.set(n,i),eU.set(i,n)),i}const eq=e=>eU.get(e),e$=["get","getKey","getAll","getAllKeys","count"],eG=["put","add","delete","clear"],eK=new Map;function eQ(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(eK.get(t))return eK.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=eG.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||e$.includes(n)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&s.done]))[0]};return eK.set(t,s),s}ez={...n=ez,get:(e,t,r)=>eQ(e,t)||n.get(e,t,r),has:(e,t)=>!!eQ(e,t)||n.has(e,t)};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!function(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}const eW="@firebase/app",eY="0.10.5",eX=new eO("@firebase/app"),eJ="[DEFAULT]",eZ={[eW]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},e0=new Map,e1=new Map,e2=new Map;function e4(e,t){try{e.container.addComponent(t)}catch(n){eX.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function e6(e,t){e.container.addOrOverwriteComponent(t)}function e3(e){let t=e.name;if(e2.has(t))return eX.debug(`There were multiple attempts to register component ${t}.`),!1;for(let n of(e2.set(t,e),e0.values()))e4(n,e);for(let t of e1.values())e4(t,e);return!0}function e5(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function e9(e,t,n=eJ){e5(e,t).clearInstance(n)}function e8(e){return void 0!==e.options}function e7(e){return void 0!==e.settings}function te(){e2.clear()}const tt=new em("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new eI("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends tn{constructor(e,t,n,r){let i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};void 0!==e.apiKey?super(e,s,r):super(e.options,s,r),this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,tc(eW,eY,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){tu(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw tt.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="10.12.2";function ts(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});let r=Object.assign({name:eJ,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw tt.create("bad-app-name",{appName:String(i)});if(n||(n=el()),!n)throw tt.create("no-options");let s=e0.get(i);if(s){if(ev(n,s.options)&&ev(r,s.config))return s;throw tt.create("duplicate-app",{appName:i})}let a=new ek(i);for(let e of e2.values())a.addComponent(e);let o=new tn(n,r,a);return e0.set(i,o),o}function ta(e,t){let n;if(eh())throw tt.create("invalid-server-app-environment");void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=e8(e)?e.options:e;let r=Object.assign(Object.assign({},t),n);if(void 0!==r.releaseOnDeref&&delete r.releaseOnDeref,void 0!==t.releaseOnDeref&&"undefined"==typeof FinalizationRegistry)throw tt.create("finalization-registry-not-supported",{});let i=""+[...JSON.stringify(r)].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0),s=e1.get(i);if(s)return s.incRefCount(t.releaseOnDeref),s;let a=new ek(i);for(let e of e2.values())a.addComponent(e);let o=new tr(n,t,i,a);return e1.set(i,o),o}function to(e=eJ){let t=e0.get(e);if(!t&&e===eJ&&el())return ts();if(!t)throw tt.create("no-app",{appName:e});return t}function tl(){return Array.from(e0.values())}async function tu(e){let t=!1,n=e.name;e0.has(n)?(t=!0,e0.delete(n)):e1.has(n)&&0>=e.decRefCount()&&(e1.delete(n),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function tc(e,t,n){var r;let i=null!==(r=eZ[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);let s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){let e=[`Unable to register library "${i}" with version "${t}":`];s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),eX.warn(e.join(" "));return}e3(new eI(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function th(e,t){if(null!==e&&"function"!=typeof e)throw tt.create("invalid-log-argument");!function(e,t){for(let n of eN){let r=null;t&&t.level&&(r=eD[t.level]),null===e?n.userLogHandler=null:n.userLogHandler=(t,n,...i)=>{let s=i.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:u[n].toLowerCase(),message:s,args:i,type:t.name})}}}(e,t)}function td(e){eN.forEach(t=>{t.setLogLevel(e)})}const tf="firebase-heartbeat-store";let tp=null;function tm(){return tp||(tp=(function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(e,1),o=ej(a);return r&&a.addEventListener("upgradeneeded",e=>{r(ej(a.result),e.oldVersion,e.newVersion,ej(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(tf)}catch(e){console.warn(e)}}}).catch(e=>{throw tt.create("idb-open",{originalErrorMessage:e.message})})),tp}async function tg(e){try{let t=(await tm()).transaction(tf),n=await t.objectStore(tf).get(tv(e));return await t.done,n}catch(e){if(e instanceof ep)eX.warn(e.message);else{let t=tt.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});eX.warn(t.message)}}}async function ty(e,t){try{let n=(await tm()).transaction(tf,"readwrite"),r=n.objectStore(tf);await r.put(t,tv(e)),await n.done}catch(e){if(e instanceof ep)eX.warn(e.message);else{let t=tt.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});eX.warn(t.message)}}}function tv(e){return`${e.name}!${e.options.appId}`}class tw{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new t_(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=tb();return(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)==null)?void 0:this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r)?void 0:(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let t=tb(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),tE(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tE(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=et(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function tb(){return new Date().toISOString().substring(0,10)}class t_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ef()&&new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await tg(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let n=await this.read();return ty(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let n=await this.read();return ty(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function tE(e){return et(JSON.stringify({version:2,heartbeats:e})).length}e3(new eI("platform-logger",e=>new eH(e),"PRIVATE")),e3(new eI("heartbeat",e=>new tw(e),"PRIVATE")),tc(eW,eY,""),tc(eW,eY,"esm2017"),tc("fire-js","");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t){this._delegate=e,this.firebase=t,e4(e,new eI("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),tu(this._delegate)))}_getService(e,t=eJ){var n;this._delegate.checkDestroyed();let r=this._delegate.container.getProvider(e);return r.isInitialized()||(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)!=="EXPLICIT"||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=eJ){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){e4(this._delegate,e)}_addOrOverwriteComponent(e){e6(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const tI=new em("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),tx=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e(){let t=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){let t={},n={__esModule:!0,initializeApp:function(r,i={}){let s=ts(r,i);if(ey(t,s.name))return t[s.name];let a=new e(s,n);return t[s.name]=a,a},app:r,registerVersion:tc,setLogLevel:td,onLog:th,apps:null,SDK_VERSION:ti,INTERNAL:{registerComponent:function(t){let i=t.name,s=i.replace("-compat","");if(e3(t)&&"PUBLIC"===t.type){let a=(e=r())=>{if("function"!=typeof e[s])throw tI.create("invalid-app-argument",{appName:i});return e[s]()};void 0!==t.serviceProps&&er(a,t.serviceProps),n[s]=a,e.prototype[s]=function(...e){return this._getService.bind(this,i).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:eC}};function r(e){if(!ey(t,e=e||eJ))throw tI.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),r.App=e,n}(tS);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){er(t,e)},createSubscribe:eb,ErrorFactory:em,deepExtend:er}),t}(),tT=new eO("@firebase/app-compat");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(eh()&&void 0!==self.firebase){tT.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);let e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&tT.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}tc("@firebase/app-compat","0.2.35",void 0),tx.registerVersion("firebase","10.12.2","app-compat");var tk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==N?N:"undefined"!=typeof self?self:{},tC={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function t(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=s+(i^(t=n+(a<<7&4294967295|a>>>25))&(n^i))+r[1]+3905402710&4294967295,a=i+(n^(s=t+(a<<12&4294967295|a>>>20))&(t^n))+r[2]+606105819&4294967295,a=n+(t^(i=s+(a<<17&4294967295|a>>>15))&(s^t))+r[3]+3250441966&4294967295,a=t+(s^(n=i+(a<<22&4294967295|a>>>10))&(i^s))+r[4]+4118548399&4294967295,a=s+(i^(t=n+(a<<7&4294967295|a>>>25))&(n^i))+r[5]+1200080426&4294967295,a=i+(n^(s=t+(a<<12&4294967295|a>>>20))&(t^n))+r[6]+2821735955&4294967295,a=n+(t^(i=s+(a<<17&4294967295|a>>>15))&(s^t))+r[7]+4249261313&4294967295,a=t+(s^(n=i+(a<<22&4294967295|a>>>10))&(i^s))+r[8]+1770035416&4294967295,a=s+(i^(t=n+(a<<7&4294967295|a>>>25))&(n^i))+r[9]+2336552879&4294967295,a=i+(n^(s=t+(a<<12&4294967295|a>>>20))&(t^n))+r[10]+4294925233&4294967295,a=n+(t^(i=s+(a<<17&4294967295|a>>>15))&(s^t))+r[11]+2304563134&4294967295,a=t+(s^(n=i+(a<<22&4294967295|a>>>10))&(i^s))+r[12]+1804603682&4294967295,a=s+(i^(t=n+(a<<7&4294967295|a>>>25))&(n^i))+r[13]+4254626195&4294967295,a=i+(n^(s=t+(a<<12&4294967295|a>>>20))&(t^n))+r[14]+2792965006&4294967295,a=n+(t^(i=s+(a<<17&4294967295|a>>>15))&(s^t))+r[15]+1236535329&4294967295,n=i+(a<<22&4294967295|a>>>10),a=t+(i^s&(n^i))+r[1]+4129170786&4294967295,t=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(t^n))+r[6]+3225465664&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[11]+643717713&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^t&(i^s))+r[0]+3921069994&4294967295,n=i+(a<<20&4294967295|a>>>12),a=t+(i^s&(n^i))+r[5]+3593408605&4294967295,t=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(t^n))+r[10]+38016083&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[15]+3634488961&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^t&(i^s))+r[4]+3889429448&4294967295,n=i+(a<<20&4294967295|a>>>12),a=t+(i^s&(n^i))+r[9]+568446438&4294967295,t=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(t^n))+r[14]+3275163606&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[3]+4107603335&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^t&(i^s))+r[8]+1163531501&4294967295,n=i+(a<<20&4294967295|a>>>12),a=t+(i^s&(n^i))+r[13]+2850285829&4294967295,t=n+(a<<5&4294967295|a>>>27),a=s+(n^i&(t^n))+r[2]+4243563512&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[7]+1735328473&4294967295,i=s+(a<<14&4294967295|a>>>18),a=n+(s^t&(i^s))+r[12]+2368359562&4294967295,a=t+((n=i+(a<<20&4294967295|a>>>12))^i^s)+r[5]+4294588738&4294967295,a=s+((t=n+(a<<4&4294967295|a>>>28))^n^i)+r[8]+2272392833&4294967295,a=i+((s=t+(a<<11&4294967295|a>>>21))^t^n)+r[11]+1839030562&4294967295,a=n+((i=s+(a<<16&4294967295|a>>>16))^s^t)+r[14]+4259657740&4294967295,a=t+((n=i+(a<<23&4294967295|a>>>9))^i^s)+r[1]+2763975236&4294967295,a=s+((t=n+(a<<4&4294967295|a>>>28))^n^i)+r[4]+1272893353&4294967295,a=i+((s=t+(a<<11&4294967295|a>>>21))^t^n)+r[7]+4139469664&4294967295,a=n+((i=s+(a<<16&4294967295|a>>>16))^s^t)+r[10]+3200236656&4294967295,a=t+((n=i+(a<<23&4294967295|a>>>9))^i^s)+r[13]+681279174&4294967295,a=s+((t=n+(a<<4&4294967295|a>>>28))^n^i)+r[0]+3936430074&4294967295,a=i+((s=t+(a<<11&4294967295|a>>>21))^t^n)+r[3]+3572445317&4294967295,a=n+((i=s+(a<<16&4294967295|a>>>16))^s^t)+r[6]+76029189&4294967295,a=t+((n=i+(a<<23&4294967295|a>>>9))^i^s)+r[9]+3654602809&4294967295,a=s+((t=n+(a<<4&4294967295|a>>>28))^n^i)+r[12]+3873151461&4294967295,a=i+((s=t+(a<<11&4294967295|a>>>21))^t^n)+r[15]+530742520&4294967295,a=n+((i=s+(a<<16&4294967295|a>>>16))^s^t)+r[2]+3299628645&4294967295,n=i+(a<<23&4294967295|a>>>9),a=t+(i^(n|~s))+r[0]+4096336452&4294967295,t=n+(a<<6&4294967295|a>>>26),a=s+(n^(t|~i))+r[7]+1126891415&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[14]+2878612391&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~t))+r[5]+4237533241&4294967295,n=i+(a<<21&4294967295|a>>>11),a=t+(i^(n|~s))+r[12]+1700485571&4294967295,t=n+(a<<6&4294967295|a>>>26),a=s+(n^(t|~i))+r[3]+2399980690&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[10]+4293915773&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~t))+r[1]+2240044497&4294967295,n=i+(a<<21&4294967295|a>>>11),a=t+(i^(n|~s))+r[8]+1873313359&4294967295,t=n+(a<<6&4294967295|a>>>26),a=s+(n^(t|~i))+r[15]+4264355552&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[6]+2734768916&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~t))+r[13]+1309151649&4294967295,n=i+(a<<21&4294967295|a>>>11),a=t+(i^(n|~s))+r[4]+4149444226&4294967295,t=n+(a<<6&4294967295|a>>>26),a=s+(n^(t|~i))+r[11]+3174756917&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[2]+718787259&4294967295,i=s+(a<<15&4294967295|a>>>17),a=n+(s^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function n(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(e,function(){this.blockSize=-1}),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(e,n){void 0===n&&(n=e.length);for(var r=n-this.blockSize,i=this.B,s=this.h,a=0;a<n;){if(0==s)for(;a<=r;)t(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<n;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){t(this,i),s=0;break}}else for(;a<n;)if(i[s++]=e[a++],s==this.blockSize){t(this,i),s=0;break}}this.h=s,this.o+=n},e.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var r,i={};function s(e){var t;return -128<=e&&128>e?(t=function(e){return new n([0|e],0>e?-1:0)},Object.prototype.hasOwnProperty.call(i,e)?i[e]:i[e]=t(e)):new n([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return p(a(-e));for(var t=[],r=1,i=0;e>=r;i++)t[i]=e/r|0,r*=4294967296;return new n(t,0)}var o=s(0),l=s(1),u=s(16777216);function d(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function f(e){return -1==e.h}function p(e){for(var t=e.g.length,r=[],i=0;i<t;i++)r[i]=~e.g[i];return new n(r,~e.h).add(l)}function m(e,t){return e.add(p(t))}function g(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function v(e,t){if(d(t))throw Error("division by zero");if(d(e))return new y(o,o);if(f(e))return t=v(p(e),t),new y(p(t.g),p(t.h));if(f(t))return t=v(e,p(t)),new y(p(t.g),t.h);if(30<e.g.length){if(f(e)||f(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=w(n),r=w(r);var i=b(n,1),s=b(r,1);for(r=b(r,2),n=b(n,2);!d(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=b(r,1),n=b(n,1)}return t=m(e,i.j(t)),new y(i,t)}for(i=o;0<=e.l(t);){for(r=48>=(r=Math.ceil(Math.log(n=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))?1:Math.pow(2,r-48),u=(s=a(n)).j(t);f(u)||0<u.l(e);)n-=r,u=(s=a(n)).j(t);d(s)&&(s=l),i=i.add(s),e=m(e,u)}return new y(i,e)}function w(e){for(var t=e.g.length+1,r=[],i=0;i<t;i++)r[i]=e.i(i)<<1|e.i(i-1)>>>31;return new n(r,e.h)}function b(e,t){var r=t>>5;t%=32;for(var i=e.g.length-r,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+r)>>>t|e.i(a+r+1)<<32-t:e.i(a+r);return new n(s,e.h)}(r=n.prototype).m=function(){if(f(this))return-p(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},r.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(d(this))return"0";if(f(this))return"-"+p(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=v(n,t).g,s=((0<(n=m(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(d(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},r.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},r.l=function(e){return f(e=m(this,e))?-1:d(e)?0:1},r.abs=function(){return f(this)?p(this):this},r.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,r[s]=o<<16|a}return new n(r,-2147483648&r[r.length-1]?-1:0)},r.j=function(e){if(d(this)||d(e))return o;if(f(this))return f(e)?p(this).j(p(e)):p(p(this).j(e));if(f(e))return p(this.j(p(e)));if(0>this.l(u)&&0>e.l(u))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,r=[],i=0;i<2*t;i++)r[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,c=65535&this.i(i),h=e.i(s)>>>16,m=65535&e.i(s);r[2*i+2*s]+=c*m,g(r,2*i+2*s),r[2*i+2*s+1]+=l*m,g(r,2*i+2*s+1),r[2*i+2*s+1]+=c*h,g(r,2*i+2*s+1),r[2*i+2*s+2]+=l*h,g(r,2*i+2*s+2)}for(i=0;i<t;i++)r[i]=r[2*i+1]<<16|r[2*i];for(i=t;i<2*t;i++)r[i]=0;return new n(r,0)},r.A=function(e){return v(this,e).h},r.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)&e.i(i);return new n(r,this.h&e.h)},r.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)|e.i(i);return new n(r,this.h|e.h)},r.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)^e.i(i);return new n(r,this.h^e.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,h=tC.Md5=e,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.A,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=a,n.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return p(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(u))):i=(i=i.j(r)).add(a(u))}return i},c=tC.Integer=n}).apply(void 0!==tk?tk:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var tN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==N?N:"undefined"!=typeof self?self:{},tD={};(function(){var e,t,n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof tN&&tN];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,t){if(t)e:{var n=i;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in n))break e;n=n[a]}(t=t(s=n[e=e[e.length-1]]))!=s&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}("Array.prototype.values",function(e){return e||function(){var e,t,n,r,i;return e=this,t=function(e,t){return t},e instanceof String&&(e+=""),n=0,r=!1,(i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}})[Symbol.iterator]=function(){return i},i}});var s=s||{},a=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function l(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function u(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function h(e,t,n){return(h=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:c).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function E(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function S(e){let t=e.length;if(0<t){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function I(e,t){for(let t=1;t<arguments.length;t++){let n=arguments[t];if(o(n)){let t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function x(e){return/^[\s\xa0]*$/.test(e)}function T(){var e=a.navigator;return e&&(e=e.userAgent)?e:""}function k(e){return k[" "](e),e}k[" "]=function(){};var C=-1!=T().indexOf("Gecko")&&!(-1!=T().toLowerCase().indexOf("webkit")&&-1==T().indexOf("Edge"))&&!(-1!=T().indexOf("Trident")||-1!=T().indexOf("MSIE"))&&-1==T().indexOf("Edge");function N(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function D(e){let t={};for(let n in e)t[n]=e[n];return t}let A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t])e[n]=r[n];for(let t=0;t<A.length;t++)n=A[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}var R=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new O,e=>e.reset());class O{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let L,M=!1,F=new class{constructor(){this.h=this.g=null}add(e,t){let n=R.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},B=()=>{let e=a.Promise.resolve(void 0);L=()=>{e.then(V)}};var V=()=>{let e;for(var t;e=null,F.g&&(e=F.g,F.g=F.g.next,F.g||(F.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(e){!function(e){a.setTimeout(()=>{throw e},0)}(e)}R.j(t),100>R.h&&(R.h++,t.next=R.g,R.g=t)}M=!1};function U(){this.s=this.s,this.C=this.C}function z(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},z.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let e=()=>{};a.addEventListener("test",e,t),a.removeEventListener("test",e,t)}catch(e){}return e}();function q(e,t){if(z.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(C){e:{try{k(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:$[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&q.aa.h.call(this)}}E(q,z);var $={2:"touch",3:"pen",4:"mouse"};q.prototype.h=function(){q.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),K=0;function Q(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++K,this.da=this.fa=!1}function H(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function W(e){this.src=e,this.g={},this.h=0}function Y(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(H(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function X(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&!!n==s.capture&&s.ha==r)return i}return -1}W.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=X(e,t,r,i);return -1<a?(t=e[a],n||(t.fa=!1)):((t=new Q(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var J="closure_lm_"+(1e6*Math.random()|0),Z={};function ee(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=l(i)?!!i.capture:!!i,o=ei(e);if(o||(e[J]=o=new W(e)),(n=o.add(t,n,r,a,s)).proxy)return n;if(r=function e(t){return er.call(e.src,e.listener,t)},n.proxy=r,r.src=e,r.listener=n,e.addEventListener)j||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(en(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function et(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[G])Y(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(en(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ei(t))?(Y(n,e),0==n.h&&(n.src=null,t[J]=null)):H(e)}}}function en(e){return e in Z?Z[e]:Z[e]="on"+e}function er(e,t){if(e.da)e=!0;else{t=new q(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&et(e),e=n.call(r,t)}return e}function ei(e){return(e=e[J])instanceof W?e:null}var es="__closure_events_fn_"+(1e9*Math.random()>>>0);function ea(e){return"function"==typeof e?e:(e[es]||(e[es]=function(t){return e.handleEvent(t)}),e[es])}function eo(){U.call(this),this.i=new W(this),this.M=this,this.F=null}function el(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new z(t,e);else if(t instanceof z)t.target=t.target||e;else{var i=t;P(t=new z(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=eu(a,r,!0,t)&&i}if(i=eu(a=t.g=e,r,!0,t)&&i,i=eu(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=eu(a=t.g=n[s],r,!1,t)&&i}function eu(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&Y(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function ec(e,t,n){if("function"==typeof e)n&&(e=h(e,n));else if(e&&"function"==typeof e.handleEvent)e=h(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}E(eo,U),eo.prototype[G]=!0,eo.prototype.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,s){if(Array.isArray(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,s);else(i=l(i)?!!i.capture:!!i,r=ea(r),t&&t[G])?(t=t.i,(n=String(n).toString())in t.g&&-1<(r=X(a=t.g[n],r,i,s))&&(H(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.g[n],t.h--))):t&&(t=ei(t))&&(n=t.g[n.toString()],t=-1,n&&(t=X(n,r,i,s)),(r=-1<t?n[t]:null)&&et(r))}(this,e,t,n,r)},eo.prototype.N=function(){if(eo.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)H(n[r]);delete t.g[e],t.h--}}this.F=null},eo.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},eo.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class eh extends U{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=ec(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.l);let n=t.h;t.h=null,t.m.apply(null,n)}(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ed(e){U.call(this),this.h=e,this.g={}}E(ed,U);var ef=[];function ep(e){N(e.g,function(e,t){this.g.hasOwnProperty(t)&&et(e)},e),e.g={}}ed.prototype.N=function(){ed.aa.N.call(this),ep(this)},ed.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var em=a.JSON.stringify,eg=a.JSON.parse,ey=class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}};function ev(){}function ew(e){return e.h||(e.h=e.i())}function eb(){}ev.prototype.h=null;var e_={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eE(){z.call(this,"d")}function eS(){z.call(this,"c")}E(eE,z),E(eS,z);var eI={},ex=null;function eT(){return ex=ex||new eo}function ek(e){z.call(this,eI.La,e)}function eC(e){let t=eT();el(t,new ek(t))}function eN(e,t){z.call(this,eI.STAT_EVENT,e),this.stat=t}function eD(e){let t=eT();el(t,new eN(t,e))}function eA(e,t){z.call(this,eI.Ma,e),this.size=t}function eP(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}function eR(){this.g=!0}function eO(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}}return em(n)}catch(e){return t}}(e,n)+(r?" "+r:"")})}eI.La="serverreachability",E(ek,z),eI.STAT_EVENT="statevent",E(eN,z),eI.Ma="timingevent",E(eA,z),eR.prototype.xa=function(){this.g=!1},eR.prototype.info=function(){};var eL={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eM={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function eF(){}function eB(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ed(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eV}function eV(){this.i=null,this.g="",this.h=!1}E(eF,ev),eF.prototype.g=function(){return new XMLHttpRequest},eF.prototype.i=function(){return{}},t=new eF;var eU={},ez={};function ej(e,t,n){e.L=1,e.v=tr(e8(t)),e.m=n,e.P=!0,eq(e,null)}function eq(e,t){e.F=Date.now(),eG(e),e.A=e8(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),tg(n.i,"t",r),e.C=0,n=e.j.J,e.h=new eV,e.g=t6(e.j,n?t:null,!e.m),0<e.O&&(e.M=new eh(h(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ef[0]=i.toString()),i=ef);for(var s=0;s<i.length;s++){var a=function e(t,n,r,i,s){if(i&&i.once)return function e(t,n,r,i,s){if(Array.isArray(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,s);return null}return r=ea(r),t&&t[G]?t.L(n,r,l(i)?!!i.capture:!!i,s):ee(t,n,r,!0,i,s)}(t,n,r,i,s);if(Array.isArray(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,s);return null}return r=ea(r),t&&t[G]?t.K(n,r,l(i)?!!i.capture:!!i,s):ee(t,n,r,!1,i,s)}(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?D(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),eC(),function(e,t,n,r,i,s){e.info(function(){if(e.g){if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var u=o[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+u+"&":a+(c+"=redacted&")}}else a=null}else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function e$(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function eG(e){e.S=Date.now()+e.I,eK(e,e.I)}function eK(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eP(h(e.ba,e),t)}function eQ(e){e.B&&(a.clearTimeout(e.B),e.B=null)}function eH(e){0==e.j.G||e.J||tZ(e.j,e)}function eW(e){eQ(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ep(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function eY(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||e1(n.h,e))){if(!e.K&&e1(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(n.g.F+3e3<e.F)tJ(n),tj(n);else break e}tW(n),eD(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=eP(h(n.Za,n),6e3));if(1>=e0(n.h)&&n.ca){try{n.ca()}catch(e){}n.ca=void 0}}else t1(n,11)}else if((e.K||n.g==e)&&tJ(n),!x(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let o=i[t];if(n.T=o[0],o=o[1],2==n.G){if("c"==o[0]){n.K=o[1],n.ia=o[2];let t=o[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));let i=o[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));let l=o[5];null!=l&&"number"==typeof l&&0<l&&(r=1.5*l,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;let u=e.g;if(u){let e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(e2(s,s.h),s.h=null))}if(r.D){let e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,tn(r.I,r.D,e))}}if(n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms")),(r=n).qa=t4(r,r.J?r.ia:null,r.W),e.K){e4(r.h,e);var a=r.L;a&&(e.I=a),e.B&&(eQ(e),eG(e)),r.g=e}else tH(r);0<n.i.length&&t$(n)}else"stop"!=o[0]&&"close"!=o[0]||t1(n,7)}else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?t1(n,7):tz(n):"noop"!=o[0]&&n.l&&n.l.ta(o),n.v=0)}}eC(4)}catch(e){}}eB.prototype.ca=function(e){e=e.target;let t=this.M;t&&3==tF(e)?t.j():this.Y(e)},eB.prototype.Y=function(e){try{if(e==this.g)e:{let d=tF(this.g);var t=this.g.Ba();let f=this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||tB(this.g)))){this.J||4!=d||7==t||(8==t||0>=f?eC(3):eC(2)),eQ(this);var n=this.g.Z();this.X=n;t:if(e$(this)){var r=tB(this.g);e="";var i=r.length,s=4==tF(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){eW(this),eH(this);var o="";break t}this.h.i=new a.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(s&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(l)){var c=l;break t}}c=null}if(n=c)eO(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eY(this,n);else{this.o=!1,this.s=3,eD(12),eW(this),eH(this);break e}}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;)if((e=function(e,t){var n=e.C,r=t.indexOf("\n",n);return -1==r?ez:isNaN(n=Number(t.substring(n,r)))?eU:(r+=1)+n>t.length?ez:(t=t.slice(r,r+n),e.C=r+n,t)}(this,o))==ez){4==d&&(this.s=4,eD(14),n=!1),eO(this.i,this.l,null,"[Incomplete Response]");break}else if(e==eU){this.s=4,eD(15),eO(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}else eO(this.i,this.l,e,null),eY(this,e);if(e$(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,eD(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),tY(h),h.M=!0,eD(11))}}else eO(this.i,this.l,o,"[Invalid Chunked Response]"),eW(this),eH(this)}else eO(this.i,this.l,o,null),eY(this,o);4==d&&eW(this),this.o&&!this.J&&(4==d?tZ(this.j,this):(this.o=!1,eG(this)))}else(function(e){let t={};e=(e.g&&2<=tF(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(x(e[r]))continue;var n=function(e){var t=1;e=e.split(":");let n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}(e[r]);let i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();let s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(let n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,eD(12)):(this.s=0,eD(13)),eW(this),eH(this)}}}catch(e){}finally{}},eB.prototype.cancel=function(){this.J=!0,eW(this)},eB.prototype.ba=function(){this.B=null;let e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(eC(),eD(17)),eW(this),this.s=2,eH(this)):eK(this,this.S-e)};var eX=class{constructor(e,t){this.g=e,this.map=t}};function eJ(e){this.l=e||10,e=a.PerformanceNavigationTiming?0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function eZ(e){return!!e.h||!!e.g&&e.g.size>=e.j}function e0(e){return e.h?1:e.g?e.g.size:0}function e1(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function e2(e,t){e.g?e.g.add(t):e.h=t}function e4(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function e6(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(let n of e.g.values())t=t.concat(n.D);return t}return S(e.i)}function e3(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(o(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(let r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}eJ.prototype.cancel=function(){if(this.i=e6(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}};var e5=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function e9(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof e9){this.h=e.h,e7(this,e.j),this.o=e.o,this.g=e.g,te(this,e.s),this.l=e.l;var t=e.i,n=new td;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),tt(this,n),this.m=e.m}else e&&(t=String(e).match(e5))?(this.h=!1,e7(this,t[1]||"",!0),this.o=ti(t[2]||""),this.g=ti(t[3]||"",!0),te(this,t[4]),this.l=ti(t[5]||"",!0),tt(this,t[6]||"",!0),this.m=ti(t[7]||"")):(this.h=!1,this.i=new td(null,this.h))}function e8(e){return new e9(e)}function e7(e,t,n){e.j=n?ti(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function te(e,t){if(t){if(isNaN(t=Number(t))||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function tt(e,t,n){var r,i;t instanceof td?(e.i=t,r=e.i,(i=e.h)&&!r.j&&(tf(r),r.i=null,r.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(tp(this,t),tg(this,n,e))},r)),r.j=i):(n||(t=ts(t,tc)),e.i=new td(t,e.h))}function tn(e,t,n){e.i.set(t,n)}function tr(e){return tn(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ti(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ts(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ta),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ta(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}e9.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ts(t,to,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ts(t,to,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ts(n,"/"==n.charAt(0)?tu:tl,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ts(n,th)),e.join("")};var to=/[#\/\?@]/g,tl=/[#\?:]/g,tu=/[#\?]/g,tc=/[#\?@]/g,th=/#/g;function td(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function tf(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function tp(e,t){tf(e),t=ty(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tm(e,t){return tf(e),t=ty(e,t),e.g.has(t)}function tg(e,t,n){tp(e,t),0<n.length&&(e.i=null,e.g.set(ty(e,t),S(n)),e.h+=n.length)}function ty(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function tv(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(e){}}function tw(){this.g=new ey}function tb(e){this.l=e.Ub||null,this.j=e.eb||!1}function t_(e,t){eo.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function tE(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function tS(e){e.readyState=4,e.l=null,e.j=null,e.v=null,tI(e)}function tI(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function tx(e){let t="";return N(e,function(e,n){t+=n+":"+e+"\r\n"}),t}function tT(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=tx(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):tn(e,t,n))}function tk(e){eo.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=td.prototype).add=function(e,t){tf(this),this.i=null,e=ty(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},n.forEach=function(e,t){tf(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},n.na=function(){tf(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){let i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},n.V=function(e){tf(this);let t=[];if("string"==typeof e)tm(this,e)&&(t=t.concat(this.g.get(ty(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},n.set=function(e,t){return tf(this),this.i=null,tm(this,e=ty(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},n.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];let s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},E(tb,ev),tb.prototype.g=function(){return new t_(this.l,this.j)},tb.prototype.i=(e={},function(){return e}),E(t_,eo),(n=t_.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,tI(this)},n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||a).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tS(this)),this.readyState=0},n.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tI(this)),this.g&&(this.readyState=3,tI(this),this.g))){if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tE(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))}},n.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?tS(this):tI(this),3==this.readyState&&tE(this)}},n.Ra=function(e){this.g&&(this.response=this.responseText=e,tS(this))},n.Qa=function(e){this.g&&(this.response=e,tS(this))},n.ga=function(){this.g&&tS(this)},n.setRequestHeader=function(e,t){this.u.append(e,t)},n.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(t_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),E(tk,eo);var tC=/^https?$/i,tA=["POST","PUT"];function tP(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,tR(e),tL(e)}function tR(e){e.A||(e.A=!0,el(e,"complete"),el(e,"error"))}function tO(e){if(e.h&&void 0!==s&&(!e.v[1]||4!=tF(e)||2!=e.Z())){if(e.u&&4==tF(e))ec(e.Ea,0,e);else if(el(e,"readystatechange"),4==tF(e)){e.h=!1;try{let s=e.Z();switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t,n,r=!0;break;default:r=!1}if(!(t=r)){if(n=0===s){var i=String(e.D).match(e5)[1]||null;!i&&a.self&&a.self.location&&(i=a.self.location.protocol.slice(0,-1)),n=!tC.test(i?i.toLowerCase():"")}t=n}if(t)el(e,"complete"),el(e,"success");else{e.m=6;try{var o=2<tF(e)?e.g.statusText:""}catch(e){o=""}e.l=o+" ["+e.Z()+"]",tR(e)}}finally{tL(e)}}}}function tL(e,t){if(e.g){tM(e);let n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||el(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function tM(e){e.I&&(a.clearTimeout(e.I),e.I=null)}function tF(e){return e.g?e.g.readyState:0}function tB(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tV(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function tU(e){this.Aa=0,this.i=[],this.j=new eR,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tV("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tV("baseRetryDelayMs",5e3,e),this.cb=tV("retryDelaySeedMs",1e4,e),this.Wa=tV("forwardChannelMaxRetries",2,e),this.wa=tV("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new eJ(e&&e.concurrentRequestLimit),this.Da=new tw,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function tz(e){if(tq(e),3==e.G){var t=e.U++,n=e8(e.I);if(tn(n,"SID",e.K),tn(n,"RID",t),tn(n,"TYPE","terminate"),tK(e,n),(t=new eB(e,e.j,t)).L=2,t.v=tr(e8(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&a.Image&&((new Image).src=t.v,n=!0),n||(t.g=t6(t.j,null),t.g.ea(t.v)),t.F=Date.now(),eG(t)}t2(e)}function tj(e){e.g&&(tY(e),e.g.cancel(),e.g=null)}function tq(e){tj(e),e.u&&(a.clearTimeout(e.u),e.u=null),tJ(e),e.h.cancel(),e.s&&("number"==typeof e.s&&a.clearTimeout(e.s),e.s=null)}function t$(e){if(!eZ(e.h)&&!e.s){e.s=!0;var t=e.Ga;L||B(),M||(L(),M=!0),F.add(t,e),e.B=0}}function tG(e,t){var n;n=t?t.l:e.U++;let r=e8(e.I);tn(r,"SID",e.K),tn(r,"RID",n),tn(r,"AID",e.T),tK(e,r),e.m&&e.o&&tT(r,e.m,e.o),n=new eB(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tQ(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),e2(e.h,n),ej(n,r,t)}function tK(e,t){e.H&&N(e.H,function(e,n){tn(t,n,e)}),e.l&&e3({},function(e,n){tn(t,n,e)})}function tQ(e,t,n){n=Math.min(e.i.length,n);var r=e.l?h(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){let e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g,o=i[a].map;if(0>(n-=t))t=Math.max(0,i[a].g-100),s=!1;else try{!function(e,t,n){let r=n||"";try{e3(e,function(e,n){let i=e;l(e)&&(i=em(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}(o,e,"req"+n+"_")}catch(e){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tH(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;L||B(),M||(L(),M=!0),F.add(t,e),e.v=0}}function tW(e){return!e.g&&!e.u&&!(3<=e.v)&&(e.Y++,e.u=eP(h(e.Fa,e),t0(e,e.v)),e.v++,!0)}function tY(e){null!=e.A&&(a.clearTimeout(e.A),e.A=null)}function tX(e){e.g=new eB(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=e8(e.qa);tn(t,"RID","rpc"),tn(t,"SID",e.K),tn(t,"AID",e.T),tn(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&tn(t,"TO",e.ja),tn(t,"TYPE","xmlhttp"),tK(e,t),e.m&&e.o&&tT(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=tr(e8(t)),n.m=null,n.P=!0,eq(n,e)}function tJ(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function tZ(e,t){var n=null;if(e.g==t){tJ(e),tY(e),e.g=null;var r=2}else{if(!e1(e.h,t))return;n=t.D,e4(e.h,t),r=1}if(0!=e.G){if(t.o){if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i,s=e.B;el(r=eT(),new eA(r,n)),t$(e)}else tH(e)}else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&(i=t,!(e0(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=i.D.concat(e.i),!0):1!=e.G&&2!=e.G&&!(e.B>=(e.Va?0:e.Wa))&&(e.s=eP(h(e.Ga,e,i),t0(e,e.B)),e.B++,!0)))||2==r&&tW(e)))switch(n&&0<n.length&&((t=e.h).i=t.i.concat(n)),s){case 1:t1(e,5);break;case 4:t1(e,10);break;case 3:t1(e,6);break;default:t1(e,2)}}}function t0(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function t1(e,t){if(e.j.info("Error code "+t),2==t){var n=h(e.fb,e),r=e.Xa;let t=!r;r=new e9(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||e7(r,"https"),tr(r),t?function(e,t){let n=new eR;if(a.Image){let r=new Image;r.onload=_(tv,n,"TestLoadImage: loaded",!0,t,r),r.onerror=_(tv,n,"TestLoadImage: error",!1,t,r),r.onabort=_(tv,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=_(tv,n,"TestLoadImage: timeout",!1,t,r),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){let n=new eR,r=new AbortController,i=setTimeout(()=>{r.abort(),tv(n,"TestPingServer: timeout",!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?tv(n,"TestPingServer: ok",!0,t):tv(n,"TestPingServer: server error",!1,t)}).catch(()=>{clearTimeout(i),tv(n,"TestPingServer: error",!1,t)})}(r.toString(),n)}else eD(2);e.G=0,e.l&&e.l.sa(t),t2(e),tq(e)}function t2(e){if(e.G=0,e.ka=[],e.l){let t=e6(e.h);(0!=t.length||0!=e.i.length)&&(I(e.ka,t),I(e.ka,e.i),e.h.i.length=0,S(e.i),e.i.length=0),e.l.ra()}}function t4(e,t,n){var r=n instanceof e9?e8(n):new e9(n);if(""!=r.g)t&&(r.g=t+"."+r.g),te(r,r.s);else{var i=a.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new e9(null);r&&e7(s,r),t&&(s.g=t),i&&te(s,i),n&&(s.l=n),r=s}return n=e.D,t=e.ya,n&&t&&tn(r,n,t),tn(r,"VER",e.la),tK(e,r),r}function t6(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new tk(e.Ca&&!e.pa?new tb({eb:n}):e.pa)).Ha(e.J),t}function t3(){}function t5(){}function t9(e,t){eo.call(this),this.g=new tU(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!x(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!x(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new ne(this)}function t8(e){eE.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(let n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function t7(){eS.call(this),this.status=1}function ne(e){this.g=e}(n=tk.prototype).Ha=function(e){this.J=e},n.ea=function(e,n,r,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);n=n?n.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():t.g(),this.v=this.o?ew(this.o):ew(t),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(n,String(e),!0),this.B=!1}catch(e){tP(this,e);return}if(e=r||"",r=new Map(this.headers),i){if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)r.set(s,i[s]);else if("function"==typeof i.keys&&"function"==typeof i.get)for(let e of i.keys())r.set(e,i.get(e));else throw Error("Unknown input type for opt_headers: "+String(i))}for(let[t,o]of(i=Array.from(r.keys()).find(e=>"content-type"==e.toLowerCase()),s=a.FormData&&e instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tA,n,void 0))||i||s||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r))this.g.setRequestHeader(t,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tM(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){tP(this,e)}},n.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,el(this,"complete"),el(this,"abort"),tL(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tL(this,!0)),tk.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?tO(this):this.bb())},n.bb=function(){tO(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<tF(this)?this.g.status:-1}catch(e){return -1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},n.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),eg(t)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=tU.prototype).la=8,n.G=1,n.connect=function(e,t,n,r){eD(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=t4(this,null,this.W),t$(this)},n.Ga=function(e){if(this.s){if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;let i=new eB(this,this.j,e),s=this.o;if(this.S&&(s?P(s=D(s),this.S):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.map&&"string"==typeof(r=r.map.__data__)){r=r.length;break t}r=void 0}if(void 0===r)break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tQ(this,i,t),tn(n=e8(this.I),"RID",e),tn(n,"CVER",22),this.D&&tn(n,"X-HTTP-Session-Id",this.D),tK(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(tx(s)))+"&"+t:this.m&&tT(n,this.m,s)),e2(this.h,i),this.Ua&&tn(n,"TYPE","init"),this.P?(tn(n,"$req",t),tn(n,"SID","null"),i.T=!0,ej(i,n,null)):ej(i,n,t),this.G=2}}else 3==this.G&&(e?tG(this,e):0==this.i.length||eZ(this.h)||tG(this))}},n.Fa=function(){if(this.u=null,tX(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=eP(h(this.ab,this),e)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,eD(10),tj(this),tX(this))},n.Za=function(){null!=this.C&&(this.C=null,tj(this),tW(this),eD(19))},n.fb=function(e){e?(this.j.info("Successfully pinged google.com"),eD(2)):(this.j.info("Failed to ping google.com"),eD(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=t3.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},t5.prototype.g=function(e,t){return new t9(e,t)},E(t9,eo),t9.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},t9.prototype.close=function(){tz(this.g)},t9.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=em(e),e=n);t.i.push(new eX(t.Ya++,e)),3==t.G&&t$(t)},t9.prototype.N=function(){this.g.l=null,delete this.j,tz(this.g),delete this.g,t9.aa.N.call(this)},E(t8,eE),E(t7,eS),E(ne,t3),ne.prototype.ua=function(){el(this.g,"a")},ne.prototype.ta=function(e){el(this.g,new t8(e))},ne.prototype.sa=function(e){el(this.g,new t7)},ne.prototype.ra=function(){el(this.g,"b")},t5.prototype.createWebChannel=t5.prototype.g,t9.prototype.send=t9.prototype.o,t9.prototype.open=t9.prototype.m,t9.prototype.close=t9.prototype.close,b=tD.createWebChannelTransport=function(){return new t5},w=tD.getStatEventTarget=function(){return eT()},v=tD.Event=eI,y=tD.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},eL.NO_ERROR=0,eL.TIMEOUT=8,eL.HTTP_ERROR=6,g=tD.ErrorCode=eL,eM.COMPLETE="complete",m=tD.EventType=eM,eb.EventType=e_,e_.OPEN="a",e_.CLOSE="b",e_.ERROR="c",e_.MESSAGE="d",eo.prototype.listen=eo.prototype.K,p=tD.WebChannel=eb,f=tD.FetchXmlHttpFactory=tb,tk.prototype.listenOnce=tk.prototype.L,tk.prototype.getLastError=tk.prototype.Ka,tk.prototype.getLastErrorCode=tk.prototype.Ba,tk.prototype.getStatus=tk.prototype.Z,tk.prototype.getResponseJson=tk.prototype.Oa,tk.prototype.getResponseText=tk.prototype.oa,tk.prototype.send=tk.prototype.ea,tk.prototype.setWithCredentials=tk.prototype.Ha,d=tD.XhrIo=tk}).apply(void 0!==tN?tN:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),_=function(e){var t,n,r=function(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}(e),i=r[0],s=r[1],a=new tR((i+s)*3/4-s),o=0,l=s>0?i-4:i;for(n=0;n<l;n+=4)t=tP[e.charCodeAt(n)]<<18|tP[e.charCodeAt(n+1)]<<12|tP[e.charCodeAt(n+2)]<<6|tP[e.charCodeAt(n+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=255&t;return 2===s&&(t=tP[e.charCodeAt(n)]<<2|tP[e.charCodeAt(n+1)]>>4,a[o++]=255&t),1===s&&(t=tP[e.charCodeAt(n)]<<10|tP[e.charCodeAt(n+1)]<<4|tP[e.charCodeAt(n+2)]>>2,a[o++]=t>>8&255,a[o++]=255&t),a},E=function(e){for(var t,n=e.length,r=n%3,i=[],s=0,a=n-r;s<a;s+=16383)i.push(function(e,t,n){for(var r,i=[],s=t;s<n;s+=3)i.push(tA[(r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+tA[r>>12&63]+tA[r>>6&63]+tA[63&r]);return i.join("")}(e,s,s+16383>a?a:s+16383));return 1===r?i.push(tA[(t=e[n-1])>>2]+tA[t<<4&63]+"=="):2===r&&i.push(tA[(t=(e[n-2]<<8)+e[n-1])>>10]+tA[t>>4&63]+tA[t<<2&63]+"="),i.join("")};for(var tA=[],tP=[],tR="undefined"!=typeof Uint8Array?Uint8Array:Array,tO="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tL=0,tM=tO.length;tL<tM;++tL)tA[tL]=tO[tL],tP[tO.charCodeAt(tL)]=tL;tP["-".charCodeAt(0)]=62,tP["_".charCodeAt(0)]=63,S=function(e,t,n,r,i){var s,a,o=8*i-r-1,l=(1<<o)-1,u=l>>1,c=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,s=f&(1<<-c)-1,f>>=-c,c+=o;c>0;s=256*s+e[t+h],h+=d,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=r;c>0;a=256*a+e[t+h],h+=d,c-=8);if(0===s)s=1-u;else{if(s===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),s-=u}return(f?-1:1)*a*Math.pow(2,s-r)},I=function(e,t,n,r,i,s){var a,o,l,u=8*s-i-1,c=(1<<u)-1,h=c>>1,d=23===i?5960464477539062e-23:0,f=r?0:s-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(o=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(a++,l/=2),a+h>=c?(o=0,a=c):a+h>=1?(o=(t*l-1)*Math.pow(2,i),a+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&o,f+=p,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;e[n+f]=255&a,f+=p,a/=256,u-=8);e[n+f-p]|=128*m};const tF="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function tB(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,tV.prototype),t}function tV(e,t,n){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return tj(e)}return tU(e,t,n)}function tU(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!tV.isEncoding(t))throw TypeError("Unknown encoding: "+t);let n=0|tK(e,t),r=tB(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ns(e,Uint8Array)){let t=new Uint8Array(e);return t$(t.buffer,t.byteOffset,t.byteLength)}return tq(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ns(e,ArrayBuffer)||e&&ns(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(ns(e,SharedArrayBuffer)||e&&ns(e.buffer,SharedArrayBuffer)))return t$(e,t,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return tV.from(r,t,n);let i=function(e){var t;if(tV.isBuffer(e)){let t=0|tG(e.length),n=tB(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?tB(0):tq(e):"Buffer"===e.type&&Array.isArray(e.data)?tq(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return tV.from(e[Symbol.toPrimitive]("string"),t,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function tz(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function tj(e){return tz(e),tB(e<0?0:0|tG(e))}function tq(e){let t=e.length<0?0:0|tG(e.length),n=tB(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function t$(e,t,n){let r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),tV.prototype),r}function tG(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function tK(e,t){if(tV.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ns(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return nn(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return nr(e).length;default:if(i)return r?-1:nn(e).length;t=(""+t).toLowerCase(),i=!0}}function tQ(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){let r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=na[e[r]];return i}(this,t,n);case"utf8":case"utf-8":return tX(this,t,n);case"ascii":return function(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":var i,s;return i=t,s=n,0===i&&s===this.length?E(this):E(this.slice(i,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){let r=e.slice(t,n),i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}(this,t,n);default:if(r)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function tH(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function tW(e,t,n,r,i){var s;if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),(s=n=+n)!=s&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return -1;n=e.length-1}else if(n<0){if(!i)return -1;n=0}if("string"==typeof t&&(t=tV.from(t,r)),tV.isBuffer(t))return 0===t.length?-1:tY(e,t,n,r,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):tY(e,[t],n,r,i);throw TypeError("val must be string, number or Buffer")}function tY(e,t,n,r,i){let s,a=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;a=2,o/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(s=n;s<o;s++)if(u(e,s)===u(t,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===l)return r*a}else -1!==r&&(s-=s-r),r=-1}else for(n+l>o&&(n=o-l),s=n;s>=0;s--){let n=!0;for(let r=0;r<l;r++)if(u(e,s+r)!==u(t,r)){n=!1;break}if(n)return s}return -1}function tX(e,t,n){n=Math.min(e.length,n);let r=[],i=t;for(;i<n;){let t=e[i],s=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,o,l;switch(a){case 1:t<128&&(s=t);break;case 2:(192&(n=e[i+1]))==128&&(l=(31&t)<<6|63&n)>127&&(s=l);break;case 3:n=e[i+1],r=e[i+2],(192&n)==128&&(192&r)==128&&(l=(15&t)<<12|(63&n)<<6|63&r)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:n=e[i+1],r=e[i+2],o=e[i+3],(192&n)==128&&(192&r)==128&&(192&o)==128&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&o)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function tJ(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function tZ(e,t,n,r,i,s){if(!tV.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function t0(e,t,n,r,i){t8(t,r,i,e,n,7);let s=Number(t&BigInt(4294967295));e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function t1(e,t,n,r,i){t8(t,r,i,e,n,7);let s=Number(t&BigInt(4294967295));e[n+7]=s,s>>=8,e[n+6]=s,s>>=8,e[n+5]=s,s>>=8,e[n+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function t2(e,t,n,r,i,s){if(n+r>e.length||n<0)throw RangeError("Index out of range")}function t4(e,t,n,r,i){return t=+t,n>>>=0,i||t2(e,t,n,4,34028234663852886e22,-34028234663852886e22),I(e,t,n,r,23,4),n+4}function t6(e,t,n,r,i){return t=+t,n>>>=0,i||t2(e,t,n,8,17976931348623157e292,-17976931348623157e292),I(e,t,n,r,52,8),n+8}tV.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),tV.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(tV.prototype,"parent",{enumerable:!0,get:function(){if(tV.isBuffer(this))return this.buffer}}),Object.defineProperty(tV.prototype,"offset",{enumerable:!0,get:function(){if(tV.isBuffer(this))return this.byteOffset}}),tV.poolSize=8192,tV.from=function(e,t,n){return tU(e,t,n)},Object.setPrototypeOf(tV.prototype,Uint8Array.prototype),Object.setPrototypeOf(tV,Uint8Array),tV.alloc=function(e,t,n){return(tz(e),e<=0)?tB(e):void 0!==t?"string"==typeof n?tB(e).fill(t,n):tB(e).fill(t):tB(e)},tV.allocUnsafe=function(e){return tj(e)},tV.allocUnsafeSlow=function(e){return tj(e)},tV.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==tV.prototype},tV.compare=function(e,t){if(ns(e,Uint8Array)&&(e=tV.from(e,e.offset,e.byteLength)),ns(t,Uint8Array)&&(t=tV.from(t,t.offset,t.byteLength)),!tV.isBuffer(e)||!tV.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},tV.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},tV.concat=function(e,t){let n;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return tV.alloc(0);if(void 0===t)for(n=0,t=0;n<e.length;++n)t+=e[n].length;let r=tV.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){let t=e[n];if(ns(t,Uint8Array))i+t.length>r.length?(tV.isBuffer(t)||(t=tV.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else if(tV.isBuffer(t))t.copy(r,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return r},tV.byteLength=tK,tV.prototype._isBuffer=!0,tV.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)tH(this,t,t+1);return this},tV.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)tH(this,t,t+3),tH(this,t+1,t+2);return this},tV.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)tH(this,t,t+7),tH(this,t+1,t+6),tH(this,t+2,t+5),tH(this,t+3,t+4);return this},tV.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?tX(this,0,e):tQ.apply(this,arguments)},tV.prototype.toLocaleString=tV.prototype.toString,tV.prototype.equals=function(e){if(!tV.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===tV.compare(this,e)},tV.prototype.inspect=function(){let e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},tF&&(tV.prototype[tF]=tV.prototype.inspect),tV.prototype.compare=function(e,t,n,r,i){if(ns(e,Uint8Array)&&(e=tV.from(e,e.offset,e.byteLength)),!tV.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return -1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;let s=i-r,a=n-t,o=Math.min(s,a),l=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<o;++e)if(l[e]!==u[e]){s=l[e],a=u[e];break}return s<a?-1:a<s?1:0},tV.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},tV.prototype.indexOf=function(e,t,n){return tW(this,e,t,n,!0)},tV.prototype.lastIndexOf=function(e,t,n){return tW(this,e,t,n,!1)},tV.prototype.write=function(e,t,n,r){var i,s,a,o,l,u,c,h;if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-t;if((void 0===n||n>d)&&(n=d),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let f=!1;for(;;)switch(r){case"hex":return function(e,t,n,r){let i;n=Number(n)||0;let s=e.length-n;r?(r=Number(r))>s&&(r=s):r=s;let a=t.length;for(r>a/2&&(r=a/2),i=0;i<r;++i){let r=parseInt(t.substr(2*i,2),16);if(r!=r)break;e[n+i]=r}return i}(this,e,t,n);case"utf8":case"utf-8":return i=t,s=n,ni(nn(e,this.length-i),this,i,s);case"ascii":case"latin1":case"binary":return a=t,o=n,ni(function(e){let t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(e),this,a,o);case"base64":return l=t,u=n,ni(nr(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,h=n,ni(function(e,t){let n,r;let i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i.push(n%256),i.push(r);return i}(e,this.length-c),this,c,h);default:if(f)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},tV.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},tV.prototype.slice=function(e,t){let n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);let r=this.subarray(e,t);return Object.setPrototypeOf(r,tV.prototype),r},tV.prototype.readUintLE=tV.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||tJ(e,t,this.length);let r=this[e],i=1,s=0;for(;++s<t&&(i*=256);)r+=this[e+s]*i;return r},tV.prototype.readUintBE=tV.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||tJ(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},tV.prototype.readUint8=tV.prototype.readUInt8=function(e,t){return e>>>=0,t||tJ(e,1,this.length),this[e]},tV.prototype.readUint16LE=tV.prototype.readUInt16LE=function(e,t){return e>>>=0,t||tJ(e,2,this.length),this[e]|this[e+1]<<8},tV.prototype.readUint16BE=tV.prototype.readUInt16BE=function(e,t){return e>>>=0,t||tJ(e,2,this.length),this[e]<<8|this[e+1]},tV.prototype.readUint32LE=tV.prototype.readUInt32LE=function(e,t){return e>>>=0,t||tJ(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},tV.prototype.readUint32BE=tV.prototype.readUInt32BE=function(e,t){return e>>>=0,t||tJ(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},tV.prototype.readBigUInt64LE=no(function(e){t7(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&ne(e,this.length-8);let r=t+256*this[++e]+65536*this[++e]+16777216*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+16777216*n;return BigInt(r)+(BigInt(i)<<BigInt(32))}),tV.prototype.readBigUInt64BE=no(function(e){t7(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&ne(e,this.length-8);let r=16777216*t+65536*this[++e]+256*this[++e]+this[++e],i=16777216*this[++e]+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),tV.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||tJ(e,t,this.length);let r=this[e],i=1,s=0;for(;++s<t&&(i*=256);)r+=this[e+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},tV.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||tJ(e,t,this.length);let r=t,i=1,s=this[e+--r];for(;r>0&&(i*=256);)s+=this[e+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},tV.prototype.readInt8=function(e,t){return(e>>>=0,t||tJ(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},tV.prototype.readInt16LE=function(e,t){e>>>=0,t||tJ(e,2,this.length);let n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},tV.prototype.readInt16BE=function(e,t){e>>>=0,t||tJ(e,2,this.length);let n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},tV.prototype.readInt32LE=function(e,t){return e>>>=0,t||tJ(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},tV.prototype.readInt32BE=function(e,t){return e>>>=0,t||tJ(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},tV.prototype.readBigInt64LE=no(function(e){t7(e>>>=0,"offset");let t=this[e],n=this[e+7];return(void 0===t||void 0===n)&&ne(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),tV.prototype.readBigInt64BE=no(function(e){t7(e>>>=0,"offset");let t=this[e],n=this[e+7];return(void 0===t||void 0===n)&&ne(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+n)}),tV.prototype.readFloatLE=function(e,t){return e>>>=0,t||tJ(e,4,this.length),S(this,e,!0,23,4)},tV.prototype.readFloatBE=function(e,t){return e>>>=0,t||tJ(e,4,this.length),S(this,e,!1,23,4)},tV.prototype.readDoubleLE=function(e,t){return e>>>=0,t||tJ(e,8,this.length),S(this,e,!0,52,8)},tV.prototype.readDoubleBE=function(e,t){return e>>>=0,t||tJ(e,8,this.length),S(this,e,!1,52,8)},tV.prototype.writeUintLE=tV.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;tZ(this,e,t,n,r,0)}let i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},tV.prototype.writeUintBE=tV.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;tZ(this,e,t,n,r,0)}let i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},tV.prototype.writeUint8=tV.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||tZ(this,e,t,1,255,0),this[t]=255&e,t+1},tV.prototype.writeUint16LE=tV.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||tZ(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},tV.prototype.writeUint16BE=tV.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||tZ(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},tV.prototype.writeUint32LE=tV.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||tZ(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},tV.prototype.writeUint32BE=tV.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||tZ(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},tV.prototype.writeBigUInt64LE=no(function(e,t=0){return t0(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),tV.prototype.writeBigUInt64BE=no(function(e,t=0){return t1(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),tV.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=Math.pow(2,8*n-1);tZ(this,e,t,n,r-1,-r)}let i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},tV.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=Math.pow(2,8*n-1);tZ(this,e,t,n,r-1,-r)}let i=n-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},tV.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||tZ(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},tV.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||tZ(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},tV.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||tZ(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},tV.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||tZ(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},tV.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||tZ(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},tV.prototype.writeBigInt64LE=no(function(e,t=0){return t0(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),tV.prototype.writeBigInt64BE=no(function(e,t=0){return t1(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),tV.prototype.writeFloatLE=function(e,t,n){return t4(this,e,t,!0,n)},tV.prototype.writeFloatBE=function(e,t,n){return t4(this,e,t,!1,n)},tV.prototype.writeDoubleLE=function(e,t,n){return t6(this,e,t,!0,n)},tV.prototype.writeDoubleBE=function(e,t,n){return t6(this,e,t,!1,n)},tV.prototype.copy=function(e,t,n,r){if(!tV.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);let i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},tV.prototype.fill=function(e,t,n,r){let i;if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!tV.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){let t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{let s=tV.isBuffer(e)?e:tV.from(e,r),a=s.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};const t3={};function t5(e,t,n){t3[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function t9(e){let t="",n=e.length,r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function t8(e,t,n,r,i,s){if(e>n||e<t){let r;let i="bigint"==typeof t?"n":"";throw r=s>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(s+1)*8}${i}`:`>= -(2${i} ** ${(s+1)*8-1}${i}) and < 2 ** ${(s+1)*8-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new t3.ERR_OUT_OF_RANGE("value",r,e)}t7(i,"offset"),(void 0===r[i]||void 0===r[i+s])&&ne(i,r.length-(s+1))}function t7(e,t){if("number"!=typeof e)throw new t3.ERR_INVALID_ARG_TYPE(t,"number",e)}function ne(e,t,n){if(Math.floor(e)!==e)throw t7(e,n),new t3.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new t3.ERR_BUFFER_OUT_OF_BOUNDS;throw new t3.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}t5("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),t5("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),t5("ERR_OUT_OF_RANGE",function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>4294967296?i=t9(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=t9(i)),i+="n"),r+=` It must be ${t}. Received ${i}`},RangeError);const nt=/[^+/0-9A-Za-z-_]/g;function nn(e,t){let n;t=t||1/0;let r=e.length,i=null,s=[];for(let a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319||a+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return s}function nr(e){return _(function(e){if((e=(e=e.split("=")[0]).trim().replace(nt,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function ni(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length)&&!(i>=e.length);++i)t[i+n]=e[i];return i}function ns(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}const na=function(){let e="0123456789abcdef",t=Array(256);for(let n=0;n<16;++n){let r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function no(e){return"undefined"==typeof BigInt?nl:e}function nl(){throw Error("BigInt not supported")}const nu="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nc.UNAUTHENTICATED=new nc(null),nc.GOOGLE_CREDENTIALS=new nc("google-credentials-uid"),nc.FIRST_PARTY=new nc("first-party-uid"),nc.MOCK_USER=new nc("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nh="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new eO("@firebase/firestore");function nf(){return nd.logLevel}function np(e,...t){if(nd.logLevel<=u.DEBUG){let n=t.map(ny);nd.debug(`Firestore (${nh}): ${e}`,...n)}}function nm(e,...t){if(nd.logLevel<=u.ERROR){let n=t.map(ny);nd.error(`Firestore (${nh}): ${e}`,...n)}}function ng(e,...t){if(nd.logLevel<=u.WARN){let n=t.map(ny);nd.warn(`Firestore (${nh}): ${e}`,...n)}}function ny(e){if("string"==typeof e)return e;try{/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return JSON.stringify(e)}catch(t){return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(e="Unexpected state"){let t=`FIRESTORE (${nh}) INTERNAL ASSERTION FAILED: `+e;throw nm(t),Error(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nb extends ep{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(nc.UNAUTHENTICATED))}shutdown(){}}class nI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nx{constructor(e){this.t=e,this.currentUser=nc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i,r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve(),i=new n_;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new n_,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{np("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?a(e):(np("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new n_)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(np("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?("string"==typeof t.accessToken||nv(),new nE(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return null===e||"string"==typeof e||nv(),new nc(e)}}class nT{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=nc.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nk{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new nT(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(nc.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let n=e=>{null!=e.error&&np("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.R;return this.R=e.token,np("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};let r=e=>{np("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){let e=this.A.getImmediate({optional:!0});e?r(e):np("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?("string"==typeof e.token||nv(),this.R=e.token,new nC(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";for(;n.length<20;){let r=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){let t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let e=0;e<40;e++)n[e]=Math.floor(256*Math.random());return n}(0);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function nA(e,t){return e<t?-1:e>t?1:0}function nP(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new nb(nw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800||e>=253402300800)throw new nb(nw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nR.fromMillis(Date.now())}static fromDate(e){return nR.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new nR(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nA(this.nanoseconds,e.nanoseconds):nA(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nO(e)}static min(){return new nO(new nR(0,0))}static max(){return new nO(new nR(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e,t,n){void 0===t?t=0:t>e.length&&nv(),void 0===n?n=e.length-t:n>e.length-t&&nv(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===nL.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof nL?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.get(r),i=t.get(r);if(n<i)return -1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nM extends nL{construct(e,t,n){return new nM(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let n of e){if(n.indexOf("//")>=0)throw new nb(nw.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new nM(t)}static emptyPath(){return new nM([])}}const nF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nB extends nL{construct(e,t,n){return new nB(e,t,n)}static isValidIdentifier(e){return nF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nB.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nB(["__name__"])}static fromServerFormat(e){let t=[],n="",r=0,i=()=>{if(0===n.length)throw new nb(nw.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""},s=!1;for(;r<e.length;){let t=e[r];if("\\"===t){if(r+1===e.length)throw new nb(nw.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new nb(nw.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?s=!s:"."!==t||s?n+=t:i(),r++}if(i(),s)throw new nb(nw.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nB(t)}static emptyPath(){return new nB([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.path=e}static fromPath(e){return new nV(nM.fromString(e))}static fromName(e){return new nV(nM.fromString(e).popFirst(5))}static empty(){return new nV(nM.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nM.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nM.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nV(new nM(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function nz(e){return e.fields.find(e=>2===e.kind)}function nj(e){return e.fields.filter(e=>2!==e.kind)}nU.UNKNOWN_ID=-1;class nq{constructor(e,t){this.fieldPath=e,this.kind=t}}class n${constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n$(0,nQ.min())}}function nG(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new nQ(nO.fromTimestamp(1e9===r?new nR(n+1,0):new nR(n,r)),nV.empty(),t)}function nK(e){return new nQ(e.readTime,e.key,-1)}class nQ{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new nQ(nO.min(),nV.empty(),-1)}static max(){return new nQ(nO.max(),nV.empty(),-1)}}function nH(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=nV.comparator(e.documentKey,t.documentKey))?n:nA(e.largestBatchId,t.largestBatchId)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nX(e){if(e.code!==nw.FAILED_PRECONDITION||e.message!==nW)throw e;np("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nJ{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nJ((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof nJ?t:nJ.resolve(t)}catch(e){return nJ.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):nJ.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):nJ.reject(t)}static resolve(e){return new nJ((t,n)=>{t(e)})}static reject(e){return new nJ((t,n)=>{n(e)})}static waitFor(e){return new nJ((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=nJ.resolve(!1);for(let n of e)t=t.next(e=>e?nJ.resolve(e):n());return t}static forEach(e,t){let n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new nJ((n,r)=>{let i=e.length,s=Array(i),a=0;for(let o=0;o<i;o++){let l=o;t(e[l]).next(e=>{s[l]=e,++a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new nJ((n,r)=>{let i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new n_,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new n4(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{let n=n8(t.target.error);this.V.reject(new n4(e,n))}}static open(e,t,n,r){try{return new nZ(t,e.transaction(r,n))}catch(e){throw new n4(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(np("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){return new n3(this.transaction.objectStore(e))}}class n0{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===n0.S(ec())&&nm("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return np("SimpleDb","Removing database:",e),n5(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ef())return!1;if(n0.C())return!0;let e=ec(),t=n0.S(e),n=n1(e);return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||0<t&&t<10||0<n&&n<4.5)}static C(){var e;return void 0!==B&&"YES"===(null===(e=B.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(t?t[1].split("_").slice(0,2).join("."):"-1")}async M(e){return this.db||(np("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{t(e.target.result)},r.onblocked=()=>{n(new n4(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{let r=t.target.error;"VersionError"===r.name?n(new nb(nw.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new nb(nw.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new n4(e,r))},r.onupgradeneeded=e=>{np("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);let t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next(()=>{np("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){let i="readonly"===t,s=0;for(;;){++s;try{this.db=await this.M(e);let t=nZ.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next(e=>(t.g(),e)).catch(e=>(t.abort(e),nJ.reject(e))).toPromise();return s.catch(()=>{}),await t.m,s}catch(t){let e="FirebaseError"!==t.name&&s<3;if(np("SimpleDb","Transaction failed with error:",t.message,"Retrying:",e),this.close(),!e)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function n1(e){let t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")}class n2{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return n5(this.B.delete())}}class n4 extends nb{constructor(e,t){super(nw.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function n6(e){return"IndexedDbTransactionError"===e.name}class n3{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(np("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(np("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),n5(n)}add(e){return np("SimpleDb","ADD",this.store.name,e,e),n5(this.store.add(e))}get(e){return n5(this.store.get(e)).next(t=>(void 0===t&&(t=null),np("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return np("SimpleDb","DELETE",this.store.name,e),n5(this.store.delete(e))}count(){return np("SimpleDb","COUNT",this.store.name),n5(this.store.count())}U(e,t){let n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){let e=r.getAll(n.range);return new nJ((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{let e=this.cursor(n),t=[];return this.W(e,(e,n)=>{t.push(n)}).next(()=>t)}}G(e,t){let n=this.store.getAll(e,null===t?void 0:t);return new nJ((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}j(e,t){np("SimpleDb","DELETE ALL",this.store.name);let n=this.options(e,t);n.H=!1;let r=this.cursor(n);return this.W(r,(e,t,n)=>n.delete())}J(e,t){let n;t?n=e:(n={},t=e);let r=this.cursor(n);return this.W(r,t)}Y(e){let t=this.cursor({});return new nJ((n,r)=>{t.onerror=e=>{r(n8(e.target.error))},t.onsuccess=t=>{let r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}W(e,t){let n=[];return new nJ((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{let i=e.target.result;if(!i)return void r();let s=new n2(i),a=t(i.primaryKey,i.value,s);if(a instanceof nJ){let e=a.catch(e=>(s.done(),nJ.reject(e)));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}}).next(()=>nJ.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function n5(e){return new nJ((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{n(n8(e.target.error))}})}let n9=!1;function n8(e){let t=n0.S(ec());if(t>=12.2&&t<13){let t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){let e=new nb("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return n9||(n9=!0,setTimeout(()=>{throw e},0)),e}}return e}class n7{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){np("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{np("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(e){n6(e)?np("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await nX(e)}await this.X(6e4)})}}class re{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){let n=new Set,r=t,i=!0;return nJ.doWhile(()=>!0===i&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return np("IndexBackfiller",`Processing collection: ${t}`),this.ne(e,t,r).next(e=>{r-=e,n.add(t)});i=!1})).next(()=>t-r)}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{let i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(r,n)).next(n=>(np("IndexBackfiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>i.size)}))}re(e,t){let n=e;return t.changes.forEach((e,t)=>{let r=nK(t);nH(r,n)>0&&(n=r)}),new nQ(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}function rn(e){return null==e}function rr(e){return 0===e&&1/e==-1/0}function ri(e){return"number"==typeof e&&Number.isInteger(e)&&!rr(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t+="\x01\x01"),t=function(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=r}}return n}(e.get(n),t);return t+"\x01\x01"}function ra(e){let t=e.length;if(t>=2||nv(),2===t)return"\x01"===e.charAt(0)&&"\x01"===e.charAt(1)||nv(),nM.emptyPath();let n=t-2,r=[],i="";for(let s=0;s<t;){let t=e.indexOf("\x01",s);switch((t<0||t>n)&&nv(),e.charAt(t+1)){case"\x01":let a;let o=e.substring(s,t);0===i.length?a=o:(i+=o,a=i,i=""),r.push(a);break;case"\x10":i+=e.substring(s,t)+"\0";break;case"\x11":i+=e.substring(s,t+1);break;default:nv()}s=t+2}return new nM(r)}rt.oe=-1;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=["userId","batchId"],rl={},ru=["prefixPath","collectionGroup","readTime","documentId"],rc=["prefixPath","collectionGroup","documentId"],rh=["collectionGroup","readTime","prefixPath","documentId"],rd=["canonicalId","targetId"],rf=["targetId","path"],rp=["path","targetId"],rm=["collectionId","parent"],rg=["indexId","uid"],ry=["uid","sequenceNumber"],rv=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rw=["indexId","uid","orderedDocumentKey"],rb=["userId","collectionPath","documentId"],r_=["userId","collectionPath","largestBatchId"],rE=["userId","collectionGroup","largestBatchId"],rS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rI=[...rS,"documentOverlays"],rx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rT=[...rx,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk extends nY{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function rC(e,t){return n0.F(e._e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function rD(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function rA(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,t){this.comparator=e,this.root=t||rO.EMPTY}insert(e,t){return new rP(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rO.BLACK,null,null))}remove(e){return new rP(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rO.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){let e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rR(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rR(this.root,e,this.comparator,!1)}getReverseIterator(){return new rR(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rR(this.root,e,this.comparator,!0)}}class rR{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rO{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:rO.RED,this.left=null!=r?r:rO.EMPTY,this.right=null!=i?i:rO.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new rO(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}removeMin(){if(this.left.isEmpty())return rO.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let n,r=this;if(0>t(e,r.key))r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return rO.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,rO.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,rO.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nv();let e=this.left.check();if(e!==this.right.check())throw nv();return e+(this.isRed()?0:1)}}rO.EMPTY=null,rO.RED=!0,rO.BLACK=!1,rO.EMPTY=new class{constructor(){this.size=0}get key(){throw nv()}get value(){throw nv()}get color(){throw nv()}get left(){throw nv()}get right(){throw nv()}copy(e,t,n,r,i){return this}insert(e,t,n){return new rO(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.comparator=e,this.data=new rP(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rM(this.data.getIterator())}getIteratorFrom(e){return new rM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof rL)||this.size!==e.size)return!1;let t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new rL(this.comparator);return t.data=e,t}}class rM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rF(e){return e.hasNext()?e.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e){this.fields=e,e.sort(nB.comparator)}static empty(){return new rB([])}unionWith(e){let t=new rL(nB.comparator);for(let e of this.fields)t=t.add(e);for(let n of e)t=t.add(n);return new rB(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nP(this.fields,e.fields,(e,t)=>e.isEqual(t))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.binaryString=e}static fromBase64String(e){return new rU(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new rV("Invalid base64 string: "+e):e}}(e))}static fromUint8Array(e){return new rU(function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nA(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rU.EMPTY_BYTE_STRING=new rU("");const rz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rj(e){if(e||nv(),"string"==typeof e){let t=0,n=rz.exec(e);if(n||nv(),n[1]){let e=n[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:rq(e.seconds),nanos:rq(e.nanos)}}function rq(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function r$(e){return"string"==typeof e?rU.fromBase64String(e):rU.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rG(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function rK(e){let t=e.mapValue.fields.__previous_value__;return rG(t)?rK(t):t}function rQ(e){let t=rj(e.mapValue.fields.__local_write_time__.timestampValue);return new nR(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class rW{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rW("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof rW&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rY={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rX={nullValue:"NULL_VALUE"};function rJ(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rG(e)?4:it(e)?9007199254740991:10:nv()}function rZ(e,t){if(e===t)return!0;let n=rJ(e);if(n!==rJ(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return rQ(e).isEqual(rQ(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=rj(e.timestampValue),r=rj(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r$(e.bytesValue).isEqual(r$(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return rq(e.geoPointValue.latitude)===rq(t.geoPointValue.latitude)&&rq(e.geoPointValue.longitude)===rq(t.geoPointValue.longitude);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return rq(e.integerValue)===rq(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let n=rq(e.doubleValue),r=rq(t.doubleValue);return n===r?rr(n)===rr(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return nP(e.arrayValue.values||[],t.arrayValue.values||[],rZ);case 10:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(rN(n)!==rN(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!rZ(n[e],r[e])))return!1;return!0}(e,t);default:return nv()}}function r0(e,t){return void 0!==(e.values||[]).find(e=>rZ(e,t))}function r1(e,t){if(e===t)return 0;let n=rJ(e),r=rJ(t);if(n!==r)return nA(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nA(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=rq(e.integerValue||e.doubleValue),r=rq(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return r2(e.timestampValue,t.timestampValue);case 4:return r2(rQ(e),rQ(t));case 5:return nA(e.stringValue,t.stringValue);case 6:return function(e,t){let n=r$(e),r=r$(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){let t=nA(n[e],r[e]);if(0!==t)return t}return nA(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=nA(rq(e.latitude),rq(t.latitude));return 0!==n?n:nA(rq(e.longitude),rq(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=r1(n[e],r[e]);if(t)return t}return nA(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===rY.mapValue&&t===rY.mapValue)return 0;if(e===rY.mapValue)return 1;if(t===rY.mapValue)return -1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){let t=nA(r[e],s[e]);if(0!==t)return t;let a=r1(n[r[e]],i[s[e]]);if(0!==a)return a}return nA(r.length,s.length)}(e.mapValue,t.mapValue);default:throw nv()}}function r2(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return nA(e,t);let n=rj(e),r=rj(t),i=nA(n.seconds,r.seconds);return 0!==i?i:nA(n.nanos,r.nanos)}function r4(e){var t,n;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){let t=rj(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?r$(e.bytesValue).toBase64():"referenceValue"in e?(t=e.referenceValue,nV.fromName(t).toString()):"geoPointValue"in e?(n=e.geoPointValue,`geo(${n.latitude},${n.longitude})`):"arrayValue"in e?function(e){let t="[",n=!0;for(let r of e.values||[])n?n=!1:t+=",",t+=r4(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){let t=Object.keys(e.fields||{}).sort(),n="{",r=!0;for(let i of t)r?r=!1:n+=",",n+=`${i}:${r4(e.fields[i])}`;return n+"}"}(e.mapValue):nv()}function r6(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function r3(e){return!!e&&"integerValue"in e}function r5(e){return!!e&&"arrayValue"in e}function r9(e){return!!e&&"nullValue"in e}function r8(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function r7(e){return!!e&&"mapValue"in e}function ie(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return rD(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ie(n)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ie(e.arrayValue.values[n]);return t}return Object.assign({},e)}function it(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ir(e,t){let n=r1(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function ii(e,t){let n=r1(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.value=e}static empty(){return new is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(!r7(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ie(t)}setAll(e){let t=nB.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ie(e):r.push(i.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());r7(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rZ(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];r7(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){for(let r of(rD(t,(t,n)=>e[t]=n),n))delete e[r]}clone(){return new is(ie(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ia(e,0,nO.min(),nO.min(),nO.min(),is.empty(),0)}static newFoundDocument(e,t,n,r){return new ia(e,1,t,nO.min(),n,r,0)}static newNoDocument(e,t){return new ia(e,2,t,nO.min(),nO.min(),is.empty(),0)}static newUnknownDocument(e,t){return new ia(e,3,t,nO.min(),nO.min(),is.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(nO.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nO.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ia&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ia(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t){this.position=e,this.inclusive=t}}function il(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let s=t[i],a=e.position[i];if(r=s.field.isKeyField()?nV.comparator(nV.fromName(a.referenceValue),n.key):r1(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function iu(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!rZ(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t="asc"){this.field=e,this.dir=t}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{}class id extends ih{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ib(e,t,n):"array-contains"===t?new iI(e,n):"in"===t?new ix(e,n):"not-in"===t?new iT(e,n):"array-contains-any"===t?new ik(e,n):new id(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new i_(e,n):new iE(e,n)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(r1(t,this.value)):null!==t&&rJ(this.value)===rJ(t)&&this.matchesComparison(r1(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nv()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ip extends ih{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ip(e,t)}matches(e){return im(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function im(e){return"and"===e.op}function ig(e){return"or"===e.op}function iy(e){return iv(e)&&im(e)}function iv(e){for(let t of e.filters)if(t instanceof ip)return!1;return!0}function iw(e,t){let n=e.filters.concat(t);return ip.create(n,e.op)}class ib extends id{constructor(e,t,n){super(e,t,n),this.key=nV.fromName(n.referenceValue)}matches(e){let t=nV.comparator(e.key,this.key);return this.matchesComparison(t)}}class i_ extends id{constructor(e,t){super(e,"in",t),this.keys=iS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iE extends id{constructor(e,t){super(e,"not-in",t),this.keys=iS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function iS(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>nV.fromName(e.referenceValue))}class iI extends id{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return r5(t)&&r0(t.arrayValue,this.value)}}class ix extends id{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&r0(this.value.arrayValue,t)}}class iT extends id{constructor(e,t){super(e,"not-in",t)}matches(e){if(r0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&!r0(this.value.arrayValue,t)}}class ik extends id{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!r5(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>r0(this.value.arrayValue,e))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,t=null,n=[],r=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function iN(e,t=null,n=[],r=[],i=null,s=null,a=null){return new iC(e,t,n,r,i,s,a)}function iD(e){if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:"+e.filters.map(e=>(function e(t){if(t instanceof id)return t.field.canonicalString()+t.op.toString()+r4(t.value);if(iy(t))return t.filters.map(t=>e(t)).join(",");{let n=t.filters.map(t=>e(t)).join(",");return`${t.op}(${n})`}})(e)).join(",")+"|ob:"+e.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),rn(e.limit)||(t+="|l:"+e.limit),e.startAt&&(t+="|lb:"+(e.startAt.inclusive?"b:":"a:")+e.startAt.position.map(e=>r4(e)).join(",")),e.endAt&&(t+="|ub:"+(e.endAt.inclusive?"a:":"b:")+e.endAt.position.map(e=>r4(e)).join(",")),e.ue=t}return e.ue}function iA(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++){var n,r;if(n=e.orderBy[i],r=t.orderBy[i],!(n.dir===r.dir&&n.field.isEqual(r.field)))return!1}if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!function e(t,n){return t instanceof id?n instanceof id&&t.op===n.op&&t.field.isEqual(n.field)&&rZ(t.value,n.value):t instanceof ip?n instanceof ip&&t.op===n.op&&t.filters.length===n.filters.length&&t.filters.reduce((t,r,i)=>t&&e(r,n.filters[i]),!0):void nv()}(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!iu(e.startAt,t.startAt)&&iu(e.endAt,t.endAt)}function iP(e){return nV.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function iR(e,t){return e.filters.filter(e=>e instanceof id&&e.field.isEqual(t))}function iO(e,t,n){let r=rX,i=!0;for(let n of iR(e,t)){let e=rX,t=!0;switch(n.op){case"<":case"<=":var s;e="nullValue"in(s=n.value)?rX:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?r6(rW.empty(),nV.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?{mapValue:{}}:nv();break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,t=!1;break;case"!=":case"not-in":e=rX}0>ir({value:r,inclusive:i},{value:e,inclusive:t})&&(r=e,i=t)}if(null!==n){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=n.position[s];0>ir({value:r,inclusive:i},{value:e,inclusive:n.inclusive})&&(r=e,i=n.inclusive);break}}return{value:r,inclusive:i}}function iL(e,t,n){let r=rY,i=!0;for(let n of iR(e,t)){let e=rY,t=!0;switch(n.op){case">=":case">":var s;e="nullValue"in(s=n.value)?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?r6(rW.empty(),nV.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?{mapValue:{}}:"mapValue"in s?rY:nv(),t=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,t=!1;break;case"!=":case"not-in":e=rY}ii({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=n.position[s];ii({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t=null,n=[],r=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function iF(e){return new iM(e)}function iB(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function iV(e){return null!==e.collectionGroup}function iU(e){if(null===e.ce){let t;e.ce=[];let n=new Set;for(let t of e.explicitOrderBy)e.ce.push(t),n.add(t.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(t=new rL(nB.comparator),e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t).forEach(t=>{n.has(t.canonicalString())||t.isKeyField()||e.ce.push(new ic(t,r))}),n.has(nB.keyField().canonicalString())||e.ce.push(new ic(nB.keyField(),r))}return e.ce}function iz(e){return e.le||(e.le=function(e,t){if("F"===e.limitType)return iN(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new ic(e.field,t)});let n=e.endAt?new io(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new io(e.startAt.position,e.startAt.inclusive):null;return iN(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(e,iU(e))),e.le}function ij(e,t){let n=e.filters.concat([t]);return new iM(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function iq(e,t,n){return new iM(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function i$(e,t){return iA(iz(e),iz(t))&&e.limitType===t.limitType}function iG(e){return`${iD(iz(e))}|lt:${e.limitType}`}function iK(e){var t;let n;return`Query(target=${n=(t=iz(e)).path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(e=>(function e(t){return t instanceof id?`${t.field.canonicalString()} ${t.op} ${r4(t.value)}`:t instanceof ip?t.op.toString()+" {"+t.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),rn(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),t.startAt&&(n+=", startAt: "+(t.startAt.inclusive?"b:":"a:")+t.startAt.position.map(e=>r4(e)).join(",")),t.endAt&&(n+=", endAt: "+(t.endAt.inclusive?"a:":"b:")+t.endAt.position.map(e=>r4(e)).join(",")),`Target(${n})`}; limitType=${e.limitType})`}function iQ(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):nV.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(let n of iU(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(!e.startAt||!!function(e,t,n){let r=il(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,iU(e),t))&&(!e.endAt||!!function(e,t,n){let r=il(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,iU(e),t))}function iH(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function iW(e){return(t,n)=>{let r=!1;for(let i of iU(e)){let e=function(e,t,n){let r=e.field.isKeyField()?nV.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?r1(r,i):nv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return -1*r;default:return nv()}}(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return void 0!==this.get(e)}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){rD(this.inner,(t,n)=>{for(let[t,r]of n)e(t,r)})}isEmpty(){return rA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iX=new rP(nV.comparator),iJ=new rP(nV.comparator);function iZ(...e){let t=iJ;for(let n of e)t=t.insert(n.key,n);return t}function i0(e){let t=iJ;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function i1(){return new iY(e=>e.toString(),(e,t)=>e.isEqual(t))}const i2=new rP(nV.comparator),i4=new rL(nV.comparator);function i6(...e){let t=i4;for(let n of e)t=t.add(n);return t}const i3=new rL(nA);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rr(t)?"-0":t}}function i9(e){return{integerValue:""+e}}function i8(e,t){return ri(t)?i9(t):i5(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(){this._=void 0}}function se(e,t){return e instanceof sa?r3(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}class st extends i7{}class sn extends i7{constructor(e){super(),this.elements=e}}function sr(e,t){let n=sl(t);for(let t of e.elements)n.some(e=>rZ(e,t))||n.push(t);return{arrayValue:{values:n}}}class si extends i7{constructor(e){super(),this.elements=e}}function ss(e,t){let n=sl(t);for(let t of e.elements)n=n.filter(e=>!rZ(e,t));return{arrayValue:{values:n}}}class sa extends i7{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function so(e){return rq(e.integerValue||e.doubleValue)}function sl(e){return r5(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,t){this.field=e,this.transform=t}}class sc{constructor(e,t){this.version=e,this.transformResults=t}}class sh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sh}static exists(e){return new sh(void 0,e)}static updateTime(e){return new sh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class sf{}function sp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new sE(e.key,sh.none()):new sy(e.key,e.data,sh.none());{let n=e.data,r=is.empty(),i=new rL(nB.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new sv(e.key,r,new rB(i.toArray()),sh.none())}}function sm(e,t,n,r){return e instanceof sy?function(e,t,n,r){if(!sd(e.precondition,t))return n;let i=e.value.clone(),s=s_(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof sv?function(e,t,n,r){if(!sd(e.precondition,t))return n;let i=s_(e.fieldTransforms,r,t),s=t.data;return(s.setAll(sw(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n)?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):sd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}function sg(e,t){var n,r;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||!(!n||!r)&&nP(n,r,(e,t)=>{var n,r;return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof sn&&r instanceof sn||n instanceof si&&r instanceof si?nP(n.elements,r.elements,rZ):n instanceof sa&&r instanceof sa?rZ(n.Pe,r.Pe):n instanceof st&&r instanceof st)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class sy extends sf{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class sv extends sf{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function sw(e){let t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}}),t}function sb(e,t,n){var r;let i=new Map;e.length===n.length||nv();for(let s=0;s<n.length;s++){let a=e[s],o=a.transform,l=t.data.field(a.field);i.set(a.field,(r=n[s],o instanceof sn?sr(o,l):o instanceof si?ss(o,l):r))}return i}function s_(e,t,n){let r=new Map;for(let i of e){let e=i.transform,s=n.data.field(i.field);r.set(i.field,e instanceof st?function(e,t){let n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&rG(t)&&(t=rK(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(t,s):e instanceof sn?sr(e,s):e instanceof si?ss(e,s):function(e,t){let n=se(e,t),r=so(n)+so(e.Pe);return r3(n)&&r3(e.Pe)?i9(r):i5(e.serializer,r)}(e,s))}return r}class sE extends sf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sS extends sf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let i=this.mutations[t];if(i.key.isEqual(e.key)){var r;r=n[t],i instanceof sy?function(e,t,n){let r=e.value.clone(),i=sb(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(i,e,r):i instanceof sv?function(e,t,n){if(!sd(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=sb(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(sw(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(i,e,r):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,r)}}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=sm(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=sm(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=i1();return this.mutations.forEach(r=>{let i=e.get(r.key),s=i.overlayedDocument,a=this.applyToLocalView(s,i.mutatedFields),o=sp(s,a=t.has(r.key)?null:a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(nO.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),i6())}isEqual(e){return this.batchId===e.batchId&&nP(this.mutations,e.mutations,(e,t)=>sg(e,t))&&nP(this.baseMutations,e.baseMutations,(e,t)=>sg(e,t))}}class sx{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){e.mutations.length===n.length||nv();let r=i2,i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new sx(e,t,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,t){this.count=e,this.unchangedNames=t}}function sC(e){switch(e){default:return nv();case nw.CANCELLED:case nw.UNKNOWN:case nw.DEADLINE_EXCEEDED:case nw.RESOURCE_EXHAUSTED:case nw.INTERNAL:case nw.UNAVAILABLE:case nw.UNAUTHENTICATED:return!1;case nw.INVALID_ARGUMENT:case nw.NOT_FOUND:case nw.ALREADY_EXISTS:case nw.PERMISSION_DENIED:case nw.FAILED_PRECONDITION:case nw.ABORTED:case nw.OUT_OF_RANGE:case nw.UNIMPLEMENTED:case nw.DATA_LOSS:return!0}}function sN(e){if(void 0===e)return nm("GRPC error has no .code"),nw.UNKNOWN;switch(e){case x.OK:return nw.OK;case x.CANCELLED:return nw.CANCELLED;case x.UNKNOWN:return nw.UNKNOWN;case x.DEADLINE_EXCEEDED:return nw.DEADLINE_EXCEEDED;case x.RESOURCE_EXHAUSTED:return nw.RESOURCE_EXHAUSTED;case x.INTERNAL:return nw.INTERNAL;case x.UNAVAILABLE:return nw.UNAVAILABLE;case x.UNAUTHENTICATED:return nw.UNAUTHENTICATED;case x.INVALID_ARGUMENT:return nw.INVALID_ARGUMENT;case x.NOT_FOUND:return nw.NOT_FOUND;case x.ALREADY_EXISTS:return nw.ALREADY_EXISTS;case x.PERMISSION_DENIED:return nw.PERMISSION_DENIED;case x.FAILED_PRECONDITION:return nw.FAILED_PRECONDITION;case x.ABORTED:return nw.ABORTED;case x.OUT_OF_RANGE:return nw.OUT_OF_RANGE;case x.UNIMPLEMENTED:return nw.UNIMPLEMENTED;case x.DATA_LOSS:return nw.DATA_LOSS;default:return nv()}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(){return new TextEncoder}(T=x||(x={}))[T.OK=0]="OK",T[T.CANCELLED=1]="CANCELLED",T[T.UNKNOWN=2]="UNKNOWN",T[T.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",T[T.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",T[T.NOT_FOUND=5]="NOT_FOUND",T[T.ALREADY_EXISTS=6]="ALREADY_EXISTS",T[T.PERMISSION_DENIED=7]="PERMISSION_DENIED",T[T.UNAUTHENTICATED=16]="UNAUTHENTICATED",T[T.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",T[T.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",T[T.ABORTED=10]="ABORTED",T[T.OUT_OF_RANGE=11]="OUT_OF_RANGE",T[T.UNIMPLEMENTED=12]="UNIMPLEMENTED",T[T.INTERNAL=13]="INTERNAL",T[T.UNAVAILABLE=14]="UNAVAILABLE",T[T.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=new c([4294967295,4294967295],0);function sP(e){let t=sD().encode(e),n=new h;return n.update(t),new Uint8Array(n.digest())}function sR(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new c([n,r],0),new c([i,s],0)]}class sO{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new sL(`Invalid padding: ${t}`);if(n<0||e.length>0&&0===this.hashCount)throw new sL(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new sL(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=c.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(c.fromNumber(n)));return 1===r.compare(sA)&&(r=new c([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;let[t,n]=sR(sP(e));for(let e=0;e<this.hashCount;e++){let r=this.Ee(t,n,e);if(!this.de(r))return!1}return!0}static create(e,t,n){let r=new sO(new Uint8Array(Math.ceil(e/8)),e%8==0?0:8-e%8,t);return n.forEach(e=>r.insert(e)),r}insert(e){if(0===this.Ie)return;let[t,n]=sR(sP(e));for(let e=0;e<this.hashCount;e++){let r=this.Ee(t,n,e);this.Ae(r)}}Ae(e){let t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class sL extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){let r=new Map;return r.set(e,sF.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new sM(nO.min(),r,new rP(nA),iX,i6())}}class sF{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new sF(n,t,i6(),i6(),i6())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class sV{constructor(e,t){this.targetId=e,this.me=t}}class sU{constructor(e,t,n=rU.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class sz{constructor(){this.fe=0,this.ge=s$(),this.pe=rU.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=i6(),t=i6(),n=i6();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:nv()}}),new sF(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=s$()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,this.fe>=0||nv()}Ne(){this.we=!0,this.ye=!0}}class sj{constructor(e){this.Le=e,this.Be=new Map,this.ke=iX,this.qe=sq(),this.Qe=new rP(nA)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:nv()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){let t=e.targetId,n=e.me.count,r=this.Je(t);if(r){let i=r.target;if(iP(i)){if(0===n){let e=new nV(i.path);this.Ue(t,e,ia.newNoDocument(e,nO.min()))}else 1===n||nv()}else{let r=this.Ye(t);if(r!==n){let n=this.Ze(e),i=n?this.Xe(n,e,r):1;0!==i&&(this.je(t),this.Qe=this.Qe.insert(t,2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){let t,n;let r=e.me.unchangedNames;if(!r||!r.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=r;try{t=r$(i).toUint8Array()}catch(e){if(e instanceof rV)return ng("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{n=new sO(t,s,a)}catch(e){return ng(e instanceof sL?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===n.Ie?null:n}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){let n=this.Le.getRemoteKeysForTarget(t),r=0;return n.forEach(n=>{let i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((n,r)=>{let i=this.Je(r);if(i){if(n.current&&iP(i.target)){let t=new nV(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,ia.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}});let n=i6();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{let t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));let r=new sM(e,t,this.Qe,this.ke,n);return this.ke=iX,this.qe=sq(),this.Qe=new rP(nA),r}$e(e,t){if(!this.ze(e))return;let n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new sz,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new rL(nA),this.qe=this.qe.insert(e,t)),t}ze(e){let t=null!==this.Je(e);return t||np("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sz),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function sq(){return new rP(nV.comparator)}function s$(){return new rP(nV.comparator)}const sG={asc:"ASCENDING",desc:"DESCENDING"},sK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sQ={and:"AND",or:"OR"};class sH{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sW(e,t){return e.useProto3Json||rn(t)?t:{value:t}}function sY(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function sX(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function sJ(e){return e||nv(),nO.fromTimestamp(function(e){let t=rj(e);return new nR(t.seconds,t.nanos)}(e))}function sZ(e,t){return s0(e,t).canonicalString()}function s0(e,t){let n=new nM(["projects",e.projectId,"databases",e.database]).child("documents");return void 0===t?n:n.child(t)}function s1(e){let t=nM.fromString(e);return ao(t)||nv(),t}function s2(e,t){return sZ(e.databaseId,t.path)}function s4(e,t){let n=s1(t);if(n.get(1)!==e.databaseId.projectId)throw new nb(nw.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new nb(nw.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new nV(s9(n))}function s6(e,t){return sZ(e.databaseId,t)}function s3(e){let t=s1(e);return 4===t.length?nM.emptyPath():s9(t)}function s5(e){return new nM(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function s9(e){return e.length>4&&"documents"===e.get(4)||nv(),e.popFirst(5)}function s8(e,t,n){return{name:s2(e,t),fields:n.value.mapValue.fields}}function s7(e,t,n){let r=s4(e,t.name),i=sJ(t.updateTime),s=t.createTime?sJ(t.createTime):nO.min(),a=new is({mapValue:{fields:t.fields}}),o=ia.newFoundDocument(r,i,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function ae(e,t){var n;let r;if(t instanceof sy)r={update:s8(e,t.key,t.value)};else if(t instanceof sE)r={delete:s2(e,t.key)};else if(t instanceof sv)r={update:s8(e,t.key,t.data),updateMask:function(e){let t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}(t.fieldMask)};else{if(!(t instanceof sS))return nv();r={verify:s2(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(e=>(function(e,t){let n=t.transform;if(n instanceof st)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof sn)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof si)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof sa)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw nv()})(0,e))),t.precondition.isNone||(r.currentDocument=void 0!==(n=t.precondition).updateTime?{updateTime:sY(e,n.updateTime.toTimestamp())}:void 0!==n.exists?{exists:n.exists}:nv()),r}function at(e,t){var n;let r=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?sh.updateTime(sJ(n.updateTime)):void 0!==n.exists?sh.exists(n.exists):sh.none():sh.none(),i=t.updateTransforms?t.updateTransforms.map(t=>{let n;return n=null,"setToServerValue"in t?("REQUEST_TIME"===t.setToServerValue||nv(),n=new st):"appendMissingElements"in t?n=new sn(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new si(t.removeAllFromArray.values||[]):"increment"in t?n=new sa(e,t.increment):nv(),new su(nB.fromServerFormat(t.fieldPath),n)}):[];if(t.update){t.update.name;let n=s4(e,t.update.name),s=new is({mapValue:{fields:t.update.fields}});return t.updateMask?new sv(n,s,new rB((t.updateMask.fieldPaths||[]).map(e=>nB.fromServerFormat(e))),r,i):new sy(n,s,r,i)}return t.delete?new sE(s4(e,t.delete),r):t.verify?new sS(s4(e,t.verify),r):nv()}function an(e,t){return{documents:[s6(e,t.path)]}}function ar(e,t){var n,r;let i;let s={structuredQuery:{}},a=t.path;null!==t.collectionGroup?(i=a,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=a.popLast(),s.structuredQuery.from=[{collectionId:a.lastSegment()}]),s.parent=s6(e,i);let o=function(e){if(0!==e.length)return function e(t){return t instanceof id?function(e){if("=="===e.op){if(r8(e.value))return{unaryFilter:{field:as(e.field),op:"IS_NAN"}};if(r9(e.value))return{unaryFilter:{field:as(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(r8(e.value))return{unaryFilter:{field:as(e.field),op:"IS_NOT_NAN"}};if(r9(e.value))return{unaryFilter:{field:as(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:as(e.field),op:sK[e.op],value:e.value}}}(t):t instanceof ip?function(t){let n=t.getFilters().map(t=>e(t));return 1===n.length?n[0]:{compositeFilter:{op:sQ[t.op],filters:n}}}(t):nv()}(ip.create(e,"and"))}(t.filters);o&&(s.structuredQuery.where=o);let l=function(e){if(0!==e.length)return e.map(e=>({field:as(e.field),direction:sG[e.dir]}))}(t.orderBy);l&&(s.structuredQuery.orderBy=l);let u=sW(e,t.limit);return null!==u&&(s.structuredQuery.limit=u),t.startAt&&(s.structuredQuery.startAt={before:(n=t.startAt).inclusive,values:n.position}),t.endAt&&(s.structuredQuery.endAt={before:!(r=t.endAt).inclusive,values:r.position}),{_t:s,parent:i}}function ai(e){var t;let n,r=s3(e.parent),i=e.structuredQuery,s=i.from?i.from.length:0,a=null;if(s>0){1===s||nv();let e=i.from[0];e.allDescendants?a=e.collectionId:r=r.child(e.collectionId)}let o=[];i.where&&(o=function(e){let t=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let t=aa(e.unaryFilter.field);return id.create(t,"==",{doubleValue:NaN});case"IS_NULL":let n=aa(e.unaryFilter.field);return id.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=aa(e.unaryFilter.field);return id.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=aa(e.unaryFilter.field);return id.create(i,"!=",{nullValue:"NULL_VALUE"});default:return nv()}}(t):void 0!==t.fieldFilter?id.create(aa(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nv()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==t.compositeFilter?ip.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return nv()}}(t.compositeFilter.op)):nv()}(e);return t instanceof ip&&iy(t)?t.getFilters():[t]}(i.where));let l=[];i.orderBy&&(l=i.orderBy.map(e=>new ic(aa(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let u=null;i.limit&&(u=rn(n="object"==typeof(t=i.limit)?t.value:t)?null:n);let c=null;i.startAt&&(c=function(e){let t=!!e.before;return new io(e.values||[],t)}(i.startAt));let h=null;return i.endAt&&(h=function(e){let t=!e.before;return new io(e.values||[],t)}(i.endAt)),new iM(r,a,l,o,u,"F",c,h)}function as(e){return{fieldPath:e.canonicalString()}}function aa(e){return nB.fromServerFormat(e.fieldPath)}function ao(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t,n,r,i=nO.min(),s=nO.min(),a=rU.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new al(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new al(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e){this.ct=e}}function ac(e,t){let n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ah(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument()){var i;r.document={name:s2(i=e.ct,t.key),fields:t.data.value.mapValue.fields,updateTime:sY(i,t.version.toTimestamp()),createTime:sY(i,t.createTime.toTimestamp())}}else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ad(t.version)};else{if(!t.isUnknownDocument())return nv();r.unknownDocument={path:n.path.toArray(),version:ad(t.version)}}return r}function ah(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ad(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function af(e){let t=new nR(e.seconds,e.nanoseconds);return nO.fromTimestamp(t)}function ap(e,t){let n=(t.baseMutations||[]).map(t=>at(e.ct,t));for(let e=0;e<t.mutations.length-1;++e){let n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){let r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}let r=t.mutations.map(t=>at(e.ct,t)),i=nR.fromMillis(t.localWriteTimeMs);return new sI(t.batchId,i,n,r)}function am(e){var t;let n=af(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?af(e.lastLimboFreeSnapshotVersion):nO.min();return new al(void 0!==e.query.documents?(1===(t=e.query).documents.length||nv(),iz(iF(s3(t.documents[0])))):iz(ai(e.query)),e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,rU.fromBase64String(e.resumeToken))}function ag(e,t){let n;let r=ad(t.snapshotVersion),i=ad(t.lastLimboFreeSnapshotVersion);n=iP(t.target)?an(e.ct,t.target):ar(e.ct,t.target)._t;let s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:iD(t.target),readTime:r,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function ay(e){let t=ai({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?iq(t,t.limit,"L"):t}function av(e,t){return new sT(t.largestBatchId,at(e.ct,t.overlayMutation))}function aw(e,t){let n=t.path.lastSegment();return[e,rs(t.path.popLast()),n]}function ab(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:ad(r.readTime),documentKey:rs(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{getBundleMetadata(e,t){return aE(e).get(t).next(e=>{if(e)return{id:e.bundleId,createTime:af(e.createTime),version:e.version}})}saveBundleMetadata(e,t){return aE(e).put({bundleId:t.id,createTime:ad(sJ(t.createTime)),version:t.version})}getNamedQuery(e,t){return aS(e).get(t).next(e=>{if(e)return{name:e.name,query:ay(e.bundledQuery),readTime:af(e.readTime)}})}saveNamedQuery(e,t){return aS(e).put({name:t.name,readTime:ad(sJ(t.readTime)),bundledQuery:t.bundledQuery})}}function aE(e){return rC(e,"bundles")}function aS(e){return rC(e,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new aI(e,t.uid||"")}getOverlay(e,t){return ax(e).get(aw(this.userId,t)).next(e=>e?av(this.serializer,e):null)}getOverlays(e,t){let n=i1();return nJ.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){let r=[];return n.forEach((n,i)=>{let s=new sT(t,i);r.push(this.ht(e,s))}),nJ.waitFor(r)}removeOverlaysForBatchId(e,t,n){let r=new Set;t.forEach(e=>r.add(rs(e.getCollectionPath())));let i=[];return r.forEach(t=>{let r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(ax(e).j("collectionPathOverlayIndex",r))}),nJ.waitFor(i)}getOverlaysForCollection(e,t,n){let r=i1(),i=rs(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ax(e).U("collectionPathOverlayIndex",s).next(e=>{for(let t of e){let e=av(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){let i;let s=i1(),a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ax(e).J({index:"collectionGroupOverlayIndex",range:a},(e,t,n)=>{let a=av(this.serializer,t);s.size()<r||a.largestBatchId===i?(s.set(a.getKey(),a),i=a.largestBatchId):n.done()}).next(()=>s)}ht(e,t){return ax(e).put(function(e,t,n){let[r,i,s]=aw(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ae(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function ax(e){return rC(e,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(rq(e.integerValue));else if("doubleValue"in e){let n=rq(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),rr(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=rj(n)),t.At(`${n.seconds||""}`),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(r$(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?it(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):nv()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let n=e.fields||{};for(let e of(this.Et(t,55),Object.keys(n)))this.Rt(e,t),this.It(n[e],t)}wt(e,t){let n=e.values||[];for(let e of(this.Et(t,50),n))this.It(e,t)}gt(e,t){this.Et(t,37),nV.fromName(e).path.forEach(e=>{this.Et(t,60),this.St(e,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function ak(e){return Math.ceil((64-function(e){let t=0;for(let n=0;n<8;++n){let r=function(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}(255&e[n]);if(t+=r,8!==r)break}return t}(e))/8)}aT.bt=new aT;class aC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let t=e[Symbol.iterator](),n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){let t=e[Symbol.iterator](),n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{let e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{let e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){let t=this.Bt(e),n=ak(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}qt(e){let t=this.Bt(e),n=ak(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let t=function(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}Ct(e){let t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){let t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);let r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class aN{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class aD{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class aA{constructor(){this.Gt=new aC,this.zt=new aN(this.Gt),this.jt=new aD(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){let e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new aP(this.indexId,this.documentKey,this.arrayValue,n)}}function aR(e,t){let n=e.indexId-t.indexId;return 0!==n?n:0!==(n=aO(e.arrayValue,t.arrayValue))?n:0!==(n=aO(e.directionalValue,t.directionalValue))?n:nV.comparator(e.documentKey,t.documentKey)}function aO(e,t){for(let n=0;n<e.length&&n<t.length;++n){let r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){for(let t of(this.Yt=new rL((e,t)=>nB.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[],e.filters))t.isInequality()?this.Yt=this.Yt.add(t):this.Xt.push(t)}get en(){return this.Yt.size>1}tn(e){if(e.collectionGroup===this.collectionId||nv(),this.en)return!1;let t=nz(e);if(void 0!==t&&!this.nn(t))return!1;let n=nj(e),r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){let e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){let t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){let e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new rL(nB.comparator),t=[];for(let n of this.Xt)if(!n.field.isKeyField()){if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new nq(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new nq(n.field,0))}}for(let n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new nq(n.field,"asc"===n.dir?0:1)));return new nU(nU.UNKNOWN_ID,this.collectionId,t,n$.empty())}nn(e){for(let t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;let n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function aM(e){return e instanceof id}function aF(e){return e instanceof ip&&iy(e)}function aB(e){return aM(e)||aF(e)||function(e){if(e instanceof ip&&ig(e)){for(let t of e.getFilters())if(!aM(t)&&!aF(t))return!1;return!0}return!1}(e)}function aV(e,t){return e instanceof id||e instanceof ip||nv(),t instanceof id||t instanceof ip||nv(),az(e instanceof id?t instanceof id?ip.create([e,t],"and"):aU(e,t):t instanceof id?aU(t,e):function(e,t){if(e.filters.length>0&&t.filters.length>0||nv(),im(e)&&im(t))return iw(e,t.getFilters());let n=ig(e)?e:t,r=ig(e)?t:e,i=n.filters.map(e=>aV(e,r));return ip.create(i,"or")}(e,t))}function aU(e,t){if(im(t))return iw(t,e.getFilters());{let n=t.filters.map(t=>aV(e,t));return ip.create(n,"or")}}function az(e){if(e instanceof id||e instanceof ip||nv(),e instanceof id)return e;let t=e.getFilters();if(1===t.length)return az(t[0]);if(iv(e))return e;let n=t.map(e=>az(e)),r=[];return n.forEach(t=>{t instanceof id?r.push(t):t instanceof ip&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:ip.create(r,e.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this._n=new aq}addToCollectionParentIndex(e,t){return this._n.add(t),nJ.resolve()}getCollectionParents(e,t){return nJ.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return nJ.resolve()}deleteFieldIndex(e,t){return nJ.resolve()}deleteAllFieldIndexes(e){return nJ.resolve()}createTargetIndexes(e,t){return nJ.resolve()}getDocumentsMatchingTarget(e,t){return nJ.resolve(null)}getIndexType(e,t){return nJ.resolve(0)}getFieldIndexes(e,t){return nJ.resolve([])}getNextCollectionGroupToUpdate(e){return nJ.resolve(null)}getMinOffset(e,t){return nJ.resolve(nQ.min())}getMinOffsetFromCollectionGroup(e,t){return nJ.resolve(nQ.min())}updateCollectionGroup(e,t,n){return nJ.resolve()}updateIndexEntries(e,t){return nJ.resolve()}}class aq{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new rL(nM.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new rL(nM.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$=new Uint8Array(0);class aG{constructor(e,t){this.databaseId=t,this.an=new aq,this.un=new iY(e=>iD(e),(e,t)=>iA(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){let n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});let i={collectionId:n,parent:rs(r)};return aK(e).put(i)}return nJ.resolve()}getCollectionParents(e,t){let n=[],r=IDBKeyRange.bound([t,""],[t+"\0",""],!1,!0);return aK(e).U(r).next(e=>{for(let r of e){if(r.collectionId!==t)break;n.push(ra(r.parent))}return n})}addFieldIndex(e,t){let n=aH(e),r={indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])};delete r.indexId;let i=n.add(r);if(t.indexState){let n=aW(e);return i.next(e=>{n.put(ab(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){let n=aH(e),r=aW(e),i=aQ(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=aH(e),n=aQ(e),r=aW(e);return t.j().next(()=>n.j()).next(()=>r.j())}createTargetIndexes(e,t){return nJ.forEach(this.cn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){let n=new aL(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){let n=aQ(e),r=!0,i=new Map;return nJ.forEach(this.cn(t),t=>this.ln(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=i6(),r=[];return nJ.forEach(i,(i,s)=>{np("IndexedDbIndexManager",`Using index id=${i.indexId}|cg=${i.collectionGroup}|f=${i.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")} to execute ${iD(t)}`);let a=function(e,t){let n=nz(t);if(void 0===n)return null;for(let t of iR(e,n.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(s,i),o=function(e,t){let n=new Map;for(let r of nj(t))for(let t of iR(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){let n=[],r=!0;for(let i of nj(t)){let t=0===i.kind?iO(e,i.fieldPath,e.startAt):iL(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new io(n,r)}(s,i),u=function(e,t){let n=[],r=!0;for(let i of nj(t)){let t=0===i.kind?iL(e,i.fieldPath,e.endAt):iO(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new io(n,r)}(s,i),c=this.hn(i,s,l),h=this.hn(i,s,u),d=this.Pn(i,s,o),f=this.In(i.indexId,a,c,l.inclusive,h,u.inclusive,d);return nJ.forEach(f,i=>n.G(i,t.limit).next(t=>{t.forEach(t=>{let n=nV.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return nJ.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:(function(e){if(0===e.getFilters().length)return[];let t=function e(t){if(t instanceof id||t instanceof ip||nv(),t instanceof id)return t;if(1===t.filters.length)return e(t.filters[0]);let n=t.filters.map(t=>e(t)),r=ip.create(n,t.op);return aB(r=az(r))?r:(r instanceof ip||nv(),im(r)||nv(),r.filters.length>1||nv(),r.filters.reduce((e,t)=>aV(e,t)))}(/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e(t){var n,r;if(t instanceof id||t instanceof ip||nv(),t instanceof id){if(t instanceof ix){let e=(null===(r=null===(n=t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>id.create(t.field,"==",e)))||[];return ip.create(e,"or")}return t}let i=t.filters.map(t=>e(t));return ip.create(i,t.op)}(e));return aB(t)||nv(),aM(t)||aF(t)?[t]:t.getFilters()})(ip.create(e.filters,"and")).map(t=>iN(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t)),t}In(e,t,n,r,i,s,a){let o=(null!=t?t.length:1)*Math.max(n.length,i.length),l=o/(null!=t?t.length:1),u=[];for(let c=0;c<o;++c){let o=t?this.Tn(t[c/l]):a$,h=this.En(e,o,n[c%l],r),d=this.dn(e,o,i[c%l],s),f=a.map(t=>this.En(e,o,t,!0));u.push(...this.createRange(h,d,f))}return u}En(e,t,n,r){let i=new aP(e,nV.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){let i=new aP(e,nV.empty(),t,n);return r?i.Jt():i}ln(e,t){let n=new aL(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(let r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2,r=this.cn(t);return nJ.forEach(r,t=>this.ln(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new rL(nB.comparator),n=!1;for(let r of e.filters)for(let e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(let n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>null!==t.limit&&r.length>1&&2===n?1:n)}An(e,t){let n=new aA;for(let r of nj(e)){let e=t.data.field(r.fieldPath);if(null==e)return null;let i=n.Ht(r.kind);aT.bt.Pt(e,i)}return n.Wt()}Tn(e){let t=new aA;return aT.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){let n=new aA;return aT.bt.Pt(r6(this.databaseId,t),n.Ht(function(e){let t=nj(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new aA);let i=0;for(let s of nj(e)){let e=n[i++];for(let n of r)if(this.Vn(t,s.fieldPath)&&r5(e))r=this.mn(r,s,e);else{let t=n.Ht(s.kind);aT.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){let t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){let r=[...e],i=[];for(let e of n.arrayValue.values||[])for(let n of r){let r=new aA;r.seed(n.Wt()),aT.bt.Pt(e,r.Ht(t.kind)),i.push(r)}return i}Vn(e,t){return!!e.filters.find(e=>e instanceof id&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){let n=aH(e),r=aW(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next(e=>{let t=[];return nJ.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){let n=t?new n$(t.sequenceNumber,new nQ(af(t.readTime),new nV(ra(t.documentKey)),t.largestBatchId)):n$.empty(),r=e.fields.map(([e,t])=>new nq(nB.fromServerFormat(e),t));return new nU(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{let n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:nA(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){let r=aH(e),i=aW(e);return this.gn(e).next(e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>nJ.forEach(t,t=>i.put(ab(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){let n=new Map;return nJ.forEach(t,(t,r)=>{let i=n.get(t.collectionGroup);return(i?nJ.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),nJ.forEach(i,n=>this.pn(e,t,n).next(t=>{let i=this.yn(r,n);return t.isEqual(i)?nJ.resolve():this.wn(e,r,n,t,i)}))))})}Sn(e,t,n,r){return aQ(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return aQ(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){let r=aQ(e),i=new rL(aR);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},(e,r)=>{i=i.add(new aP(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>i)}yn(e,t){let n=new rL(aR),r=this.An(t,e);if(null==r)return n;let i=nz(t);if(null!=i){let s=e.data.field(i.fieldPath);if(r5(s))for(let i of s.arrayValue.values||[])n=n.add(new aP(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new aP(t.indexId,e.key,a$,r));return n}wn(e,t,n,r,i){np("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(e,t,n,r,i){let s=e.getIterator(),a=t.getIterator(),o=rF(s),l=rF(a);for(;o||l;){let e=!1,t=!1;if(o&&l){let r=n(o,l);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(l),l=rF(a)):t?(i(o),o=rF(s)):(o=rF(s),l=rF(a))}}(r,i,aR,r=>{s.push(this.Sn(e,t,n,r))},r=>{s.push(this.bn(e,t,n,r))}),nJ.waitFor(s)}gn(e){let t=1;return aW(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>aR(e,t)).filter((e,t,n)=>!t||0!==aR(e,n[t-1]));let r=[];for(let i of(r.push(e),n)){let n=aR(i,e),s=aR(i,t);if(0===n)r[0]=e.Jt();else if(n>0&&s<0)r.push(i),r.push(i.Jt());else if(s>0)break}r.push(t);let i=[];for(let e=0;e<r.length;e+=2){if(this.Dn(r[e],r[e+1]))return[];let t=[r[e].indexId,this.uid,r[e].arrayValue,r[e].directionalValue,a$,[]],n=[r[e+1].indexId,this.uid,r[e+1].arrayValue,r[e+1].directionalValue,a$,[]];i.push(IDBKeyRange.bound(t,n))}return i}Dn(e,t){return aR(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(aY)}getMinOffset(e,t){return nJ.mapArray(this.cn(t),t=>this.ln(e,t).next(e=>e||nv())).next(aY)}}function aK(e){return rC(e,"collectionParents")}function aQ(e){return rC(e,"indexEntries")}function aH(e){return rC(e,"indexConfiguration")}function aW(e){return rC(e,"indexState")}function aY(e){0!==e.length||nv();let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){let i=e[r].indexState.offset;0>nH(i,t)&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new nQ(t.readTime,t.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aX={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class aJ{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new aJ(e,aJ.DEFAULT_COLLECTION_PERCENTILE,aJ.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aZ(e,t,n){let r=e.store("mutations"),i=e.store("documentMutations"),s=[],a=IDBKeyRange.only(n.batchId),o=0,l=r.J({range:a},(e,t,n)=>(o++,n.delete()));s.push(l.next(()=>{1===o||nv()}));let u=[];for(let e of n.mutations){var c,h;let r=(c=e.key.path,h=n.batchId,[t,rs(c),h]);s.push(i.delete(r)),u.push(e.key)}return nJ.waitFor(s).next(()=>u)}function a0(e){let t;if(!e)return 0;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw nv();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */aJ.DEFAULT_COLLECTION_PERCENTILE=10,aJ.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,aJ.DEFAULT=new aJ(41943040,aJ.DEFAULT_COLLECTION_PERCENTILE,aJ.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),aJ.DISABLED=new aJ(-1,0,0);class a1{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){return""!==e.uid||nv(),new a1(e.isAuthenticated()?e.uid:"",t,n,r)}checkEmpty(e){let t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return a4(e).J({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){let i=a6(e),s=a4(e);return s.add({}).next(a=>{"number"==typeof a||nv();let o=new sI(a,t,n,r),l=function(e,t,n){let r=n.baseMutations.map(t=>ae(e.ct,t)),i=n.mutations.map(t=>ae(e.ct,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,o),u=[],c=new rL((e,t)=>nA(e.canonicalString(),t.canonicalString()));for(let e of r){let t=[this.userId,rs(e.key.path),a];c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,rl))}return c.forEach(t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Cn[a]=o.keys()}),nJ.waitFor(u).next(()=>o)})}lookupMutationBatch(e,t){return a4(e).get(t).next(e=>e?(e.userId===this.userId||nv(),ap(this.serializer,e)):null)}vn(e,t){return this.Cn[t]?nJ.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){let n=e.keys();return this.Cn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]),i=null;return a4(e).J({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(t.batchId>=n||nv(),i=ap(this.serializer,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return a4(e).J({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return a4(e).U("userMutationsIndex",t).next(e=>e.map(e=>ap(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){let n=[this.userId,rs(t.path)],r=IDBKeyRange.lowerBound(n),i=[];return a6(e).J({range:r},(n,r,s)=>{let[a,o,l]=n,u=ra(o);if(a===this.userId&&t.path.isEqual(u))return a4(e).get(l).next(e=>{if(!e)throw nv();e.userId===this.userId||nv(),i.push(ap(this.serializer,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new rL(nA),r=[];return t.forEach(t=>{let i=[this.userId,rs(t.path)],s=IDBKeyRange.lowerBound(i),a=a6(e).J({range:s},(e,r,i)=>{let[s,a,o]=e,l=ra(a);s===this.userId&&t.path.isEqual(l)?n=n.add(o):i.done()});r.push(a)}),nJ.waitFor(r).next(()=>this.Fn(e,n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=[this.userId,rs(n)],s=IDBKeyRange.lowerBound(i),a=new rL(nA);return a6(e).J({range:s},(e,t,i)=>{let[s,o,l]=e,u=ra(o);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(a=a.add(l)):i.done()}).next(()=>this.Fn(e,a))}Fn(e,t){let n=[],r=[];return t.forEach(t=>{r.push(a4(e).get(t).next(e=>{if(null===e)throw nv();e.userId===this.userId||nv(),n.push(ap(this.serializer,e))}))}),nJ.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return aZ(e._e,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),nJ.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return nJ.resolve();let n=IDBKeyRange.lowerBound([this.userId]),r=[];return a6(e).J({range:n},(e,t,n)=>{if(e[0]===this.userId){let t=ra(e[1]);r.push(t)}else n.done()}).next(()=>{0===r.length||nv()})})}containsKey(e,t){return a2(e,this.userId,t)}xn(e){return a3(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function a2(e,t,n){let r=[t,rs(n.path)],i=r[1],s=IDBKeyRange.lowerBound(r),a=!1;return a6(e).J({range:s,H:!0},(e,n,r)=>{let[s,o,l]=e;s===t&&o===i&&(a=!0),r.done()}).next(()=>a)}function a4(e){return rC(e,"mutations")}function a6(e){return rC(e,"documentMutations")}function a3(e){return rC(e,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new a5(0)}static Ln(){return new a5(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{let n=new a5(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(e=>nO.fromTimestamp(new nR(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>a8(e).delete(t.targetId)).next(()=>this.Bn(e)).next(t=>(t.targetCount>0||nv(),t.targetCount-=1,this.kn(e,t)))}removeTargets(e,t,n){let r=0,i=[];return a8(e).J((s,a)=>{let o=am(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,i.push(this.removeTargetData(e,o)))}).next(()=>nJ.waitFor(i)).next(()=>r)}forEachTarget(e,t){return a8(e).J((e,n)=>{t(am(n))})}Bn(e){return a7(e).get("targetGlobalKey").next(e=>(null!==e||nv(),e))}kn(e,t){return a7(e).put("targetGlobalKey",t)}qn(e,t){return a8(e).put(ag(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next(e=>e.targetCount)}getTargetData(e,t){let n=iD(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return a8(e).J({range:r,index:"queryTargetsIndex"},(e,n,r)=>{let s=am(n);iA(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){let r=[],i=oe(e);return t.forEach(t=>{let s=rs(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))}),nJ.waitFor(r)}removeMatchingKeys(e,t,n){let r=oe(e);return nJ.forEach(t,t=>{let i=rs(t.path);return nJ.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){let n=oe(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){let n=IDBKeyRange.bound([t],[t+1],!1,!0),r=oe(e),i=i6();return r.J({range:n,H:!0},(e,t,n)=>{let r=new nV(ra(e[1]));i=i.add(r)}).next(()=>i)}containsKey(e,t){let n=rs(t.path),r=IDBKeyRange.bound([n],[n+"\0"],!1,!0),i=0;return oe(e).J({index:"documentTargetsIndex",H:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}ot(e,t){return a8(e).get(t).next(e=>e?am(e):null)}}function a8(e){return rC(e,"targets")}function a7(e){return rC(e,"targetGlobal")}function oe(e){return rC(e,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot([e,t],[n,r]){let i=nA(e,n);return 0===i?nA(t,r):i}class on{constructor(e){this.Kn=e,this.buffer=new rL(ot),this.$n=0}Un(){return++this.$n}Wn(e){let t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();0>ot(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class or{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){np("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){n6(e)?np("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await nX(e)}await this.zn(3e5)})}}class oi{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return nJ.resolve(rt.oe);let n=new on(t);return this.jn.forEachTarget(e,e=>n.Wn(e.sequenceNumber)).next(()=>this.jn.Jn(e,e=>n.Wn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return -1===this.params.cacheSizeCollectionThreshold?(np("LruGarbageCollector","Garbage collection skipped; disabled"),nJ.resolve(aX)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(np("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aX):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,a,o,l;let c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(np("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),nf()<=u.DEBUG&&np("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${r} in `+(a-s)+"ms\n"+`	Removed ${i} targets in `+(o-a)+"ms\n"+`	Removed ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-c}ms`),nJ.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t){this.db=e,this.garbageCollector=new oi(this,t)}Hn(e){let t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Zn(e){let t=0;return this.Jn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(e,n)=>t(n))}addReference(e,t,n){return oa(e,n)}removeReference(e,t,n){return oa(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return oa(e,t)}er(e,t){let n;return n=!1,a3(e).Y(r=>a2(e,r,t).next(e=>(e&&(n=!0),nJ.resolve(!e)))).next(()=>n)}removeOrphanedDocuments(e,t){let n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],i=0;return this.Xn(e,(s,a)=>{if(a<=t){let t=this.er(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s,nO.min()),oe(e).delete([0,rs(s.path)])))});r.push(t)}}).next(()=>nJ.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return oa(e,t)}Xn(e,t){let n=oe(e),r,i=rt.oe;return n.J({index:"documentTargetsIndex"},([e,n],{path:s,sequenceNumber:a})=>{0===e?(i!==rt.oe&&t(new nV(ra(r)),i),i=a,r=s):i=rt.oe}).next(()=>{i!==rt.oe&&t(new nV(ra(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function oa(e,t){var n;return oe(e).put((n=e.currentSequenceNumber,{targetId:0,path:rs(t.path),sequenceNumber:n}))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.changes=new iY(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ia.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return void 0!==n?nJ.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return oh(e).put(n)}removeEntry(e,t,n){return oh(e).delete(function(e,t){let n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ah(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.tr(e,n)))}getEntry(e,t){let n=ia.newInvalidDocument(t);return oh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(od(t))},(e,r)=>{n=this.nr(t,r)}).next(()=>n)}rr(e,t){let n={size:0,document:ia.newInvalidDocument(t)};return oh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(od(t))},(e,r)=>{n={document:this.nr(t,r),size:a0(r)}}).next(()=>n)}getEntries(e,t){let n=iX;return this.ir(e,t,(e,t)=>{let r=this.nr(e,t);n=n.insert(e,r)}).next(()=>n)}sr(e,t){let n=iX,r=new rP(nV.comparator);return this.ir(e,t,(e,t)=>{let i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,a0(t))}).next(()=>({documents:n,_r:r}))}ir(e,t,n){if(t.isEmpty())return nJ.resolve();let r=new rL(op);t.forEach(e=>r=r.add(e));let i=IDBKeyRange.bound(od(r.first()),od(r.last())),s=r.getIterator(),a=s.getNext();return oh(e).J({index:"documentKeyIndex",range:i},(e,t,r)=>{let i=nV.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&0>op(a,i);)n(a,null),a=s.getNext();a&&a.isEqual(i)&&(n(a,t),a=s.hasNext()?s.getNext():null),a?r.$(od(a)):r.done()}).next(()=>{for(;a;)n(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,i){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),ah(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oh(e).U(IDBKeyRange.bound(a,o,!0)).next(e=>{null==i||i.incrementDocumentReadCount(e.length);let n=iX;for(let i of e){let e=this.nr(nV.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(iQ(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let i=iX,s=of(t,n),a=of(t,nQ.max());return oh(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(e,t,n)=>{let s=this.nr(nV.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(i=i.insert(s.key,s)).size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new ou(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return oc(e).get("remoteDocumentGlobalKey").next(e=>(e||nv(),e))}tr(e,t){return oc(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){let e=function(e,t){let n;if(t.document)n=s7(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let e=nV.fromSegments(t.noDocument.path),r=af(t.noDocument.readTime);n=ia.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return nv();{let e=nV.fromSegments(t.unknownDocument.path),r=af(t.unknownDocument.version);n=ia.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){let t=new nR(e[0],e[1]);return nO.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!(e.isNoDocument()&&e.version.isEqual(nO.min())))return e}return ia.newInvalidDocument(e)}}class ou extends oo{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new iY(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){let t=[],n=0,r=new rL((e,t)=>nA(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{let a=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,a.readTime)),s.isValidDocument()){let o=ac(this.ar.serializer,s);r=r.add(i.path.popLast());let l=a0(o);n+=l-a.size,t.push(this.ar.addEntry(e,i,o))}else if(n-=a.size,this.trackRemovals){let n=ac(this.ar.serializer,s.convertToNoDocument(nO.min()));t.push(this.ar.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.ar.updateMetadata(e,n)),nJ.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:e,_r:t})=>(t.forEach((t,n)=>{this.ur.set(t,{size:n,readTime:e.get(t).readTime})}),e))}}function oc(e){return rC(e,"remoteDocumentGlobal")}function oh(e){return rC(e,"remoteDocumentsV14")}function od(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function of(e,t){let n=t.documentKey.path.toArray();return[e,ah(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function op(e,t){let n=e.path.toArray(),r=t.path.toArray(),i=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(i=nA(n[e],r[e]))return i;return(i=nA(n.length,r.length))||(i=nA(n[n.length-2],r[r.length-2]))||nA(n[n.length-1],r[r.length-1])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&sm(n.mutation,e,rB.empty(),nR.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,i6()).next(()=>t))}getLocalViewOfDocuments(e,t,n=i6()){let r=i1();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=iZ();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let n=i1();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,i6()))}populateOverlays(e,t,n){let r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=iX,s=i1(),a=i1();return t.forEach((e,t)=>{let a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof sv)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),sm(a.mutation,t,a.mutation.getFieldMask(),nR.now())):s.set(t.key,rB.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new om(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){let n=i1(),r=new rP((e,t)=>e-t),i=i6();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let i of e)i.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let a=n.get(e)||rB.empty();a=i.applyToLocalView(s,a),n.set(e,a);let o=(r.get(i.batchId)||i6()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let r=a.getNext(),o=r.key,l=r.value,u=i1();l.forEach(e=>{if(!i.has(e)){let r=sp(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return nJ.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return nV.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):iV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{let s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):nJ.resolve(i1()),a=-1,o=i;return s.next(t=>nJ.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?nJ.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,i6())).next(e=>({batchId:a,changes:i0(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nV(t)).next(e=>{let t=iZ();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,s=iZ();return this.indexManager.getCollectionParents(e,i).next(a=>nJ.forEach(a,a=>{let o=new iM(a.child(i),null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt);return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{let r=n.getKey();null===e.get(r)&&(e=e.insert(r,ia.newInvalidDocument(r)))});let n=iZ();return e.forEach((e,r)=>{let s=i.get(e);void 0!==s&&sm(s.mutation,r,rB.empty(),nR.now()),iQ(t,r)&&(n=n.insert(e,r))}),n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return nJ.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:t.id,version:t.version,createTime:sJ(t.createTime)}),nJ.resolve()}getNamedQuery(e,t){return nJ.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:t.name,query:ay(t.bundledQuery),readTime:sJ(t.readTime)}),nJ.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(){this.overlays=new rP(nV.comparator),this.hr=new Map}getOverlay(e,t){return nJ.resolve(this.overlays.get(t))}getOverlays(e,t){let n=i1();return nJ.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),nJ.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.hr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.hr.delete(n)),nJ.resolve()}getOverlaysForCollection(e,t,n){let r=i1(),i=t.length+1,s=new nV(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return nJ.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new rP((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=i1(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let a=i1(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return nJ.resolve(a)}ht(e,t,n){let r=this.overlays.get(n.key);if(null!==r){let e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new sT(t,n));let i=this.hr.get(t);void 0===i&&(i=i6(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.Pr=new rL(ob.Ir),this.Tr=new rL(ob.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let n=new ob(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Ar(new ob(e,t))}Rr(e,t){e.forEach(e=>this.removeReference(e,t))}Vr(e){let t=new nV(new nM([])),n=new ob(t,e),r=new ob(t,e+1),i=[];return this.Tr.forEachInRange([n,r],e=>{this.Ar(e),i.push(e.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new nV(new nM([])),n=new ob(t,e),r=new ob(t,e+1),i=i6();return this.Tr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){let t=new ob(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ob{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return nV.comparator(e.key,t.key)||nA(e.pr,t.pr)}static Er(e,t){return nA(e.pr,t.pr)||nV.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new rL(ob.Ir)}checkEmpty(e){return nJ.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){let i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new sI(i,t,n,r);for(let t of(this.mutationQueue.push(s),r))this.wr=this.wr.add(new ob(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return nJ.resolve(s)}lookupMutationBatch(e,t){return nJ.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let n=this.br(t+1),r=n<0?0:n;return nJ.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return nJ.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return nJ.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new ob(t,0),r=new ob(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],e=>{let t=this.Sr(e.pr);i.push(t)}),nJ.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new rL(nA);return t.forEach(e=>{let t=new ob(e,0),r=new ob(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],e=>{n=n.add(e.pr)})}),nJ.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;nV.isDocumentKey(i)||(i=i.child(""));let s=new ob(new nV(i),0),a=new rL(nA);return this.wr.forEachWhile(e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.pr)),!0)},s),nJ.resolve(this.Dr(a))}Dr(e){let t=[];return e.forEach(e=>{let n=this.Sr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){0===this.Cr(t.batchId,"removed")||nv(),this.mutationQueue.shift();let n=this.wr;return nJ.forEach(t.mutations,r=>{let i=new ob(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=n})}Mn(e){}containsKey(e,t){let n=new ob(t,0),r=this.wr.firstAfterOrEqual(n);return nJ.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,nJ.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.vr=e,this.docs=new rP(nV.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return nJ.resolve(n?n.document.mutableCopy():ia.newInvalidDocument(t))}getEntries(e,t){let n=iX;return t.forEach(e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ia.newInvalidDocument(e))}),nJ.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=iX,s=t.path,a=new nV(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){let{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||0>=nH(nK(a),n)||(r.has(a.key)||iQ(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return nJ.resolve(i)}getAllFromCollectionGroup(e,t,n,r){nv()}Fr(e,t){return nJ.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new oS(this)}getSize(e){return nJ.resolve(this.size)}}class oS extends oo{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)}),nJ.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.persistence=e,this.Mr=new iY(e=>iD(e),iA),this.lastRemoteSnapshotVersion=nO.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ow,this.targetCount=0,this.Lr=a5.Nn()}forEachTarget(e,t){return this.Mr.forEach((e,n)=>t(n)),nJ.resolve()}getLastRemoteSnapshotVersion(e){return nJ.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nJ.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),nJ.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),nJ.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Lr=new a5(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,nJ.resolve()}updateTargetData(e,t){return this.qn(t),nJ.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,nJ.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),nJ.waitFor(i).next(()=>r)}getTargetCount(e){return nJ.resolve(this.targetCount)}getTargetData(e,t){let n=this.Mr.get(t)||null;return nJ.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),nJ.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),nJ.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),nJ.resolve()}getMatchingKeysForTargetId(e,t){let n=this.Nr.gr(t);return nJ.resolve(n)}containsKey(e,t){return nJ.resolve(this.Nr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,t){this.Br={},this.overlays={},this.kr=new rt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new oI(this),this.indexManager=new aj,this.remoteDocumentCache=new oE(e=>this.referenceDelegate.Kr(e)),this.serializer=new au(t),this.$r=new oy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ov,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new o_(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){np("MemoryPersistence","Starting transaction:",e);let r=new oT(this.kr.next());return this.referenceDelegate.Ur(),n(r).next(e=>this.referenceDelegate.Wr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gr(e,t){return nJ.or(Object.values(this.Br).map(n=>()=>n.containsKey(e,t)))}}class oT extends nY{constructor(e){super(),this.currentSequenceNumber=e}}class ok{constructor(e){this.persistence=e,this.zr=new ow,this.jr=null}static Hr(e){return new ok(e)}get Jr(){if(this.jr)return this.jr;throw nv()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),nJ.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),nJ.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),nJ.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(e=>this.Jr.add(e.toString()));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Jr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nJ.forEach(this.Jr,n=>{let r=nV.fromPath(n);return this.Yr(e,r).next(e=>{e||t.removeEntry(r,nO.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return nJ.or([()=>nJ.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.serializer=e}O(e,t,n,r){let i=new nZ("createOrUpgrade",t);n<1&&r>=1&&(!function(e){e.createObjectStore("owner")}(e),e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ro,{unique:!0}),e.createObjectStore("documentMutations"),oN(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=nJ.resolve();return n<3&&r>=3&&(0!==n&&(e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal"),oN(e)),s=s.next(()=>(function(e){let t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:nO.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)})(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>i.store("mutations").U().next(t=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ro,{unique:!0});let n=i.store("mutations"),r=t.map(e=>n.put(e));return nJ.waitFor(r)}))),s=s.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Xr(i))),n<6&&r>=6&&(s=s.next(()=>((function(e){e.createObjectStore("remoteDocumentGlobal")})(e),this.ei(i)))),n<7&&r>=7&&(s=s.next(()=>this.ti(i))),n<8&&r>=8&&(s=s.next(()=>this.ni(e,i))),n<9&&r>=9&&(s=s.next(()=>{e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})),n<10&&r>=10&&(s=s.next(()=>this.ri(i))),n<11&&r>=11&&(s=s.next(()=>{(function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(s=s.next(()=>{!function(e){let t=e.createObjectStore("documentOverlays",{keyPath:rb});t.createIndex("collectionPathOverlayIndex",r_,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",rE,{unique:!1})}(e)})),n<13&&r>=13&&(s=s.next(()=>(function(e){let t=e.createObjectStore("remoteDocumentsV14",{keyPath:ru});t.createIndex("documentKeyIndex",rc),t.createIndex("collectionGroupIndex",rh)})(e)).next(()=>this.ii(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(s=s.next(()=>this.si(e,i))),n<15&&r>=15&&(s=s.next(()=>{e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:rg}).createIndex("sequenceNumberIndex",ry,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:rv}).createIndex("documentKeyIndex",rw,{unique:!1})})),n<16&&r>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),s}ei(e){let t=0;return e.store("remoteDocuments").J((e,n)=>{t+=a0(n)}).next(()=>{let n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Xr(e){let t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next(t=>nJ.forEach(t,t=>{let r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next(n=>nJ.forEach(n,n=>{n.userId===t.userId||nv();let r=ap(this.serializer,n);return aZ(e,t.userId,r).next(()=>{})}))}))}ti(e){let t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{let r=[];return n.J((n,i)=>{let s=new nM(n),a=[0,rs(s)];r.push(t.get(a).next(n=>n?nJ.resolve():t.put({targetId:0,path:rs(s),sequenceNumber:e.highestListenSequenceNumber})))}).next(()=>nJ.waitFor(r))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:rm});let n=t.store("collectionParents"),r=new aq,i=e=>{if(r.add(e)){let t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:rs(r)})}};return t.store("remoteDocuments").J({H:!0},(e,t)=>i(new nM(e).popLast())).next(()=>t.store("documentMutations").J({H:!0},([e,t,n],r)=>i(ra(t).popLast())))}ri(e){let t=e.store("targets");return t.J((e,n)=>{let r=am(n),i=ag(this.serializer,r);return t.put(i)})}ii(e,t){let n=t.store("remoteDocuments"),r=[];return n.J((e,n)=>{let i=t.store("remoteDocumentsV14"),s=(n.document?new nV(nM.fromString(n.document.name).popFirst(5)):n.noDocument?nV.fromSegments(n.noDocument.path):n.unknownDocument?nV.fromSegments(n.unknownDocument.path):nv()).path.toArray(),a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))}).next(()=>nJ.waitFor(r))}si(e,t){let n=t.store("mutations"),r=new ol(this.serializer),i=new ox(ok.Hr,this.serializer.ct);return n.U().next(e=>{let n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:i6();ap(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),nJ.forEach(n,(e,n)=>{let s=new nc(n),a=aI.lt(this.serializer,s),o=i.getIndexManager(s);return new og(r,a1.lt(s,this.serializer,o,i.referenceDelegate),a,o).recalculateAndSaveOverlaysForDocumentKeys(new rk(t,rt.oe),e).next()})})}}function oN(e){e.createObjectStore("targetDocuments",{keyPath:rf}).createIndex("documentTargetsIndex",rp,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rd,{unique:!0}),e.createObjectStore("targetGlobal")}const oD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class oA{constructor(e,t,n,r,i,s,a,o,l,u,c=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=a,this._i=l,this.ai=u,this.ui=c,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!oA.D())throw new nb(nw.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new os(this,r),this.Ti=t+"main",this.serializer=new au(o),this.Ei=new n0(this.Ti,this.ui,new oC(this.serializer)),this.Qr=new a9(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new ol(this.serializer),this.$r=new a_,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&nm("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nb(nw.FAILED_PRECONDITION,oD);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new rt(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>oR(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(n6(e))return np("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return np("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return oP(e).get("owner").next(e=>nJ.resolve(this.Si(e)))}bi(e){return oR(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let t=rC(e,"clientMetadata");return t.U().next(e=>{let n=this.vi(e,18e5),r=e.filter(e=>-1===n.indexOf(e));return nJ.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.di)for(let t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?nJ.resolve(!0):oP(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new nb(nw.FAILED_PRECONDITION,oD);return!1}}return!(!this.networkEnabled||!this.inForeground)||oR(e).U().next(e=>void 0===this.vi(e,5e3).find(e=>{if(this.clientId!==e.clientId){let t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&np("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new rk(e,rt.oe);return this.yi(t).next(()=>this.bi(t))}),this.Ei.close(),this.Li()}vi(e,t){return e.filter(e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>oR(e).U().next(e=>this.vi(e,18e5).map(e=>e.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return a1.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aG(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return aI.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){var r;let i;np("IndexedDbPersistence","Starting transaction:",e);let s=16===(r=this.ui)?rT:15===r?rT:14===r?rx:13===r?rx:12===r?rI:11===r?rS:void nv();return this.Ei.runTransaction(e,"readonly"===t?"readonly":"readwrite",s,r=>(i=new rk(r,this.kr?this.kr.next():rt.oe),"readwrite-primary"===t?this.gi(i).next(e=>!!e||this.pi(i)).next(t=>{if(!t)throw nm(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new nb(nw.FAILED_PRECONDITION,nW);return n(i)}).next(e=>this.wi(i).next(()=>e)):this.ki(i).next(()=>n(i)))).then(e=>(i.raiseOnCommittedEvent(),e))}ki(e){return oP(e).get("owner").next(e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new nb(nw.FAILED_PRECONDITION,oD)})}wi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oP(e).put("owner",t)}static D(){return n0.D()}yi(e){let t=oP(e);return t.get("owner").next(e=>this.Si(e)?(np("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):nJ.resolve())}Ci(e,t){let n=Date.now();return!(e<n-t)&&(!(e>n)||(nm(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();let e=/(?:Version|Mobile)\/1[456]/;ed()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{let n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return np("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return nm("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){nm("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function oP(e){return rC(e,"owner")}function oR(e){return rC(e,"clientMetadata")}function oO(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=i6(),r=i6();for(let e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new oL(e,t.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=ed()?8:n1(ec())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.ji(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Hi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;let n=new oM;return this.Ji(e,t,n).next(r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)})}).next(()=>i.result)}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(nf()<=u.DEBUG&&np("QueryEngine","SDK will not create cache indexes for query:",iK(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),nJ.resolve()):(nf()<=u.DEBUG&&np("QueryEngine","Query:",iK(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(nf()<=u.DEBUG&&np("QueryEngine","The SDK decides to create cache indexes for query:",iK(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,iz(t))):nJ.resolve())}ji(e,t){if(iB(t))return nJ.resolve(null);let n=iz(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(n=iz(t=iq(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{let i=i6(...r);return this.zi.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{let s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,iq(t,null,"F")):this.es(e,s,t,n)}))})))}Hi(e,t,n,r){return iB(t)||r.isEqual(nO.min())?nJ.resolve(null):this.zi.getDocuments(e,n).next(i=>{let s=this.Zi(t,i);return this.Xi(t,s,n,r)?nJ.resolve(null):(nf()<=u.DEBUG&&np("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),iK(t)),this.es(e,s,t,nG(r,-1)).next(e=>e))})}Zi(e,t){let n=new rL(iW(e));return t.forEach((t,r)=>{iQ(e,r)&&(n=n.add(r))}),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;let i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return nf()<=u.DEBUG&&np("QueryEngine","Using full collection scan to execute query:",iK(t)),this.zi.getDocumentsMatchingQuery(e,t,nQ.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new rP(nA),this.rs=new iY(e=>iD(e),iA),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new og(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}async function oV(e,t){return await e.persistence.runTransaction("Handle user change","readonly",n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next(i=>(r=i,e._s(t),e.mutationQueue.getAllMutationBatches(n))).next(t=>{let i=[],s=[],a=i6();for(let e of r)for(let t of(i.push(e.batchId),e.mutations))a=a.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))a=a.add(t.key);return e.localDocuments.getDocuments(n,a).next(e=>({us:e,removedBatchIds:i,addedBatchIds:s}))})})}function oU(e){return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function oz(e,t,n){let r=i6(),i=i6();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=iX;return n.forEach((n,s)=>{let a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(nO.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):np("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{cs:r,ls:i}})}function oj(e,t){return e.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return e.Qr.getTargetData(n,t).next(i=>i?(r=i,nJ.resolve(r)):e.Qr.allocateTargetId(n).next(i=>(r=new al(t,i,"TargetPurposeListen",n.currentSequenceNumber),e.Qr.addTargetData(n,r).next(()=>r))))}).then(n=>{let r=e.ns.get(n.targetId);return(null===r||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(n.targetId,n),e.rs.set(t,n.targetId)),n})}async function oq(e,t,n){let r=e.ns.get(t);try{n||await e.persistence.runTransaction("Release target",n?"readwrite":"readwrite-primary",t=>e.persistence.referenceDelegate.removeTarget(t,r))}catch(e){if(!n6(e))throw e;np("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}e.ns=e.ns.remove(t),e.rs.delete(r.target)}function o$(e,t,n){let r=nO.min(),i=i6();return e.persistence.runTransaction("Execute query","readwrite",s=>(function(e,t,n){let r=e.rs.get(n);return void 0!==r?nJ.resolve(e.ns.get(r)):e.Qr.getTargetData(t,n)})(e,s,iz(t)).next(t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,e.Qr.getMatchingKeysForTargetId(s,t.targetId).next(e=>{i=e})}).next(()=>e.ts.getDocumentsMatchingQuery(s,t,n?r:nO.min(),n?i:i6())).next(n=>(oQ(e,iH(t),n),{documents:n,hs:i})))}function oG(e,t){let n=e.Qr,r=e.ns.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",e=>n.ot(e,t).next(e=>e?e.target:null))}function oK(e,t){let n=e.ss.get(t)||nO.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.os.getAllFromCollectionGroup(r,t,nG(n,-1),Number.MAX_SAFE_INTEGER)).then(n=>(oQ(e,t,n),n))}function oQ(e,t,n){let r=e.ss.get(t)||nO.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.ss.set(t,r)}async function oH(e,t,n,r){let i=i6(),s=iX;for(let e of n){let n=t.Ps(e.metadata.name);e.document&&(i=i.add(n));let r=t.Is(e);r.setReadTime(t.Ts(e.metadata.readTime)),s=s.insert(n,r)}let a=e.os.newChangeBuffer({trackRemovals:!0}),o=await oj(e,iz(iF(nM.fromString(`__bundle__/docs/${r}`))));return e.persistence.runTransaction("Apply bundle documents","readwrite",t=>oz(t,a,s).next(e=>(a.apply(t),e)).next(n=>e.Qr.removeMatchingKeysForTargetId(t,o.targetId).next(()=>e.Qr.addMatchingKeys(t,i,o.targetId)).next(()=>e.localDocuments.getLocalViewOfDocuments(t,n.cs,n.ls)).next(()=>n.cs)))}async function oW(e,t,n=i6()){let r=await oj(e,iz(ay(t.bundledQuery)));return e.persistence.runTransaction("Save named query","readwrite",i=>{let s=sJ(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return e.$r.saveNamedQuery(i,t);let a=r.withResumeToken(rU.EMPTY_BYTE_STRING,s);return e.ns=e.ns.insert(a.targetId,a),e.Qr.updateTargetData(i,a).next(()=>e.Qr.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>e.Qr.addMatchingKeys(i,n,r.targetId)).next(()=>e.$r.saveNamedQuery(i,t))})}function oY(e,t){return`firestore_clients_${e}_${t}`}function oX(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function oJ(e,t){return`firestore_targets_${e}_${t}`}class oZ{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){let r=JSON.parse(n),i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(i=new nb(r.error.code,r.error.message)),s?new oZ(e,t,r.state,i):(nm("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class o0{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){let n=JSON.parse(t),r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(r=new nb(n.error.code,n.error.message)),i?new o0(e,n.state,r):(nm("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class o1{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){let n=JSON.parse(t),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=i3;for(let e=0;r&&e<n.activeTargetIds.length;++e)r=ri(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return r?new o1(e,i):(nm("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class o2{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){let t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new o2(t.clientId,t.onlineState):(nm("SharedClientState",`Failed to parse online state: ${e}`),null)}}class o4{constructor(){this.activeTargetIds=i3}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class o6{constructor(e,t,n,r,i){var s,a,o;this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new rP(nA),this.started=!1,this.ys=[];let l=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=oY(this.persistenceKey,this.Vs),this.Ss=(s=this.persistenceKey,`firestore_sequence_number_${s}`),this.ps=this.ps.insert(this.Vs,new o4),this.bs=RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Ds=RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Cs=RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vs=(a=this.persistenceKey,`firestore_online_state_${a}`),this.Fs=(o=this.persistenceKey,`firestore_bundle_loaded_v2_${o}`),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){for(let e of(await this.syncEngine.Bi())){if(e===this.Vs)continue;let t=this.getItem(oY(this.persistenceKey,e));if(t){let n=o1.Es(e,t);n&&(this.ps=this.ps.insert(n.clientId,n))}}this.Ms();let e=this.storage.getItem(this.vs);if(e){let t=this.xs(e);t&&this.Os(t)}for(let e of this.ys)this.gs(e);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){let n=this.storage.getItem(oJ(this.persistenceKey,e));if(n){let r=o0.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(oJ(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.Bs(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return np("SharedClientState","READ",e,t),t}setItem(e,t){np("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){np("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){if(e.storageArea===this.storage){if(np("SharedClientState","EVENT",e.key,e.newValue),e.key===this.ws)return void nm("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(null!==e.key){if(this.bs.test(e.key)){if(null==e.newValue){let t=this.$s(e.key);return this.Us(t,null)}{let t=this.Ws(e.key,e.newValue);if(t)return this.Us(t.clientId,t)}}else if(this.Ds.test(e.key)){if(null!==e.newValue){let t=this.Gs(e.key,e.newValue);if(t)return this.zs(t)}}else if(this.Cs.test(e.key)){if(null!==e.newValue){let t=this.js(e.key,e.newValue);if(t)return this.Hs(t)}}else if(e.key===this.vs){if(null!==e.newValue){let t=this.xs(e.newValue);if(t)return this.Os(t)}}else if(e.key===this.Ss){let t=function(e){let t=rt.oe;if(null!=e)try{let n=JSON.parse(e);"number"==typeof n||nv(),t=n}catch(e){nm("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(e.newValue);t!==rt.oe&&this.sequenceNumberHandler(t)}else if(e.key===this.Fs){let t=this.Js(e.newValue);await Promise.all(t.map(e=>this.syncEngine.Ys(e)))}}}else this.ys.push(e)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){let r=new oZ(this.currentUser,e,t,n),i=oX(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){let t=oX(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){let t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){let r=oJ(this.persistenceKey,e),i=new o0(e,t,n);this.setItem(r,i.ds())}Ks(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){let t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){let n=this.$s(e);return o1.Es(n,t)}Gs(e,t){let n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return oZ.Es(new nc(i),r,t)}js(e,t){let n=Number(this.Cs.exec(e)[1]);return o0.Es(n,t)}xs(e){return o2.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);np("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){let n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],a=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||a.push(e)}),this.syncEngine.eo(s,a).then(()=>{this.ps=n})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=i3;return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class o3{constructor(){this.no=new o4,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new o4,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){for(let e of(np("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.uo))e(0)}ao(){for(let e of(np("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.uo))e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o8=null;function o7(){return null===o8?o8=268435456+Math.round(2147483648*Math.random()):o8++,"0x"+o8.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class lr extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So=`projects/${n}/databases/${r}`,this.bo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Do(){return!1}Co(e,t,n,r,i){let s=o7(),a=this.vo(e,t.toUriEncodedString());np("RestConnection",`Sending RPC '${e}' ${s}:`,a,n);let o={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(o,r,i),this.Mo(e,a,o,n).then(t=>(np("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw ng("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}xo(e,t,n,r,i,s){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}vo(e,t){let n=le[e];return`${this.wo}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){let i=o7();return new Promise((s,a)=>{let o=new d;o.setWithCredentials(!0),o.listenOnce(m.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case g.NO_ERROR:let t=o.getResponseJson();np(ln,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case g.TIMEOUT:np(ln,`RPC '${e}' ${i} timed out`),a(new nb(nw.DEADLINE_EXCEEDED,"Request time out"));break;case g.HTTP_ERROR:let n=o.getStatus();if(np(ln,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=null==e?void 0:e.error;if(t&&t.status&&t.message){let e=function(e){let t=e.toLowerCase().replace(/_/g,"-");return Object.values(nw).indexOf(t)>=0?t:nw.UNKNOWN}(t.status);a(new nb(e,t.message))}else a(new nb(nw.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new nb(nw.UNAVAILABLE,"Connection failed."));break;default:nv()}}finally{np(ln,`RPC '${e}' ${i} completed.`)}});let l=JSON.stringify(r);np(ln,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)})}Oo(e,t,n){let r=o7(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=b(),a=w(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.xmlHttpFactory=new f({})),this.Fo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;let u=i.join("");np(ln,`Creating RPC '${e}' stream ${r}: ${u}`,o);let c=s.createWebChannel(u,o),h=!1,d=!1,m=new lt({lo:t=>{d?np(ln,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(np(ln,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),np(ln,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},ho:()=>c.close()}),g=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return g(c,p.EventType.OPEN,()=>{d||(np(ln,`RPC '${e}' stream ${r} transport opened.`),m.mo())}),g(c,p.EventType.CLOSE,()=>{d||(d=!0,np(ln,`RPC '${e}' stream ${r} transport closed`),m.po())}),g(c,p.EventType.ERROR,t=>{d||(d=!0,ng(ln,`RPC '${e}' stream ${r} transport errored:`,t),m.po(new nb(nw.UNAVAILABLE,"The operation could not be completed")))}),g(c,p.EventType.MESSAGE,t=>{var n;if(!d){let i=t.data[0];i||nv();let s=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(s){np(ln,`RPC '${e}' stream ${r} received error:`,s);let t=s.status,n=function(e){let t=x[e];if(void 0!==t)return sN(t)}(t),i=s.message;void 0===n&&(n=nw.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,m.po(new nb(n,i)),c.close()}else np(ln,`RPC '${e}' stream ${r} received:`,i),m.yo(i)}}),g(a,v.STAT_EVENT,t=>{t.stat===y.PROXY?np(ln,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===y.NOPROXY&&np(ln,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.fo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return"undefined"!=typeof window?window:null}function ls(){return"undefined"!=typeof document?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(e){return new sH(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t,n=1e3,r=1.5,i=6e4){this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&np("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t,n,r,i,s,a,o){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new lo(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===nw.RESOURCE_EXHAUSTED?(nm(t.toString()),nm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===nw.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;let e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.jo===t&&this.u_(e,n)},t=>{e(()=>{let e=new nb(nw.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)})})}u_(e,t){let n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{n(()=>this.listener.Po())}),this.stream.To(()=>{n(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(e=>{n(()=>this.c_(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return np("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(np("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lu extends ll{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();let t=function(e,t){let n;if("targetChange"in t){var r,i;t.targetChange;let s="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:nv(),a=t.targetChange.targetIds||[],o=(i=t.targetChange.resumeToken,e.useProto3Json?(void 0===i||"string"==typeof i||nv(),rU.fromBase64String(i||"")):(void 0===i||i instanceof tV||i instanceof Uint8Array||nv(),rU.fromUint8Array(i||new Uint8Array))),l=t.targetChange.cause;n=new sU(s,a,o,l&&new nb(void 0===l.code?nw.UNKNOWN:sN(l.code),l.message||"")||null)}else if("documentChange"in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=s4(e,r.document.name),s=sJ(r.document.updateTime),a=r.document.createTime?sJ(r.document.createTime):nO.min(),o=new is({mapValue:{fields:r.document.fields}}),l=ia.newFoundDocument(i,s,a,o);n=new sB(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let r=t.documentDelete;r.document;let i=s4(e,r.document),s=r.readTime?sJ(r.readTime):nO.min(),a=ia.newNoDocument(i,s);n=new sB([],r.removedTargetIds||[],a.key,a)}else if("documentRemove"in t){t.documentRemove;let r=t.documentRemove;r.document;let i=s4(e,r.document);n=new sB([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return nv();{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,s=new sk(r,i);n=new sV(e.targetId,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return nO.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?nO.min():t.readTime?sJ(t.readTime):nO.min()}(e);return this.listener.h_(t,n)}P_(e){let t={};t.database=s5(this.serializer),t.addTarget=function(e,t){let n;let r=t.target;if((n=iP(r)?{documents:an(e,r)}:{query:ar(e,r)._t}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=sX(e,t.resumeToken);let r=sW(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(nO.min())>0){n.readTime=sY(e,t.snapshotVersion.toTimestamp());let r=sW(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);let n=function(e,t){let n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nv()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){let t={};t.database=s5(this.serializer),t.removeTarget=e,this.i_(t)}}class lc extends ll{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){var t,n;if(e.streamToken||nv(),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let r=(t=e.writeResults,n=e.commitTime,t&&t.length>0?(void 0!==n||nv(),t.map(e=>{let t;return(t=e.updateTime?sJ(e.updateTime):sJ(n)).isEqual(nO.min())&&(t=sJ(n)),new sc(t,e.transformResults||[])})):[]),i=sJ(e.commitTime);return this.listener.A_(i,r)}return e.writeResults&&0!==e.writeResults.length&&nv(),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=s5(this.serializer),this.i_(e)}d_(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>ae(this.serializer,e))};this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new nb(nw.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Co(e,s0(t,n),r,i,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===nw.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nb(nw.UNKNOWN,e.toString())})}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,s0(t,n),r,s,a,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===nw.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nb(nw.UNKNOWN,e.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class ld{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(nm(t),this.y_=!1):np("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io(e=>{n.enqueueAndForget(async()=>{lE(this)&&(np("RemoteStore","Restarting streams for network reachability change."),await async function(e){e.M_.add(4),await lm(e),e.N_.set("Unknown"),e.M_.delete(4),await lp(e)}(this))})}),this.N_=new ld(n,r)}}async function lp(e){if(lE(e))for(let t of e.x_)await t(!0)}async function lm(e){for(let t of e.x_)await t(!1)}function lg(e,t){e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),l_(e)?lb(e):lB(e).Xo()&&lv(e,t))}function ly(e,t){let n=lB(e);e.F_.delete(t),n.Xo()&&lw(e,t),0===e.F_.size&&(n.Xo()?n.n_():lE(e)&&e.N_.set("Unknown"))}function lv(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(nO.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}lB(e).P_(t)}function lw(e,t){e.L_.xe(t),lB(e).I_(t)}function lb(e){e.L_=new sj({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),lB(e).start(),e.N_.w_()}function l_(e){return lE(e)&&!lB(e).Zo()&&e.F_.size>0}function lE(e){return 0===e.M_.size}async function lS(e){e.N_.set("Online")}async function lI(e){e.F_.forEach((t,n)=>{lv(e,t)})}async function lx(e,t){e.L_=void 0,l_(e)?(e.N_.D_(t),lb(e)):e.N_.set("Unknown")}async function lT(e,t,n){if(e.N_.set("Online"),t instanceof sU&&2===t.state&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){np("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await lk(e,n)}else if(t instanceof sB?e.L_.Ke(t):t instanceof sV?e.L_.He(t):e.L_.We(t),!n.isEqual(nO.min()))try{let t=await oU(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.L_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{let r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(rU.EMPTY_BYTE_STRING,r.snapshotVersion)),lw(e,t);let i=new al(r.target,t,n,r.sequenceNumber);lv(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){np("RemoteStore","Failed to raise snapshot:",t),await lk(e,t)}}async function lk(e,t,n){if(!n6(t))throw t;e.M_.add(1),await lm(e),e.N_.set("Offline"),n||(n=()=>oU(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{np("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await lp(e)})}function lC(e,t){return t().catch(n=>lk(e,n,t))}async function lN(e){let t=lV(e),n=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;lE(e)&&e.v_.length<10;)try{let r=await function(e,t){return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}(e.localStore,n);if(null===r){0===e.v_.length&&t.n_();break}n=r.batchId,function(e,t){e.v_.push(t);let n=lV(e);n.Xo()&&n.E_&&n.d_(t.mutations)}(e,r)}catch(t){await lk(e,t)}lD(e)&&lA(e)}function lD(e){return lE(e)&&!lV(e).Zo()&&e.v_.length>0}function lA(e){lV(e).start()}async function lP(e){lV(e).V_()}async function lR(e){let t=lV(e);for(let n of e.v_)t.d_(n.mutations)}async function lO(e,t,n){let r=e.v_.shift(),i=sx.from(r,t,n);await lC(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await lN(e)}async function lL(e,t){t&&lV(e).E_&&await async function(e,t){var n;if(sC(n=t.code)&&n!==nw.ABORTED){let n=e.v_.shift();lV(e).t_(),await lC(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await lN(e)}}(e,t),lD(e)&&lA(e)}async function lM(e,t){e.asyncQueue.verifyOperationInProgress(),np("RemoteStore","RemoteStore received new credentials");let n=lE(e);e.M_.add(3),await lm(e),n&&e.N_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),await lp(e)}async function lF(e,t){t?(e.M_.delete(2),await lp(e)):t||(e.M_.add(2),await lm(e),e.N_.set("Unknown"))}function lB(e){var t,n,r;return e.B_||(e.B_=(t=e.datastore,n=e.asyncQueue,r={Po:lS.bind(null,e),To:lI.bind(null,e),Ao:lx.bind(null,e),h_:lT.bind(null,e)},t.f_(),new lu(n,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,r)),e.x_.push(async t=>{t?(e.B_.t_(),l_(e)?lb(e):e.N_.set("Unknown")):(await e.B_.stop(),e.L_=void 0)})),e.B_}function lV(e){var t,n,r;return e.k_||(e.k_=(t=e.datastore,n=e.asyncQueue,r={Po:()=>Promise.resolve(),To:lP.bind(null,e),Ao:lL.bind(null,e),R_:lR.bind(null,e),A_:lO.bind(null,e)},t.f_(),new lc(n,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,r)),e.x_.push(async t=>{t?(e.k_.t_(),await lN(e)):(await e.k_.stop(),e.v_.length>0&&(np("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new n_,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){let s=new lU(e,t,Date.now()+n,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nb(nw.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lz(e,t){if(nm("AsyncQueue",`${t}: ${e}`),n6(e))return new nb(nw.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.comparator=e?(t,n)=>e(t,n)||nV.comparator(t.key,n.key):(e,t)=>nV.comparator(e.key,t.key),this.keyedMap=iZ(),this.sortedSet=new rP(this.comparator)}static emptySet(e){return new lj(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lj)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let n=new lj;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{constructor(){this.q_=new rP(nV.comparator)}track(e){let t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):nv():this.q_=this.q_.insert(t,e)}Q_(){let e=[];return this.q_.inorderTraversal((t,n)=>{e.push(n)}),e}}class l${constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new l$(e,t,lj.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&i$(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class lK{constructor(){this.queries=new iY(e=>iG(e),i$),this.onlineState="Unknown",this.z_=new Set}}async function lQ(e,t){let n=3,r=t.query,i=e.queries.get(r);i?!i.W_()&&t.G_()&&(n=2):(i=new lG,n=t.G_()?0:1);try{switch(n){case 0:i.K_=await e.onListen(r,!0);break;case 1:i.K_=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(n){let e=lz(n,`Initialization of query '${iK(t.query)}' failed`);return void t.onError(e)}e.queries.set(r,i),i.U_.push(t),t.j_(e.onlineState),i.K_&&t.H_(i.K_)&&lX(e)}async function lH(e,t){let n=t.query,r=3,i=e.queries.get(n);if(i){let e=i.U_.indexOf(t);e>=0&&(i.U_.splice(e,1),0===i.U_.length?r=t.G_()?0:1:!i.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function lW(e,t){let n=!1;for(let r of t){let t=r.query,i=e.queries.get(t);if(i){for(let e of i.U_)e.H_(r)&&(n=!0);i.K_=r}}n&&lX(e)}function lY(e,t,n){let r=e.queries.get(t);if(r)for(let e of r.U_)e.onError(n);e.queries.delete(t)}function lX(e){e.z_.forEach(e=>{e.next()})}(C=k||(k={})).J_="default",C.Cache="cache";class lJ{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)3!==n.type&&t.push(n);e=new l$(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!(e.fromCache&&this.G_())||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;let t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=l$.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==k.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lZ{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e){this.serializer=e}Ps(e){return s4(this.serializer,e)}Is(e){return e.metadata.exists?s7(this.serializer,e.document,!1):ia.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return sJ(e)}}class l1{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=l2(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;let n=nM.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){let t=new Map,n=new l0(this.serializer);for(let r of e)if(r.metadata.queries){let e=n.Ps(r.metadata.name);for(let n of r.metadata.queries){let r=(t.get(n)||i6()).add(e);t.set(n,r)}}return t}async complete(){let e=await oH(this.localStore,new l0(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(let e of this.queries)await oW(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function l2(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.key=e}}class l6{constructor(e){this.key=e}}class l3{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=i6(),this.mutatedKeys=i6(),this.Ia=iW(e),this.Ta=new lj(this.Ia)}get Ea(){return this.la}da(e,t){let n=t?t.Aa:new lq,r=t?t.Ta:this.Ta,i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1,o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{let u=r.get(e),c=iQ(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Ra(u,c)||(n.track({type:2,doc:c}),f=!0,(o&&this.Ia(c,o)>0||l&&0>this.Ia(c,l))&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(o||l)&&(a=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:a,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((e,t)=>(function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nv()}};return n(e)-n(t)})(e.type,t.type)||this.Ia(e.doc,t.doc)),this.Va(n),r=null!=r&&r;let a=t&&!r?this.ma():[],o=0===this.Pa.size&&this.current&&!r?1:0,l=o!==this.ha;return(this.ha=o,0!==s.length||l)?{snapshot:new l$(this.query,e.Ta,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new lq,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(e=>this.la=this.la.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=i6(),this.Ta.forEach(e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))});let t=[];return e.forEach(e=>{this.Pa.has(e)||t.push(new l6(e))}),this.Pa.forEach(n=>{e.has(n)||t.push(new l4(n))}),t}pa(e){this.la=e.hs,this.Pa=i6();let t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return l$.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class l5{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class l9{constructor(e){this.key=e,this.wa=!1}}class l8{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new iY(e=>iG(e),i$),this.Da=new Map,this.Ca=new Set,this.va=new rP(nV.comparator),this.Fa=new Map,this.Ma=new ow,this.xa={},this.Oa=new Map,this.Na=a5.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function l7(e,t,n=!0){let r;let i=uD(e),s=i.ba.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=await ut(i,t,n,!0),r}async function ue(e,t){let n=uD(e);await ut(n,t,!0,!1)}async function ut(e,t,n,r){let i;let s=await oj(e.localStore,iz(t)),a=s.targetId,o=n?e.sharedClientState.addLocalQueryTarget(a):"not-current";return r&&(i=await un(e,t,a,"current"===o,s.resumeToken)),e.isPrimaryClient&&n&&lg(e.remoteStore,s),i}async function un(e,t,n,r,i){e.Ba=(t,n,r)=>(async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await o$(e.localStore,t.query,!1).then(({documents:e})=>t.view.da(e,i)));let s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return ug(e,t.targetId,o.fa),o.snapshot})(e,t,n,r);let s=await o$(e.localStore,t,!0),a=new l3(t,s.hs),o=a.da(s.documents),l=sF.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=a.applyChanges(o,e.isPrimaryClient,l);ug(e,n,u.fa);let c=new l5(t,n,a);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),u.snapshot}async function ur(e,t,n){let r=e.ba.get(t),i=e.Da.get(r.targetId);if(i.length>1)return e.Da.set(r.targetId,i.filter(e=>!i$(e,t))),void e.ba.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||await oq(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),n&&ly(e.remoteStore,r.targetId),up(e,r.targetId)}).catch(nX)):(up(e,r.targetId),await oq(e.localStore,r.targetId,!0))}async function ui(e,t){let n=e.ba.get(t),r=e.Da.get(n.targetId);e.isPrimaryClient&&1===r.length&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),ly(e.remoteStore,n.targetId))}async function us(e,t,n){let r=uA(e);try{var i;let e;let s=await function(e,t){let n,r;let i=nR.now(),s=t.reduce((e,t)=>e.add(t.key),i6());return e.persistence.runTransaction("Locally write mutations","readwrite",a=>{let o=iX,l=i6();return e.os.getEntries(a,s).next(e=>{(o=e).forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>e.localDocuments.getOverlayedDocuments(a,o)).next(r=>{n=r;let s=[];for(let e of t){let t=function(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=se(r.transform,e||null);null!=i&&(null===n&&(n=is.empty()),n.set(r.field,i))}return n||null}(e,n.get(e.key).overlayedDocument);null!=t&&s.push(new sv(e.key,t,function e(t){let n=[];return rD(t.fields,(t,r)=>{let i=new nB([t]);if(r7(r)){let t=e(r.mapValue).fields;if(0===t.length)n.push(i);else for(let e of t)n.push(i.child(e))}else n.push(i)}),new rB(n)}(t.value.mapValue),sh.exists(!0)))}return e.mutationQueue.addMutationBatch(a,i,s,t)}).next(t=>{r=t;let i=t.applyToLocalDocumentSet(n,l);return e.documentOverlayCache.saveOverlays(a,t.batchId,i)})}).then(()=>({batchId:r.batchId,changes:i0(n)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),i=s.batchId,(e=r.xa[r.currentUser.toKey()])||(e=new rP(nA)),e=e.insert(i,n),r.xa[r.currentUser.toKey()]=e,await uv(r,s.changes),await lN(r.remoteStore)}catch(t){let e=lz(t,"Failed to persist write");n.reject(e)}}async function ua(e,t){try{let n=await function(e,t){let n=t.snapshotVersion,r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{let s=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;let a=[];t.targetChanges.forEach((s,o)=>{var l;let u=r.get(o);if(!u)return;a.push(e.Qr.removeMatchingKeys(i,s.removedDocuments,o).next(()=>e.Qr.addMatchingKeys(i,s.addedDocuments,o)));let c=u.withSequenceNumber(i.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(rU.EMPTY_BYTE_STRING,nO.min()).withLastLimboFreeSnapshotVersion(nO.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,n)),r=r.insert(o,c),l=c,(0===u.resumeToken.approximateByteSize()||l.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()>=3e8||s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size>0)&&a.push(e.Qr.updateTargetData(i,c))});let o=iX,l=i6();if(t.documentUpdates.forEach(n=>{t.resolvedLimboDocuments.has(n)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(i,n))}),a.push(oz(i,s,t.documentUpdates).next(e=>{o=e.cs,l=e.ls})),!n.isEqual(nO.min())){let t=e.Qr.getLastRemoteSnapshotVersion(i).next(t=>e.Qr.setTargetsMetadata(i,i.currentSequenceNumber,n));a.push(t)}return nJ.waitFor(a).next(()=>s.apply(i)).next(()=>e.localDocuments.getLocalViewOfDocuments(i,o,l)).next(()=>o)}).then(t=>(e.ns=r,t))}(e.localStore,t);t.targetChanges.forEach((t,n)=>{let r=e.Fa.get(n);r&&(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1||nv(),t.addedDocuments.size>0?r.wa=!0:t.modifiedDocuments.size>0?r.wa||nv():t.removedDocuments.size>0&&(r.wa||nv(),r.wa=!1))}),await uv(e,n,t)}catch(e){await nX(e)}}function uo(e,t,n){var r;if(e.isPrimaryClient&&0===n||!e.isPrimaryClient&&1===n){let n;let i=[];e.ba.forEach((e,n)=>{let r=n.view.j_(t);r.snapshot&&i.push(r.snapshot)}),(r=e.eventManager).onlineState=t,n=!1,r.queries.forEach((e,r)=>{for(let e of r.U_)e.j_(t)&&(n=!0)}),n&&lX(r),i.length&&e.Sa.h_(i),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t)}}async function ul(e,t,n){e.sharedClientState.updateQueryState(t,"rejected",n);let r=e.Fa.get(t),i=r&&r.key;if(i){let n=new rP(nV.comparator);n=n.insert(i,ia.newNoDocument(i,nO.min()));let r=i6().add(i),s=new sM(nO.min(),new Map,new rP(nA),n,r);await ua(e,s),e.va=e.va.remove(i),e.Fa.delete(t),uy(e)}else await oq(e.localStore,t,!1).then(()=>up(e,t,n)).catch(nX)}async function uu(e,t){var n;let r=t.batch.batchId;try{let i=await (n=e.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return(function(e,t,n,r){let i=n.batch,s=i.keys(),a=nJ.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{let s=n.docVersions.get(e);null!==s||nv(),0>t.version.compareTo(s)&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))})(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=i6();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))});uf(e,r,null),ud(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await uv(e,i)}catch(e){await nX(e)}}async function uc(e,t,n){var r;try{let i=await (r=e.localStore).persistence.runTransaction("Reject batch","readwrite-primary",e=>{let n;return r.mutationQueue.lookupMutationBatch(e,t).next(t=>(null!==t||nv(),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t))).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,n)).next(()=>r.localDocuments.getDocuments(e,n))});uf(e,t,n),ud(e,t),e.sharedClientState.updateMutationState(t,"rejected",n),await uv(e,i)}catch(e){await nX(e)}}async function uh(e,t){var n;lE(e.remoteStore)||np("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=await (n=e.localStore).persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>n.mutationQueue.getHighestUnacknowledgedBatchId(e));if(-1===r)return void t.resolve();let i=e.Oa.get(r)||[];i.push(t),e.Oa.set(r,i)}catch(n){let e=lz(n,"Initialization of waitForPendingWrites() operation failed");t.reject(e)}}function ud(e,t){(e.Oa.get(t)||[]).forEach(e=>{e.resolve()}),e.Oa.delete(t)}function uf(e,t,n){let r=e.xa[e.currentUser.toKey()];if(r){let i=r.get(t);i&&(n?i.reject(n):i.resolve(),r=r.remove(t)),e.xa[e.currentUser.toKey()]=r}}function up(e,t,n=null){for(let r of(e.sharedClientState.removeLocalQueryTarget(t),e.Da.get(t)))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(t=>{e.Ma.containsKey(t)||um(e,t)})}function um(e,t){e.Ca.delete(t.path.canonicalString());let n=e.va.get(t);null!==n&&(ly(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),uy(e))}function ug(e,t,n){for(let r of n)r instanceof l4?(e.Ma.addReference(r.key,t),function(e,t){let n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(np("SyncEngine","New document in limbo: "+n),e.Ca.add(r),uy(e))}(e,r)):r instanceof l6?(np("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||um(e,r.key)):nv()}function uy(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){let t=e.Ca.values().next().value;e.Ca.delete(t);let n=new nV(nM.fromString(t)),r=e.Na.next();e.Fa.set(r,new l9(n)),e.va=e.va.insert(n,r),lg(e.remoteStore,new al(iz(iF(n.path)),r,"TargetPurposeLimboResolution",rt.oe))}}async function uv(e,t,n){let r=[],i=[],s=[];e.ba.isEmpty()||(e.ba.forEach((a,o)=>{s.push(e.Ba(o,t,n).then(t=>{if((t||n)&&e.isPrimaryClient){let n=t&&!t.fromCache;e.sharedClientState.updateQueryState(o.targetId,n?"current":"not-current")}if(t){r.push(t);let e=oL.Ki(o.targetId,t);i.push(e)}}))}),await Promise.all(s),e.Sa.h_(r),await async function(e,t){try{await e.persistence.runTransaction("notifyLocalViewChanges","readwrite",n=>nJ.forEach(t,t=>nJ.forEach(t.qi,r=>e.persistence.referenceDelegate.addReference(n,t.targetId,r)).next(()=>nJ.forEach(t.Qi,r=>e.persistence.referenceDelegate.removeReference(n,t.targetId,r)))))}catch(e){if(!n6(e))throw e;np("LocalStore","Failed to update sequence numbers: "+e)}for(let n of t){let t=n.targetId;if(!n.fromCache){let n=e.ns.get(t),r=n.snapshotVersion,i=n.withLastLimboFreeSnapshotVersion(r);e.ns=e.ns.insert(t,i)}}}(e.localStore,i))}async function uw(e,t){var n;if(!e.currentUser.isEqual(t)){np("SyncEngine","User change. New user:",t.toKey());let r=await oV(e.localStore,t);e.currentUser=t,n="'waitForPendingWrites' promise is rejected due to a user change.",e.Oa.forEach(e=>{e.forEach(e=>{e.reject(new nb(nw.CANCELLED,n))})}),e.Oa.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await uv(e,r.us)}}function ub(e,t){let n=e.Fa.get(t);if(n&&n.wa)return i6().add(n.key);{let n=i6(),r=e.Da.get(t);if(!r)return n;for(let t of r){let r=e.ba.get(t);n=n.unionWith(r.view.Ea)}return n}}async function u_(e,t){let n=await o$(e.localStore,t.query,!0),r=t.view.pa(n);return e.isPrimaryClient&&ug(e,t.targetId,r.fa),r}async function uE(e,t){return oK(e.localStore,t).then(t=>uv(e,t))}async function uS(e,t,n,r){let i=await function(e,t){let n=e.mutationQueue;return e.persistence.runTransaction("Lookup mutation documents","readonly",r=>n.vn(r,t).next(t=>t?e.localDocuments.getDocuments(r,t):nJ.resolve(null)))}(e.localStore,t);null!==i?("pending"===n?await lN(e.remoteStore):"acknowledged"===n||"rejected"===n?(uf(e,t,r||null),ud(e,t),function(e,t){e.mutationQueue.Mn(t)}(e.localStore,t)):nv(),await uv(e,i)):np("SyncEngine","Cannot apply mutation batch with id: "+t)}async function uI(e,t){if(uD(e),uA(e),!0===t&&!0!==e.La){let t=e.sharedClientState.getAllActiveQueryTargets(),n=await ux(e,t.toArray());for(let t of(e.La=!0,await lF(e.remoteStore,!0),n))lg(e.remoteStore,t)}else if(!1===t&&!1!==e.La){let t=[],n=Promise.resolve();e.Da.forEach((r,i)=>{e.sharedClientState.isLocalQueryTarget(i)?t.push(i):n=n.then(()=>(up(e,i),oq(e.localStore,i,!0))),ly(e.remoteStore,i)}),await n,await ux(e,t),e.Fa.forEach((t,n)=>{ly(e.remoteStore,n)}),e.Ma.mr(),e.Fa=new Map,e.va=new rP(nV.comparator),e.La=!1,await lF(e.remoteStore,!1)}}async function ux(e,t,n){let r=[],i=[];for(let n of t){let t;let s=e.Da.get(n);if(s&&0!==s.length)for(let n of(t=await oj(e.localStore,iz(s[0])),s)){let t=e.ba.get(n),r=await u_(e,t);r.snapshot&&i.push(r.snapshot)}else{let r=await oG(e.localStore,n);t=await oj(e.localStore,r),await un(e,uT(r),n,!1,t.resumeToken)}r.push(t)}return e.Sa.h_(i),r}function uT(e){var t,n,r,i;return t=e.path,n=e.collectionGroup,r=e.orderBy,i=e.filters,new iM(t,n,r,i,e.limit,"F",e.startAt,e.endAt)}function uk(e){return e.localStore.persistence.Bi()}async function uC(e,t,n,r){if(e.La)return void np("SyncEngine","Ignoring unexpected query state notification.");let i=e.Da.get(t);if(i&&i.length>0)switch(n){case"current":case"not-current":{let r=await oK(e.localStore,iH(i[0])),s=sM.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,rU.EMPTY_BYTE_STRING);await uv(e,r,s);break}case"rejected":await oq(e.localStore,t,!0),up(e,t,r);break;default:nv()}}async function uN(e,t,n){let r=uD(e);if(r.La){for(let e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){np("SyncEngine","Adding an already active target "+e);continue}let t=await oG(r.localStore,e),n=await oj(r.localStore,t);await un(r,uT(t),n.targetId,!1,n.resumeToken),lg(r.remoteStore,n)}for(let e of n)r.Da.has(e)&&await oq(r.localStore,e,!1).then(()=>{ly(r.remoteStore,e),up(r,e)}).catch(nX)}}function uD(e){return e.remoteStore.remoteSyncer.applyRemoteEvent=ua.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ub.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ul.bind(null,e),e.Sa.h_=lW.bind(null,e.eventManager),e.Sa.ka=lY.bind(null,e.eventManager),e}function uA(e){return e.remoteStore.remoteSyncer.applySuccessfulWrite=uu.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uc.bind(null,e),e}class uP{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=la(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){var t;return t=this.persistence,new oB(t,new oF,e.initialUser,this.serializer)}createPersistence(e){return new ox(ok.Hr,this.serializer)}createSharedClientState(e){return new o3}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class uR extends uP{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await uA(this.Qa.syncEngine),await lN(this.Qa.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){var t;return t=this.persistence,new oB(t,new oF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new or(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let n=new re(t,this.persistence);return new n7(e.asyncQueue,n)}createPersistence(e){let t=oO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?aJ.withCacheSize(this.cacheSizeBytes):aJ.DEFAULT;return new oA(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,li(),ls(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new o3}}class uO extends uR{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);let t=this.Qa.syncEngine;this.sharedClientState instanceof o6&&(this.sharedClientState.syncEngine={Zs:uS.bind(null,t),Xs:uC.bind(null,t),eo:uN.bind(null,t),Bi:uk.bind(null,t),Ys:uE.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi(async e=>{await uI(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){let t=li();if(!o6.D(t))throw new nb(nw.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let n=oO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new o6(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class uL{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>uo(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=uw.bind(null,this.syncEngine),await lF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new lK}createDatastore(e){let t=la(e.databaseInfo.databaseId),n=new lr(e.databaseInfo);return new lh(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){var t;return t=this.localStore,new lf(t,this.datastore,e.asyncQueue,e=>uo(this.syncEngine,e,0),o9.D()?new o9:new o5)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){let o=new l8(e,t,n,r,i,s);return a&&(o.La=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){np("RemoteStore","RemoteStore shutting down."),e.M_.add(5),await lm(e),e.O_.shutdown(),e.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){let r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):nm("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new n_,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(null==e?void 0:e.ia)}`))},e=>this.metadata.reject(e))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){let e=await this.za();if(null===e)return null;let t=this.Wa.decode(e),n=Number(t);return isNaN(n)&&this.ja(`length string (${t}) is not valid number`),new lZ(JSON.parse(await this.Ha(n)),e.length+n)}Ja(){return this.buffer.findIndex(e=>123===e)}async za(){for(;0>this.Ja()&&!await this.Ya(););if(0===this.buffer.length)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");let t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),Error(`Invalid bundle format: ${e}`)}async Ya(){let e=await this.Ua.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new nb(nw.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await async function(e,t){let n={documents:t.map(t=>s2(e.serializer,t))},r=await e.xo("BatchGetDocuments",e.serializer.databaseId,nM.emptyPath(),n,t.length),i=new Map;r.forEach(t=>{var n;let r=(n=e.serializer,"found"in t?function(e,t){t.found||nv(),t.found.name,t.found.updateTime;let n=s4(e,t.found.name),r=sJ(t.found.updateTime),i=t.found.createTime?sJ(t.found.createTime):nO.min(),s=new is({mapValue:{fields:t.found.fields}});return ia.newFoundDocument(n,r,i,s)}(n,t):"missing"in t?function(e,t){t.missing||nv(),t.readTime||nv();let n=s4(e,t.missing),r=sJ(t.readTime);return ia.newNoDocument(n,r)}(n,t):nv());i.set(r.key.toString(),r)});let s=[];return t.forEach(e=>{let t=i.get(e.toString());t||nv(),s.push(t)}),s}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new sE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{let n=nV.fromPath(t);this.mutations.push(new sS(n,this.precondition(n)))}),await async function(e,t){let n={writes:t.map(t=>ae(e.serializer,t))};await e.Co("Commit",e.serializer.databaseId,nM.emptyPath(),n)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nv();t=nO.min()}let n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new nb(nw.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(nO.min())?sh.exists(!1):sh.updateTime(t):sh.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(nO.min()))throw new nb(nw.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sh.updateTime(t)}return sh.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Yo=new lo(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(async()=>{let e=new uV(this.datastore),t=this.tu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.nu(e)}))}).catch(e=>{this.nu(e)})})}tu(e){try{let t=this.updateFunction(e);return!rn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){let t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!sC(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=nc.UNAUTHENTICATED,this.clientId=nD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{np("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(np("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new nb(nw.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new n_;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let t=lz(n,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function uj(e,t){e.asyncQueue.verifyOperationInProgress(),np("FirestoreClient","Initializing OfflineComponentProvider");let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await oV(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function uq(e,t){e.asyncQueue.verifyOperationInProgress();let n=await uG(e);np("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>lM(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>lM(t.remoteStore,n)),e._onlineComponents=t}function u$(e){return"FirebaseError"===e.name?e.code===nw.FAILED_PRECONDITION||e.code===nw.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function uG(e){if(!e._offlineComponents){if(e._uninitializedComponentsProvider){np("FirestoreClient","Using user provided OfflineComponentProvider");try{await uj(e,e._uninitializedComponentsProvider._offline)}catch(t){if(!u$(t))throw t;ng("Error using user provided cache. Falling back to memory cache: "+t),await uj(e,new uP)}}else np("FirestoreClient","Using default OfflineComponentProvider"),await uj(e,new uP)}return e._offlineComponents}async function uK(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(np("FirestoreClient","Using user provided OnlineComponentProvider"),await uq(e,e._uninitializedComponentsProvider._online)):(np("FirestoreClient","Using default OnlineComponentProvider"),await uq(e,new uL))),e._onlineComponents}function uQ(e){return uG(e).then(e=>e.persistence)}function uH(e){return uG(e).then(e=>e.localStore)}function uW(e){return uK(e).then(e=>e.remoteStore)}function uY(e){return uK(e).then(e=>e.syncEngine)}async function uX(e){let t=await uK(e),n=t.eventManager;return n.onListen=l7.bind(null,t.syncEngine),n.onUnlisten=ur.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ue.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ui.bind(null,t.syncEngine),n}function uJ(e,t,n={}){let r=new n_;return e.asyncQueue.enqueueAndForget(async()=>(function(e,t,n,r,i){let s=new uF({next:s=>{t.enqueueAndForget(()=>lH(e,a));let o=s.docs.has(n);!o&&s.fromCache?i.reject(new nb(nw.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&s.fromCache&&r&&"server"===r.source?i.reject(new nb(nw.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new lJ(iF(n.path),s,{includeMetadataChanges:!0,ra:!0});return lQ(e,a)})(await uX(e),e.asyncQueue,t,n,r)),r.promise}function uZ(e,t,n={}){let r=new n_;return e.asyncQueue.enqueueAndForget(async()=>(function(e,t,n,r,i){let s=new lJ(n,new uF({next:n=>{t.enqueueAndForget(()=>lH(e,s)),n.fromCache&&"server"===r.source?i.reject(new nb(nw.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),{includeMetadataChanges:!0,ra:!0});return lQ(e,s)})(await uX(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(e,t,n){if(!n)throw new nb(nw.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function u4(e,t,n,r){if(!0===t&&!0===r)throw new nb(nw.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function u6(e){if(!nV.isDocumentKey(e))throw new nb(nw.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function u3(e){if(nV.isDocumentKey(e))throw new nb(nw.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function u5(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var t;let n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}return"function"==typeof e?"a function":nv()}function u9(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nb(nw.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=u5(e);throw new nb(nw.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function u8(e,t){if(t<=0)throw new nb(nw.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new nb(nw.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new nb(nw.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}u4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u0(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new nb(nw.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new nb(nw.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new nb(nw.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var t,n;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ce{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u7({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new nb(nw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new nb(nw.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u7(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new nS;switch(e.type){case"firstParty":return new nk(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new nb(nw.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=u1.get(e);t&&(np("ComponentProvider","Removing Datastore"),u1.delete(e),t.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ct(this.firestore,e,this._query)}}class cn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class cr extends ct{constructor(e,t,n){super(e,t,iF(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new nV(e))}withConverter(e){return new cr(this.firestore,e,this._path)}}function ci(e,t,...n){if(e=eS(e),u2("collection","path",t),e instanceof ce){let r=nM.fromString(t,...n);return u3(r),new cr(e,null,r)}{if(!(e instanceof cn||e instanceof cr))throw new nb(nw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(nM.fromString(t,...n));return u3(r),new cr(e.firestore,null,r)}}function cs(e,t,...n){if(e=eS(e),1==arguments.length&&(t=nD.newId()),u2("doc","path",t),e instanceof ce){let r=nM.fromString(t,...n);return u6(r),new cn(e,null,new nV(r))}{if(!(e instanceof cn||e instanceof cr))throw new nb(nw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(nM.fromString(t,...n));return u6(r),new cn(e.firestore,e instanceof cr?e.converter:null,new nV(r))}}function ca(e,t){return e=eS(e),t=eS(t),(e instanceof cn||e instanceof cr)&&(t instanceof cn||t instanceof cr)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function co(e,t){return e=eS(e),t=eS(t),e instanceof ct&&t instanceof ct&&e.firestore===t.firestore&&i$(e._query,t._query)&&e.converter===t.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new lo(this,"async_queue_retry"),this.hu=()=>{let e=ls();e&&np("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};let e=ls();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let t=ls();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let t=new n_;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!n6(e))throw e;np("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){let t=this.iu.then(()=>(this.uu=!0,e().catch(e=>{let t;throw this.au=e,this.uu=!1,nm("INTERNAL UNHANDLED ERROR: ",(t=e.message||"",e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t)),e}).then(e=>(this.uu=!1,e))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);let r=lU.createAndSchedule(this,e,t,n,e=>this.Eu(e));return this._u.push(r),r}Pu(){this.au&&nv()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(let t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{for(let t of(this._u.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this._u))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let t=this._u.indexOf(e);this._u.splice(t,1)}}function cu(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(let n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])}class cc{constructor(){this._progressObserver={},this._taskCompletionResolver=new n_,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ch extends ce{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new cl,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||cf(this),this._firestoreClient.terminate()}}function cd(e){return e._firestoreClient||cf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function cf(e){var t,n,r,i;let s=e._freezeSettings(),a=(i=e._databaseId,new rH(i,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,u0(s.experimentalLongPollingOptions),s.useFetchStreams));e._firestoreClient=new uz(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function cp(e,t,n){let r=new n_;return e.asyncQueue.enqueue(async()=>{try{await uj(e,n),await uq(e,t),r.resolve()}catch(e){if(!u$(e))throw e;ng("Error enabling indexeddb cache. Falling back to memory cache: "+e),r.reject(e)}}).then(()=>r.promise)}function cm(e){if(e._initialized||e._terminated)throw new nb(nw.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cg(rU.fromBase64String(e))}catch(e){throw new nb(nw.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new cg(rU.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new nb(nw.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nB(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nb(nw.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nb(nw.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nA(this._lat,e._lat)||nA(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=/^__.*__$/;class c_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new sv(e,this.data,this.fieldMask,t,this.fieldTransforms):new sy(e,this.data,t,this.fieldTransforms)}}class cE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new sv(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nv()}}class cI{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new cI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;let n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;let n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return c$(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(cS(this.fu)&&cb.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class cx{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||la(e)}Fu(e,t,n,r=!1){return new cI({fu:e,methodName:t,vu:n,path:nB.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cT(e){let t=e._freezeSettings(),n=la(e._databaseId);return new cx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ck(e,t,n,r,i,s={}){let a,o;let l=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);cU("Data must be an object, but it was:",l,r);let u=cB(r,l);if(s.merge)a=new rB(l.fieldMask),o=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let r of s.mergeFields){let i=cz(t,r,n);if(!l.contains(i))throw new nb(nw.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);cG(e,i)||e.push(i)}a=new rB(e),o=l.fieldTransforms.filter(e=>a.covers(e.field))}else a=null,o=l.fieldTransforms;return new c_(new is(u),a,o)}class cC extends cv{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cC}}function cN(e,t,n){return new cI({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class cD extends cv{_toFieldTransform(e){return new su(e.path,new st)}isEqual(e){return e instanceof cD}}class cA extends cv{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){let t=cN(this,e,!0),n=new sn(this.Mu.map(e=>cF(e,t)));return new su(e.path,n)}isEqual(e){return e instanceof cA&&ev(this.Mu,e.Mu)}}class cP extends cv{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){let t=cN(this,e,!0),n=new si(this.Mu.map(e=>cF(e,t)));return new su(e.path,n)}isEqual(e){return e instanceof cP&&ev(this.Mu,e.Mu)}}class cR extends cv{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){let t=new sa(e.serializer,i8(e.serializer,this.xu));return new su(e.path,t)}isEqual(e){return e instanceof cR&&this.xu===e.xu}}function cO(e,t,n,r){let i=e.Fu(1,t,n);cU("Data must be an object, but it was:",i,r);let s=[],a=is.empty();return rD(r,(e,r)=>{let o=cq(t,e,n);r=eS(r);let l=i.Su(o);if(r instanceof cC)s.push(o);else{let e=cF(r,l);null!=e&&(s.push(o),a.set(o,e))}}),new cE(a,new rB(s),i.fieldTransforms)}function cL(e,t,n,r,i,s){let a=e.Fu(1,t,n),o=[cz(t,r,n)],l=[i];if(s.length%2!=0)throw new nb(nw.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)o.push(cz(t,s[e])),l.push(s[e+1]);let u=[],c=is.empty();for(let e=o.length-1;e>=0;--e)if(!cG(u,o[e])){let t=o[e],n=l[e];n=eS(n);let r=a.Su(t);if(n instanceof cC)u.push(t);else{let e=cF(n,r);null!=e&&(u.push(t),c.set(t,e))}}return new cE(c,new rB(u),a.fieldTransforms)}function cM(e,t,n,r=!1){return cF(n,e.Fu(r?4:3,t))}function cF(e,t){if(cV(e=eS(e)))return cU("Unsupported field value:",t,e),cB(e,t);if(e instanceof cv)return function(e,t){if(!cS(t.fu))throw t.Du(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Du(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){let n=[],r=0;for(let i of e){let e=cF(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=eS(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return i8(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let n=nR.fromDate(e);return{timestampValue:sY(t.serializer,n)}}if(e instanceof nR){let n=new nR(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sY(t.serializer,n)}}if(e instanceof cw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof cg)return{bytesValue:sX(t.serializer,e._byteString)};if(e instanceof cn){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:sZ(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du(`Unsupported field value: ${u5(e)}`)}(e,t)}function cB(e,t){let n={};return rA(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rD(e,(e,r)=>{let i=cF(r,t.pu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function cV(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nR||e instanceof cw||e instanceof cg||e instanceof cn||e instanceof cv)}function cU(e,t,n){if(!cV(n)||!("object"==typeof n&&null!==n&&(Object.getPrototypeOf(n)===Object.prototype||null===Object.getPrototypeOf(n)))){let r=u5(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function cz(e,t,n){if((t=eS(t))instanceof cy)return t._internalPath;if("string"==typeof t)return cq(e,t);throw c$("Field path arguments must be of type string or ",e,!1,void 0,n)}const cj=RegExp("[~\\*/\\[\\]]");function cq(e,t,n){if(t.search(cj)>=0)throw c$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new cy(...t.split("."))._internalPath}catch(r){throw c$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function c$(e,t,n,r,i){let s=r&&!r.isEmpty(),a=void 0!==i,o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new nb(nw.INVALID_ARGUMENT,o+e+l)}function cG(e,t){return e.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cK{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new cQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(cH("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cQ extends cK{data(){return super.data()}}function cH(e,t){return"string"==typeof t?cq(e,t):t instanceof cy?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new nb(nw.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cY{}class cX extends cY{}function cJ(e,t,...n){let r=[];for(let i of(t instanceof cY&&r.push(t),function(e){let t=e.filter(e=>e instanceof c0).length,n=e.filter(e=>e instanceof cZ).length;if(t>1||t>0&&n>0)throw new nb(nw.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r=r.concat(n)),r))e=i._apply(e);return e}class cZ extends cX{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new cZ(e,t,n)}_apply(e){let t=this._parse(e);return c8(e._query,t),new ct(e.firestore,e.converter,ij(e._query,t))}_parse(e){let t=cT(e.firestore);return function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new nb(nw.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){c9(a,s);let t=[];for(let n of a)t.push(c5(r,e,n));o={arrayValue:{values:t}}}else o=c5(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||c9(a,s),o=cM(n,t,a,"in"===s||"not-in"===s);return id.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class c0 extends cY{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new c0(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:ip.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;for(let e of t.getFlattenedFilters())c8(n,e),n=ij(n,e)}(e._query,t),new ct(e.firestore,e.converter,ij(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class c1 extends cX{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new c1(e,t)}_apply(e){let t=function(e,t,n){if(null!==e.startAt)throw new nb(nw.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new nb(nw.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ic(t,n)}(e._query,this._field,this._direction);return new ct(e.firestore,e.converter,function(e,t){let n=e.explicitOrderBy.concat([t]);return new iM(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class c2 extends cX{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new c2(e,t,n)}_apply(e){return new ct(e.firestore,e.converter,iq(e._query,this._limit,this._limitType))}}class c4 extends cX{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new c4(e,t,n)}_apply(e){var t;let n=c3(e,this.type,this._docOrFields,this._inclusive);return new ct(e.firestore,e.converter,new iM((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,n,t.endAt))}}class c6 extends cX{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new c6(e,t,n)}_apply(e){var t;let n=c3(e,this.type,this._docOrFields,this._inclusive);return new ct(e.firestore,e.converter,new iM((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,n))}}function c3(e,t,n,r){if(n[0]=eS(n[0]),n[0]instanceof cK)return function(e,t,n,r,i){if(!r)throw new nb(nw.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);let s=[];for(let n of iU(e))if(n.field.isKeyField())s.push(r6(t,r.key));else{let e=r.data.field(n.field);if(rG(e))throw new nb(nw.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){let e=n.field.canonicalString();throw new nb(nw.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new io(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{let i=cT(e.firestore);return function(e,t,n,r,i,s){let a=e.explicitOrderBy;if(i.length>a.length)throw new nb(nw.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let o=[];for(let s=0;s<i.length;s++){let l=i[s];if(a[s].field.isKeyField()){if("string"!=typeof l)throw new nb(nw.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof l}`);if(!iV(e)&&-1!==l.indexOf("/"))throw new nb(nw.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${l}' contains a slash.`);let n=e.path.child(nM.fromString(l));if(!nV.isDocumentKey(n))throw new nb(nw.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);let i=new nV(n);o.push(r6(t,i))}else{let e=cM(n,r,l);o.push(e)}}return new io(o,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function c5(e,t,n){if("string"==typeof(n=eS(n))){if(""===n)throw new nb(nw.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iV(t)&&-1!==n.indexOf("/"))throw new nb(nw.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(nM.fromString(n));if(!nV.isDocumentKey(r))throw new nb(nw.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return r6(e,new nV(r))}if(n instanceof cn)return r6(e,n._key);throw new nb(nw.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${u5(n)}.`)}function c9(e,t){if(!Array.isArray(e)||0===e.length)throw new nb(nw.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function c8(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new nb(nw.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new nb(nw.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class c7{convertValue(e,t="none"){switch(rJ(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rq(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(r$(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nv()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let n={};return rD(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new cw(rq(e.latitude),rq(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let n=rK(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(rQ(e));default:return null}}convertTimestamp(e){let t=rj(e);return new nR(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=nM.fromString(e);ao(n)||nv();let r=new rW(n.get(1),n.get(3)),i=new nV(n.popFirst(5));return r.isEqual(t)||nm(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}class ht extends c7{constructor(e){super(),this.firestore=e}convertBytes(e){return new cg(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hr extends cK{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new hi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(cH("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class hi extends hr{data(e={}){return super.data(e)}}class hs{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new hn(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new hi(this._firestore,this._userDataWriter,n.key,n,new hn(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nb(nw.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{let r=new hi(e._firestore,e._userDataWriter,n.doc.key,n.doc,new hn(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let r=new hi(e._firestore,e._userDataWriter,t.doc.key,t.doc,new hn(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(s=(n=n.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nv()}}(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ha(e,t){return e instanceof hr&&t instanceof hr?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof hs&&t instanceof hs&&e._firestore===t._firestore&&co(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class ho extends c7{constructor(e){super(),this.firestore=e}convertBytes(e){return new cg(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,t)}}function hl(e,t,n){e=u9(e,cn);let r=u9(e.firestore,ch),i=he(e.converter,t,n);return hh(r,[ck(cT(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,sh.none())])}function hu(e,t,n,...r){e=u9(e,cn);let i=u9(e.firestore,ch),s=cT(i);return hh(i,[("string"==typeof(t=eS(t))||t instanceof cy?cL(s,"updateDoc",e._key,t,n,r):cO(s,"updateDoc",e._key,t)).toMutation(e._key,sh.exists(!0))])}function hc(e,...t){var n,r,i;let s,a,o;e=eS(e);let l={includeMetadataChanges:!1,source:"default"},u=0;"object"!=typeof t[0]||cu(t[u])||(l=t[u],u++);let c={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(cu(t[u])){let e=t[u];t[u]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[u+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[u+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}if(e instanceof cn)a=u9(e.firestore,ch),o=iF(e._key.path),s={next:n=>{t[u]&&t[u](hd(a,e,n))},error:t[u+1],complete:t[u+2]};else{let n=u9(e,ct);a=u9(n.firestore,ch),o=n._query;let r=new ho(a);s={next:e=>{t[u]&&t[u](new hs(a,r,n,e))},error:t[u+1],complete:t[u+2]},cW(e._query)}return function(e,t,n,r){let i=new uF(r),s=new lJ(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>lQ(await uX(e),s)),()=>{i.$a(),e.asyncQueue.enqueueAndForget(async()=>lH(await uX(e),s))}}(cd(a),o,c,s)}function hh(e,t){return function(e,t){let n=new n_;return e.asyncQueue.enqueueAndForget(async()=>us(await uY(e),t,n)),n.promise}(cd(e),t)}function hd(e,t,n){let r=n.docs.get(t._key),i=new ho(e);return new hr(e,i,t._key,r,new hn(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cT(e)}set(e,t,n){this._verifyNotCommitted();let r=hm(e,this._firestore),i=he(r.converter,t,n),s=ck(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,sh.none())),this}update(e,t,n,...r){let i;this._verifyNotCommitted();let s=hm(e,this._firestore);return i="string"==typeof(t=eS(t))||t instanceof cy?cL(this._dataReader,"WriteBatch.update",s._key,t,n,r):cO(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(i.toMutation(s._key,sh.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=hm(e,this._firestore);return this._mutations=this._mutations.concat(new sE(t._key,sh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nb(nw.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hm(e,t){if((e=eS(e)).firestore!==t)throw new nb(nw.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=cT(e)}get(e){let t=hm(e,this._firestore),n=new ht(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return nv();let r=e[0];if(r.isFoundDocument())return new cK(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new cK(this._firestore,n,t._key,null,t.converter);throw nv()})}set(e,t,n){let r=hm(e,this._firestore),i=he(r.converter,t,n),s=ck(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){let i;let s=hm(e,this._firestore);return i="string"==typeof(t=eS(t))||t instanceof cy?cL(this._dataReader,"Transaction.update",s._key,t,n,r):cO(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,i),this}delete(e){let t=hm(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=hm(e,this._firestore),n=new ho(this._firestore);return super.get(e).then(e=>new hr(this._firestore,n,t._key,e._document,new hn(!1,!1),t.converter))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new nb("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(){if("undefined"==typeof Uint8Array)throw new nb("unimplemented","Uint8Arrays are not available in this environment.")}function hw(){if(!("undefined"!=typeof atob))throw new nb("unimplemented","Blobs are unavailable in Firestore in this environment.")}new WeakMap,function(e=!0){nh=ti,e3(new eI("firestore",(t,{instanceIdentifier:n,options:r})=>{let i=t.getProvider("app").getImmediate(),s=new ch(new nx(t.getProvider("auth-internal")),new nN(t.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new nb(nw.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rW(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),tc(nu,"4.6.3",void 0),tc(nu,"4.6.3","esm2017")}();class hb{constructor(e){this._delegate=e}static fromBase64String(e){return hw(),new hb(cg.fromBase64String(e))}static fromUint8Array(e){return hv(),new hb(cg.fromUint8Array(e))}toBase64(){return hw(),this._delegate.toBase64()}toUint8Array(){return hv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(let n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{enableIndexedDbPersistence(e,t){return function(e,t){cm(e=u9(e,ch));let n=cd(e);if(n._uninitializedComponentsProvider)throw new nb(nw.FAILED_PRECONDITION,"SDK cache is already specified.");ng("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=e._freezeSettings(),i=new uL;return cp(n,i,new uR(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){cm(e=u9(e,ch));let t=cd(e);if(t._uninitializedComponentsProvider)throw new nb(nw.FAILED_PRECONDITION,"SDK cache is already specified.");ng("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=e._freezeSettings(),r=new uL;return cp(t,r,new uO(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new nb(nw.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let t=new n_;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!n0.D())return Promise.resolve();await n0.delete(e+"main")}(oO(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}(e._delegate)}}class hS{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof rW||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();e.merge||t.host===e.host||ng("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;let s=(e=u9(e,ce))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&ng("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=nc.MOCK_USER;else{t=/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[et(JSON.stringify({alg:"none",type:"JWT"})),et(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);let s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new nb(nw.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new nc(s)}e._authCredentials=new nI(new nE(t,n))}}(this._delegate,e,t,n)}enableNetwork(){var e;return(e=cd(u9(this._delegate,ch))).asyncQueue.enqueue(async()=>{let t=await uQ(e),n=await uW(e);return t.setNetworkEnabled(!0),n.M_.delete(0),lp(n)})}disableNetwork(){var e;return(e=cd(u9(this._delegate,ch))).asyncQueue.enqueue(async()=>{let t=await uQ(e),n=await uW(e);return t.setNetworkEnabled(!1),async function(e){e.M_.add(0),await lm(e),e.N_.set("Offline")}(n)})}enablePersistence(e){let t=!1,n=!1;return e&&u4("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){let t=new n_;return e.asyncQueue.enqueueAndForget(async()=>uh(await uY(e),t)),t.promise}(cd(u9(this._delegate,ch)))}onSnapshotsInSync(e){var t;return function(e,t){let n=new uF(t);return e.asyncQueue.enqueueAndForget(async()=>{(await uX(e)).z_.add(n),n.next()}),()=>{n.$a(),e.asyncQueue.enqueueAndForget(async()=>(function(e,t){e.z_.delete(t)})(await uX(e),n))}}(cd(u9(this._delegate,ch)),cu(e)?e:{next:e})}get app(){if(!this._appCompat)throw new nb("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hF(this,ci(this._delegate,e))}catch(e){throw hN(e,"collection()","Firestore.collection()")}}doc(e){try{return new hC(this,cs(this._delegate,e))}catch(e){throw hN(e,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hO(this,function(e,t){if(e=u9(e,ce),u2("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new nb(nw.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ct(e,null,new iM(nM.emptyPath(),t))}(this._delegate,e))}catch(e){throw hN(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=u9(e,ch);let r=Object.assign(Object.assign({},hf),void 0);return!function(e){if(e.maxAttempts<1)throw new nb(nw.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){let r=new n_;return e.asyncQueue.enqueueAndForget(async()=>{let i=await uK(e).then(e=>e.datastore);new uU(e.asyncQueue,i,n,t,r).Xa()}),r.promise}(cd(e),n=>t(new hg(e,n)),r)}(this._delegate,t=>e(new hx(this,t)))}batch(){return cd(this._delegate),new hT(new hp(this._delegate,e=>hh(this._delegate,e)))}loadBundle(e){return function(e,t){let n=cd(e=u9(e,ch)),r=new cc;return function(e,t,n,r){var i;let s=(i=la(t),new uB(function(e,t){if(e instanceof Uint8Array)return uM(e,void 0);if(e instanceof ArrayBuffer)return uM(new Uint8Array(e),void 0);if(e instanceof ReadableStream)return e.getReader();throw Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof n?sD().encode(n):n),i));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){(async function(e,t,n){try{var r;let i=await t.getMetadata();if(await function(e,t){let n=sJ(t.createTime);return e.persistence.runTransaction("hasNewerBundle","readonly",n=>e.$r.getBundleMetadata(n,t.id)).then(e=>!!e&&e.createTime.compareTo(n)>=0)}(e.localStore,i))return await t.close(),n._completeWith({taskState:"Success",documentsLoaded:i.totalDocuments,bytesLoaded:i.totalBytes,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}),Promise.resolve(new Set);n._updateProgress(l2(i));let s=new l1(i,e.localStore,t.serializer),a=await t.qa();for(;a;){let e=await s._a(a);e&&n._updateProgress(e),a=await t.qa()}let o=await s.complete();return await uv(e,o.ca,void 0),await (r=e.localStore).persistence.runTransaction("Save bundle","readwrite",e=>r.$r.saveBundleMetadata(e,i)),n._completeWith(o.progress),Promise.resolve(o.ua)}catch(e){return ng("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}})(e,t,n).then(t=>{e.sharedClientState.notifyBundleLoaded(t)})}(await uY(e),s,r)})}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){var t,n;return(n=cd(t=u9(t=this._delegate,ch))).asyncQueue.enqueue(async()=>{var t;return(t=await uH(n)).persistence.runTransaction("Get named query","readonly",n=>t.$r.getNamedQuery(n,e))}).then(e=>e?new ct(t,null,e.query):null).then(e=>e?new hO(this,e):null)}}class hI extends c7{constructor(e){super(),this.firestore=e}convertBytes(e){return new hb(new cg(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return hC.forKey(t,this.firestore,null)}}class hx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hI(e)}get(e){let t=u9(e,cn);return this._delegate.get(t).then(e=>new hP(this._firestore,new hr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){let r=u9(e,cn);return n?(hy("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){let i=u9(e,cn);return 2==arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){let t=u9(e,cn);return this._delegate.delete(t),this}}class hT{constructor(e){this._delegate=e}set(e,t,n){let r=u9(e,cn);return n?(hy("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){let i=u9(e,cn);return 2==arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){let t=u9(e,cn);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class hk{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){let n=new hi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new hR(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let n=hk.INSTANCES,r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new hk(e,new hI(e),t),r.set(t,i)),i}}hk.INSTANCES=new WeakMap;class hC{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hI(e)}static forPath(e,t,n){if(e.length%2!=0)throw new nb("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new hC(t,new cn(t._delegate,n,new nV(e)))}static forKey(e,t,n){return new hC(t,new cn(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new hF(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hF(this.firestore,ci(this._delegate,e))}catch(e){throw hN(e,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=eS(e))instanceof cn&&ca(this._delegate,e)}set(e,t){t=hy("DocumentReference.set",t);try{if(t)return hl(this._delegate,e,t);return hl(this._delegate,e)}catch(e){throw hN(e,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{if(1==arguments.length)return hu(this._delegate,e);return hu(this._delegate,e,t,...n)}catch(e){throw hN(e,"updateDoc()","DocumentReference.update()")}}delete(){var e;return hh(u9((e=this._delegate).firestore,ch),[new sE(e._key,sh.none())])}onSnapshot(...e){let t=hD(e),n=hA(e,e=>new hP(this.firestore,new hr(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return hc(this._delegate,t,n)}get(e){return((null==e?void 0:e.source)==="cache"?function(e){e=u9(e,cn);let t=u9(e.firestore,ch),n=cd(t),r=new ho(t);return(function(e,t){let n=new n_;return e.asyncQueue.enqueueAndForget(async()=>(async function(e,t,n){try{let r=await e.persistence.runTransaction("read document","readonly",n=>e.localDocuments.getDocument(n,t));r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new nb(nw.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(r){let e=lz(r,`Failed to get document '${t} from cache`);n.reject(e)}})(await uH(e),t,n)),n.promise})(n,e._key).then(n=>new hr(t,r,e._key,n,new hn(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):(null==e?void 0:e.source)==="server"?function(e){e=u9(e,cn);let t=u9(e.firestore,ch);return uJ(cd(t),e._key,{source:"server"}).then(n=>hd(t,e,n))}(this._delegate):/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){e=u9(e,cn);let t=u9(e.firestore,ch);return uJ(cd(t),e._key).then(n=>hd(t,e,n))}(this._delegate)).then(e=>new hP(this.firestore,new hr(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new hC(this.firestore,e?this._delegate.withConverter(hk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function hN(e,t,n){return e.message=e.message.replace(t,n),e}function hD(e){for(let t of e)if("object"==typeof t&&!h_(t))return t;return{}}function hA(e,t){var n,r;let i;return{next:e=>{i.next&&i.next(t(e))},error:null===(n=(i=h_(e[0])?e[0]:h_(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class hP{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new hC(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ha(this._delegate,e._delegate)}}class hR extends hP{data(e){let t=this._delegate.data(e);return this._delegate._converter||void 0!==t||nv(),t}}class hO{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hI(e)}where(e,t,n){try{return new hO(this.firestore,cJ(this._delegate,function(e,t,n){let r=cH("where",e);return cZ._create(r,t,n)}(e,t,n)))}catch(e){throw hN(e,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new hO(this.firestore,cJ(this._delegate,function(e,t="asc"){let n=cH("orderBy",e);return c1._create(n,t)}(e,t)))}catch(e){throw hN(e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hO(this.firestore,cJ(this._delegate,(u8("limit",e),c2._create("limit",e,"F"))))}catch(e){throw hN(e,"limit()","Query.limit()")}}limitToLast(e){try{return new hO(this.firestore,cJ(this._delegate,(u8("limitToLast",e),c2._create("limitToLast",e,"L"))))}catch(e){throw hN(e,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hO(this.firestore,cJ(this._delegate,function(...e){return c4._create("startAt",e,!0)}(...e)))}catch(e){throw hN(e,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hO(this.firestore,cJ(this._delegate,function(...e){return c4._create("startAfter",e,!1)}(...e)))}catch(e){throw hN(e,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hO(this.firestore,cJ(this._delegate,function(...e){return c6._create("endBefore",e,!1)}(...e)))}catch(e){throw hN(e,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hO(this.firestore,cJ(this._delegate,function(...e){return c6._create("endAt",e,!0)}(...e)))}catch(e){throw hN(e,"endAt()","Query.endAt()")}}isEqual(e){return co(this._delegate,e._delegate)}get(e){return((null==e?void 0:e.source)==="cache"?function(e){e=u9(e,ct);let t=u9(e.firestore,ch),n=cd(t),r=new ho(t);return(function(e,t){let n=new n_;return e.asyncQueue.enqueueAndForget(async()=>(async function(e,t,n){try{let r=await o$(e,t,!0),i=new l3(t,r.hs),s=i.da(r.documents),a=i.applyChanges(s,!1);n.resolve(a.snapshot)}catch(r){let e=lz(r,`Failed to execute query '${t} against cache`);n.reject(e)}})(await uH(e),t,n)),n.promise})(n,e._query).then(n=>new hs(t,r,e,n))}(this._delegate):(null==e?void 0:e.source)==="server"?function(e){e=u9(e,ct);let t=u9(e.firestore,ch),n=cd(t),r=new ho(t);return uZ(n,e._query,{source:"server"}).then(n=>new hs(t,r,e,n))}(this._delegate):function(e){e=u9(e,ct);let t=u9(e.firestore,ch),n=cd(t),r=new ho(t);return cW(e._query),uZ(n,e._query).then(n=>new hs(t,r,e,n))}(this._delegate)).then(e=>new hM(this.firestore,new hs(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){let t=hD(e),n=hA(e,e=>new hM(this.firestore,new hs(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return hc(this._delegate,t,n)}withConverter(e){return new hO(this.firestore,e?this._delegate.withConverter(hk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class hL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new hR(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new hO(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new hR(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new hL(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new hR(this._firestore,n))})}isEqual(e){return ha(this._delegate,e._delegate)}}class hF extends hO{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new hC(this.firestore,e):null}doc(e){try{if(void 0===e)return new hC(this.firestore,cs(this._delegate));return new hC(this.firestore,cs(this._delegate,e))}catch(e){throw hN(e,"doc()","CollectionReference.doc()")}}add(e){return(function(e,t){let n=u9(e.firestore,ch),r=cs(e),i=he(e.converter,t);return hh(n,[ck(cT(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,sh.exists(!1))]).then(()=>r)})(this._delegate,e).then(e=>new hC(this.firestore,e))}isEqual(e){return ca(this._delegate,e._delegate)}withConverter(e){return new hF(this.firestore,e?this._delegate.withConverter(hk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(...e){this._delegate=new cy(...e)}static documentId(){return new hB(nB.keyField().canonicalString())}isEqual(e){return(e=eS(e))instanceof cy&&this._delegate._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this._delegate=e}static serverTimestamp(){let e=new cD("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new hV(e)}static delete(){let e=new cC("deleteField");return e._methodName="FieldValue.delete",new hV(e)}static arrayUnion(...e){let t=function(...e){return new cA("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new hV(t)}static arrayRemove(...e){let t=function(...e){return new cP("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new hV(t)}static increment(e){let t=new cR("increment",e);return t._methodName="FieldValue.increment",new hV(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU={Firestore:hS,GeoPoint:cw,Timestamp:nR,Blob:hb,Transaction:hx,WriteBatch:hT,DocumentReference:hC,DocumentSnapshot:hP,Query:hO,QueryDocumentSnapshot:hR,QuerySnapshot:hM,CollectionReference:hF,FieldPath:hB,FieldValue:hV,setLogLevel:function(e){nd.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};!function(e,t){e.INTERNAL.registerComponent(new eI("firestore-compat",e=>t(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},hU)))}(tx,(e,t)=>new hS(e,t,new hE)),tx.registerVersion("@firebase/firestore-compat","0.3.32");const hz=tx.initializeApp({apiKey:"AIzaSyBsK7Z_5DRorwfWe9J7fm9foAHNADN14io",authDomain:"jsa-slutprojekt-ardi-fetiu.firebaseapp.com",projectId:"jsa-slutprojekt-ardi-fetiu",storageBucket:"jsa-slutprojekt-ardi-fetiu.appspot.com",messagingSenderId:"214270489317",appId:"1:214270489317:web:37f1a2b681aa0015941a0c"}).firestore();var F=R("acw62"),hj={};!/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/function(){var e={}.hasOwnProperty;function t(){for(var r="",i=0;i<arguments.length;i++){var s=arguments[i];s&&(r=n(r,function(r){if("string"==typeof r||"number"==typeof r)return r;if("object"!=typeof r)return"";if(Array.isArray(r))return t.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var i="";for(var s in r)e.call(r,s)&&r[s]&&(i=n(i,s));return i}(s)))}return r}function n(e,t){return t?e?e+" "+t:e+t:e}hj?(t.default=t,hj=t):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return t}):window.classNames=t}();var F=(R("acw62"),R("acw62"));const hq=["as","disabled"];function h$({tagName:e,disabled:t,href:n,target:r,rel:i,role:s,onClick:a,tabIndex:o=0,type:l}){e||(e=null!=n||null!=r||null!=i?"a":"button");let u={tagName:e};if("button"===e)return[{type:l||"button",disabled:t},u];let c=r=>{var i;if(!t&&("a"!==e||(i=n)&&"#"!==i.trim())||r.preventDefault(),t){r.stopPropagation();return}null==a||a(r)};return"a"===e&&(n||(n="#"),t&&(n=void 0)),[{role:null!=s?s:"button",disabled:void 0,tabIndex:t?void 0:o,href:n,target:"a"===e?r:void 0,"aria-disabled":t||void 0,rel:"a"===e?i:void 0,onClick:c,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),c(e))}},u]}F.forwardRef((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,hq),[s,{tagName:a}]=h$(Object.assign({tagName:n,disabled:r},i));return(0,L.jsx)(a,Object.assign({},i,s,{ref:t}))}).displayName="Button";var F=R("acw62");const hG=F.createContext({prefixes:{},breakpoints:["xxl","xl","lg","md","sm","xs"],minBreakpoint:"xs"}),{Consumer:hK,Provider:hQ}=hG;function hH(e,t){let{prefixes:n}=(0,F.useContext)(hG);return e||n[t]||t}const hW=F.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:r,active:i=!1,disabled:s=!1,className:a,...o},l)=>{let u=hH(t,"btn"),[c,{tagName:h}]=h$({tagName:e,disabled:s,...o});return(0,L.jsx)(h,{...c,...o,ref:l,disabled:s,className:D(hj)(a,u,i&&"active",n&&`${u}-${n}`,r&&`${u}-${r}`,o.href&&s&&"disabled")})});hW.displayName="Button";var hY={};hY=R("hOzOt")();var F=(R("acw62"),R("acw62"),R("acw62"));const hX={type:D(hY).string,tooltip:D(hY).bool,as:D(hY).elementType},hJ=F.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:r=!1,...i},s)=>(0,L.jsx)(e,{...i,ref:s,className:D(hj)(t,`${n}-${r?"tooltip":"feedback"}`)}));hJ.displayName="Feedback",hJ.propTypes=hX;var F=(R("acw62"),R("acw62"));const hZ=F.createContext({}),h0=F.forwardRef(({id:e,bsPrefix:t,className:n,type:r="checkbox",isValid:i=!1,isInvalid:s=!1,as:a="input",...o},l)=>{let{controlId:u}=(0,F.useContext)(hZ);return t=hH(t,"form-check-input"),(0,L.jsx)(a,{...o,ref:l,type:r,id:e||u,className:D(hj)(n,t,i&&"is-valid",s&&"is-invalid")})});h0.displayName="FormCheckInput";var F=R("acw62");const h1=F.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...r},i)=>{let{controlId:s}=(0,F.useContext)(hZ);return e=hH(e,"form-check-label"),(0,L.jsx)("label",{...r,ref:i,htmlFor:n||s,className:D(hj)(t,e)})});h1.displayName="FormCheckLabel";var F=R("acw62");const h2=F.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:r=!1,reverse:i=!1,disabled:s=!1,isValid:a=!1,isInvalid:o=!1,feedbackTooltip:l=!1,feedback:u,feedbackType:c,className:h,style:d,title:f="",type:p="checkbox",label:m,children:g,as:y="input",...v},w)=>{t=hH(t,"form-check"),n=hH(n,"form-switch");let{controlId:b}=(0,F.useContext)(hZ),_=(0,F.useMemo)(()=>({controlId:e||b}),[b,e]),E=!g&&null!=m&&!1!==m||F.Children.toArray(g).some(e=>F.isValidElement(e)&&e.type===h1),S=(0,L.jsx)(h0,{...v,type:"switch"===p?"checkbox":p,ref:w,isValid:a,isInvalid:o,disabled:s,as:y});return(0,L.jsx)(hZ.Provider,{value:_,children:(0,L.jsx)("div",{style:d,className:D(hj)(h,E&&t,r&&`${t}-inline`,i&&`${t}-reverse`,"switch"===p&&n),children:g||(0,L.jsxs)(L.Fragment,{children:[S,E&&(0,L.jsx)(h1,{title:f,children:m}),u&&(0,L.jsx)(hJ,{type:c,tooltip:l,children:u})]})})})});h2.displayName="FormCheck";var h4=Object.assign(h2,{Input:h0,Label:h1}),F=R("acw62");const h6=F.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:r,id:i,className:s,isValid:a=!1,isInvalid:o=!1,plaintext:l,readOnly:u,as:c="input",...h},d)=>{let{controlId:f}=(0,F.useContext)(hZ);return e=hH(e,"form-control"),(0,L.jsx)(c,{...h,type:t,size:r,ref:d,readOnly:u,id:i||f,className:D(hj)(s,l?`${e}-plaintext`:e,n&&`${e}-${n}`,"color"===t&&`${e}-color`,a&&"is-valid",o&&"is-invalid")})});h6.displayName="FormControl";var h3=Object.assign(h6,{Feedback:hJ}),F=R("acw62");const h5=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=hH(t,"form-floating"),(0,L.jsx)(n,{ref:i,className:D(hj)(e,t),...r})));h5.displayName="FormFloating";var F=R("acw62");const h9=F.forwardRef(({controlId:e,as:t="div",...n},r)=>{let i=(0,F.useMemo)(()=>({controlId:e}),[e]);return(0,L.jsx)(hZ.Provider,{value:i,children:(0,L.jsx)(t,{...n,ref:r})})});h9.displayName="FormGroup";var F=(R("acw62"),R("acw62"));const h8=F.forwardRef((e,t)=>{let[{className:n,...r},{as:i="div",bsPrefix:s,spans:a}]=function({as:e,bsPrefix:t,className:n,...r}){t=hH(t,"col");let i=function(){let{breakpoints:e}=(0,F.useContext)(hG);return e}(),s=function(){let{minBreakpoint:e}=(0,F.useContext)(hG);return e}(),a=[],o=[];return i.forEach(e=>{let n,i,l;let u=r[e];delete r[e],"object"==typeof u&&null!=u?{span:n,offset:i,order:l}=u:n=u;let c=e!==s?`-${e}`:"";n&&a.push(!0===n?`${t}${c}`:`${t}${c}-${n}`),null!=l&&o.push(`order${c}-${l}`),null!=i&&o.push(`offset${c}-${i}`)}),[{...r,className:D(hj)(n,...a,...o)},{as:e,bsPrefix:t,spans:a}]}(e);return(0,L.jsx)(i,{...r,ref:t,className:D(hj)(n,!a.length&&s)})});h8.displayName="Col";const h7=F.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:r=!1,className:i,htmlFor:s,...a},o)=>{let{controlId:l}=(0,F.useContext)(hZ);t=hH(t,"form-label");let u="col-form-label";"string"==typeof n&&(u=`${u} ${u}-${n}`);let c=D(hj)(i,t,r&&"visually-hidden",n&&u);return(s=s||l,n)?(0,L.jsx)(h8,{ref:o,as:"label",className:c,htmlFor:s,...a}):(0,L.jsx)(e,{ref:o,className:c,htmlFor:s,...a})});h7.displayName="FormLabel";var F=R("acw62");const de=F.forwardRef(({bsPrefix:e,className:t,id:n,...r},i)=>{let{controlId:s}=(0,F.useContext)(hZ);return e=hH(e,"form-range"),(0,L.jsx)("input",{...r,type:"range",ref:i,className:D(hj)(t,e),id:n||s})});de.displayName="FormRange";var F=R("acw62");const dt=F.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:r,isValid:i=!1,isInvalid:s=!1,id:a,...o},l)=>{let{controlId:u}=(0,F.useContext)(hZ);return e=hH(e,"form-select"),(0,L.jsx)("select",{...o,size:n,ref:l,className:D(hj)(r,e,t&&`${e}-${t}`,i&&"is-valid",s&&"is-invalid"),id:a||u})});dt.displayName="FormSelect";var F=R("acw62");const dn=F.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:r,...i},s)=>(e=hH(e,"form-text"),(0,L.jsx)(n,{...i,ref:s,className:D(hj)(t,e,r&&"text-muted")})));dn.displayName="FormText";var F=R("acw62");const dr=F.forwardRef((e,t)=>(0,L.jsx)(h4,{...e,ref:t,type:"switch"}));dr.displayName="Switch";var di=Object.assign(dr,{Input:h4.Input,Label:h4.Label}),F=R("acw62");const ds=F.forwardRef(({bsPrefix:e,className:t,children:n,controlId:r,label:i,...s},a)=>(e=hH(e,"form-floating"),(0,L.jsxs)(h9,{ref:a,className:D(hj)(t,e),controlId:r,...s,children:[n,(0,L.jsx)("label",{htmlFor:r,children:i})]})));ds.displayName="FloatingLabel";const da={_ref:D(hY).any,validated:D(hY).bool,as:D(hY).elementType},dl=F.forwardRef(({className:e,validated:t,as:n="form",...r},i)=>(0,L.jsx)(n,{...r,ref:i,className:D(hj)(e,t&&"was-validated")}));dl.displayName="Form",dl.propTypes=da;var du=Object.assign(dl,{Group:h9,Control:h3,Floating:h5,Check:h4,Switch:di,Label:h7,Text:dn,Range:de,Select:dt,FloatingLabel:ds}),dc=({addTask:e})=>{let[t,n]=(0,F.useState)(""),[r,i]=(0,F.useState)(""),[s,a]=(0,F.useState)("");return(0,L.jsxs)(du,{onSubmit:s=>{s.preventDefault(),""===t.trim()||""===r.trim()?a("Task and category cannot be empty."):(a(""),e({task:t,category:r,status:"to do",comments:[],assigned:""}),n(""),i(""))},children:[(0,L.jsxs)(du.Group,{controlId:"taskFormTask",children:[(0,L.jsx)(du.Label,{children:"Task"}),(0,L.jsx)(du.Control,{type:"text",placeholder:"Enter task",value:t,onChange:e=>{n(e.target.value)}})]}),(0,L.jsxs)(du.Group,{controlId:"taskFormCategory",className:"mt-2",children:[(0,L.jsx)(du.Label,{children:"Category"}),(0,L.jsxs)(du.Control,{as:"select",value:r,onChange:e=>{i(e.target.value)},children:[(0,L.jsx)("option",{value:"",children:"Select category"}),["ux","frontend","backend"].map(e=>(0,L.jsx)("option",{value:e,children:e},e))]})]}),s&&(0,L.jsx)("div",{className:"mt-2 alert alert-danger",role:"alert",children:s}),(0,L.jsx)(hW,{variant:"primary",type:"submit",className:"mt-2",children:"Add Task"})]})};R("acw62");var F=(R("acw62"),R("acw62"),R("acw62"));const dh=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=hH(t,"card-body"),(0,L.jsx)(n,{ref:i,className:D(hj)(e,t),...r})));dh.displayName="CardBody";var F=R("acw62");const dd=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=hH(t,"card-footer"),(0,L.jsx)(n,{ref:i,className:D(hj)(e,t),...r})));dd.displayName="CardFooter";var F=(R("acw62"),R("acw62"));const df=F.createContext(null);df.displayName="CardHeaderContext";const dp=F.forwardRef(({bsPrefix:e,className:t,as:n="div",...r},i)=>{let s=hH(e,"card-header"),a=(0,F.useMemo)(()=>({cardHeaderBsPrefix:s}),[s]);return(0,L.jsx)(df.Provider,{value:a,children:(0,L.jsx)(n,{ref:i,...r,className:D(hj)(t,s)})})});dp.displayName="CardHeader";var F=R("acw62");const dm=F.forwardRef(({bsPrefix:e,className:t,variant:n,as:r="img",...i},s)=>{let a=hH(e,"card-img");return(0,L.jsx)(r,{ref:s,className:D(hj)(n?`${a}-${n}`:a,t),...i})});dm.displayName="CardImg";var F=R("acw62");const dg=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...r},i)=>(t=hH(t,"card-img-overlay"),(0,L.jsx)(n,{ref:i,className:D(hj)(e,t),...r})));dg.displayName="CardImgOverlay";var F=R("acw62");const dy=F.forwardRef(({className:e,bsPrefix:t,as:n="a",...r},i)=>(t=hH(t,"card-link"),(0,L.jsx)(n,{ref:i,className:D(hj)(e,t),...r})));dy.displayName="CardLink";var F=(R("acw62"),R("acw62")),dv=e=>F.forwardRef((t,n)=>(0,L.jsx)("div",{...t,ref:n,className:D(hj)(t.className,e)}));const dw=dv("h6"),db=F.forwardRef(({className:e,bsPrefix:t,as:n=dw,...r},i)=>(t=hH(t,"card-subtitle"),(0,L.jsx)(n,{ref:i,className:D(hj)(e,t),...r})));db.displayName="CardSubtitle";var F=R("acw62");const d_=F.forwardRef(({className:e,bsPrefix:t,as:n="p",...r},i)=>(t=hH(t,"card-text"),(0,L.jsx)(n,{ref:i,className:D(hj)(e,t),...r})));d_.displayName="CardText";var F=R("acw62");const dE=dv("h5"),dS=F.forwardRef(({className:e,bsPrefix:t,as:n=dE,...r},i)=>(t=hH(t,"card-title"),(0,L.jsx)(n,{ref:i,className:D(hj)(e,t),...r})));dS.displayName="CardTitle";const dI=F.forwardRef(({bsPrefix:e,className:t,bg:n,text:r,border:i,body:s=!1,children:a,as:o="div",...l},u)=>{let c=hH(e,"card");return(0,L.jsx)(o,{ref:u,...l,className:D(hj)(t,c,n&&`bg-${n}`,r&&`text-${r}`,i&&`border-${i}`),children:s?(0,L.jsx)(dh,{children:a}):a})});dI.displayName="Card";var dx=Object.assign(dI,{Img:dm,Title:dS,Subtitle:db,Body:dh,Link:dy,Text:d_,Header:dp,Footer:dd,ImgOverlay:dg}),dT=({task:e,updateTask:t,deleteTask:n})=>{let[r,i]=(0,F.useState)(e.assigned),[s,a]=(0,F.useState)(""),[o,l]=(0,F.useState)(e.comments||[]),[u,c]=(0,F.useState)(""),h=()=>{if(!r.trim()){c("Please enter a name to assign the task.");return}t(e.id,{...e,status:"in progress",assigned:r}),i(""),c("")},d=()=>{if(""===s.trim()){c("Comment cannot be empty.");return}let n=[...o,s];l(n),t(e.id,{...e,comments:n}),a(""),c("")};return(0,L.jsx)(dx,{className:"mb-3",children:(0,L.jsxs)(dx.Body,{children:[(0,L.jsx)(dx.Title,{children:e.task}),(0,L.jsxs)(dx.Text,{children:["Category: ",e.category]}),"to do"===e.status&&(0,L.jsxs)("div",{children:[(0,L.jsx)("input",{type:"text",className:"form-control",value:r,onChange:e=>{i(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&h()},placeholder:"Assign to"}),(0,L.jsx)(hW,{className:"mt-2 btn-primary",onClick:h,children:"Assign"})]}),"in progress"===e.status&&(0,L.jsxs)("div",{children:[(0,L.jsxs)("p",{children:["Assigned to: ",e.assigned]}),(0,L.jsx)(hW,{className:"mt-2 btn-success",onClick:()=>{t(e.id,{...e,status:"done"})},children:"Done"})]}),"done"===e.status&&(0,L.jsxs)("div",{children:[(0,L.jsxs)("p",{children:["Assigned to: ",e.assigned]}),(0,L.jsx)(hW,{className:"mt-2 btn-danger",onClick:()=>{n(e.id)},children:"Remove"})]}),(0,L.jsxs)("div",{className:"mt-3",children:[(0,L.jsx)("h6",{children:"Comments:"}),(0,L.jsx)("ul",{children:o.map((e,t)=>(0,L.jsx)("li",{children:e},t))}),(0,L.jsx)(du.Group,{className:"mb-3",children:(0,L.jsx)(du.Control,{as:"textarea",rows:1,value:s,onChange:e=>{a(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&d()},placeholder:"Add a comment"})}),(0,L.jsx)(hW,{variant:"primary",onClick:d,children:"Add Comment"})]}),u&&(0,L.jsx)("div",{className:"mt-2 alert alert-danger",role:"alert",children:u})]})})},dk=({title:e,tasks:t,updateTask:n,deleteTask:r})=>(0,L.jsxs)("div",{children:[(0,L.jsx)("h3",{children:e}),t.map(e=>(0,L.jsx)(dT,{task:e,updateTask:n,deleteTask:r,assigned:e.assigned},e.id))]}),F=R("acw62"),dC=({filterTasks:e})=>{let[t,n]=(0,F.useState)("all");return(0,L.jsxs)("form",{className:"form-inline",children:[(0,L.jsxs)("div",{className:"form-group mr-2",children:[(0,L.jsx)("label",{htmlFor:"categoryFilter",className:"mr-2",children:"Filter"}),(0,L.jsxs)("select",{id:"categoryFilter",className:"form-control",value:t,onChange:e=>{n(e.target.value)},style:{marginLeft:"8px"},children:[(0,L.jsx)("option",{value:"all",children:"Show All"}),(0,L.jsx)("option",{value:"ux",children:"UX"}),(0,L.jsx)("option",{value:"frontend",children:"Frontend"}),(0,L.jsx)("option",{value:"backend",children:"Backend"})]})]}),(0,L.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{e(t)},children:"Search"})]})};s(document.getElementById("root")).render((0,L.jsx)(()=>{let[e,t]=(0,F.useState)([]),[n,r]=(0,F.useState)([]);(0,F.useEffect)(()=>{let e=hz.collection("assignments").onSnapshot(e=>{let n=e.docs.map(e=>({id:e.id,...e.data()}));t(n),r(n)});return()=>e()},[]);let i=(e,t)=>{hz.collection("assignments").doc(e).update(t)},s=e=>{hz.collection("assignments").doc(e).delete()},a=e=>n.filter(t=>t.status===e);return(0,L.jsxs)("div",{className:"container",children:[(0,L.jsxs)("div",{className:"row mb-3",children:[(0,L.jsx)("div",{className:"col",children:(0,L.jsx)(dc,{addTask:e=>{hz.collection("assignments").add(e)}})}),(0,L.jsx)("div",{className:"col",children:(0,L.jsx)(dC,{filterTasks:t=>{"all"===t?r(e):r(e.filter(e=>e.category===t))}})})]}),(0,L.jsxs)("div",{className:"row",children:[(0,L.jsx)("div",{className:"col",children:(0,L.jsx)(dk,{title:"To Do",tasks:a("to do"),updateTask:i,deleteTask:s})}),(0,L.jsx)("div",{className:"col",children:(0,L.jsx)(dk,{title:"In Progress",tasks:a("in progress"),updateTask:i,deleteTask:s})}),(0,L.jsx)("div",{className:"col",children:(0,L.jsx)(dk,{title:"Done",tasks:a("done"),updateTask:i,deleteTask:s})})]})]})},{}));
//# sourceMappingURL=index.04fe4490.js.map
